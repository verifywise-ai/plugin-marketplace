var PluginJiraAssets=function(H,e,l,s){"use strict";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ve={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),S=(c,n)=>{const d=l.forwardRef(({color:h="currentColor",size:k=24,strokeWidth:J=2,absoluteStrokeWidth:p,className:_="",children:y,...b},t)=>l.createElement("svg",{ref:t,...ve,width:k,height:k,stroke:h,strokeWidth:p?Number(J)*24/Number(k):J,className:["lucide",`lucide-${ze(c)}`,_].join(" "),...b},[...n.map(([W,u])=>l.createElement(W,u)),...Array.isArray(y)?y:[y]]));return d.displayName=`${c}`,d};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=S("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=S("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=S("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=S("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=S("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=S("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=S("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=S("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=S("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=S("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=S("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=S("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=S("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=S("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=S("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=S("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=S("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=S("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=S("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=S("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ue=({configData:c={},onConfigChange:n,onSaveConfiguration:d,onTestConnection:h,isSavingConfig:k=!1,isTestingConnection:J=!1,apiServices:p,pluginApiCall:_})=>{const y=l.useCallback(async(o,a,g)=>{var le;if(_)return _(o,a,g);if(!p)throw new Error("No API service available");const C=`/plugins/jira-assets${a.startsWith("/")?a:`/${a}`}`;let M;switch(o.toUpperCase()){case"GET":M=await p.get(C);break;case"POST":M=await p.post(C,g);break;case"PUT":M=await p.put(C,g);break;case"PATCH":M=await p.patch(C,g);break;case"DELETE":M=await p.delete(C);break;default:throw new Error(`Unsupported method: ${o}`)}return((le=M.data)==null?void 0:le.data)??M.data},[p,_]),b=!!(p||_),[t,W]=l.useState({deployment_type:"cloud",sync_enabled:!1,sync_interval_hours:24,...c}),[u,w]=l.useState(!1),[f,v]=l.useState([]),[T,U]=l.useState([]),[A,G]=l.useState(!1),[oe,X]=l.useState(!1),[D,V]=l.useState("idle"),[I,q]=l.useState(""),[re,Z]=l.useState(!1),[P,N]=l.useState(null),[E,he]=l.useState([]),[O,Y]=l.useState(new Set),[Q,te]=l.useState(!1),[m,ne]=l.useState(!1),[R,B]=l.useState(null),[$,r]=l.useState([]),[i,x]=l.useState(!1),[j,z]=l.useState(!1),[F,ee]=l.useState(null);l.useEffect(()=>{if(u||!p)return;(async()=>{var a;try{const C=await p.get("/plugins/jira-assets/config"),M=((a=C.data)==null?void 0:a.data)??C.data;M&&W(le=>({...le,...M}))}catch(g){console.error("Failed to load JIRA config:",g)}finally{w(!0)}})()},[p,u]);const L=l.useCallback((o,a)=>{W(g=>({...g,[o]:a})),n&&n(o,a)},[n]),_e=l.useCallback(async()=>{if(!(!b||!t.jira_base_url||!t.workspace_id)){G(!0);try{const o=await y("GET","/schemas");o&&Array.isArray(o)&&v(o)}catch(o){console.error("Failed to load schemas:",o)}finally{G(!1)}}},[b,y,t.jira_base_url,t.workspace_id]),pe=l.useCallback(async o=>{if(!(!b||!o)){X(!0);try{const a=await y("GET",`/schemas/${o}/object-types`);console.log("[JiraConfig] loadObjectTypes response:",a,"isArray:",Array.isArray(a)),a&&Array.isArray(a)?U(a):console.warn("[JiraConfig] Object types response is not an array:",typeof a)}catch(a){console.error("Failed to load object types:",a)}finally{X(!1)}}},[b,y]),ue=l.useCallback(async()=>{if(!(!b||!t.selected_object_type_id)){te(!0),B(null);try{const o=await y("GET",`/object-types/${t.selected_object_type_id}/objects`);if(o&&Array.isArray(o)){const a=new Set($.map(C=>C.jira_object_id)),g=o.filter(C=>!a.has(C.id));he(g)}}catch(o){B({type:"error",text:o.message||"Failed to load JIRA objects"})}finally{te(!1)}}},[b,y,t.selected_object_type_id,$]),ce=l.useCallback(async()=>{if(b){x(!0);try{const o=await y("GET","/use-cases");o&&Array.isArray(o)&&r(o)}catch(o){console.error("Failed to load imported use cases:",o)}finally{x(!1)}}},[b,y]),Ye=async()=>{if(!(!b||O.size===0)){ne(!0),B(null);try{const o=await y("POST","/import",{object_ids:Array.from(O)});o!=null&&o.success?(B({type:"success",text:`Successfully imported ${o.imported} objects`}),Y(new Set),await ce(),await ue()):B({type:"error",text:(o==null?void 0:o.error)||"Import failed"})}catch(o){B({type:"error",text:o.message||"Import failed"})}finally{ne(!1)}}},Qe=async()=>{if(b){z(!0),ee(null);try{const o=await y("POST","/sync");o!=null&&o.success?(ee({type:"success",text:`Sync completed: ${o.objectsCreated||0} created, ${o.objectsUpdated||0} updated, ${o.objectsDeleted||0} deleted`}),await ce()):ee({type:"error",text:(o==null?void 0:o.error)||"Sync failed"})}catch(o){ee({type:"error",text:o.message||"Sync failed"})}finally{z(!1)}}},me=o=>{Y(a=>{const g=new Set(a);return g.has(o)?g.delete(o):g.add(o),g})},Re=()=>{O.size===E.length?Y(new Set):Y(new Set(E.map(o=>o.id)))},es=async()=>{if(!b){h&&h();return}V("testing"),q("");try{const o=await y("POST","/test-connection",{configuration:{jira_base_url:t.jira_base_url,workspace_id:t.workspace_id,email:t.email,api_token:t.api_token,deployment_type:t.deployment_type||"cloud"}});o!=null&&o.success?(V("success"),q(o.message||"Connection successful. Click 'Save Configuration' to proceed to Step 2.")):(V("error"),q((o==null?void 0:o.message)||"Connection failed"))}catch(o){V("error"),q(o.message||"Connection test failed")}},ss=async()=>{var o,a;if(p){Z(!0),N(null);try{const g=await p.post("/plugins/jira-assets/config",{jira_base_url:t.jira_base_url,workspace_id:t.workspace_id,email:t.email,api_token:t.api_token||void 0,deployment_type:t.deployment_type||"cloud",selected_schema_id:t.selected_schema_id||void 0,selected_object_type_id:t.selected_object_type_id||void 0,sync_enabled:t.sync_enabled||!1,sync_interval_hours:t.sync_interval_hours||24}),C=((o=g.data)==null?void 0:o.data)??g.data;C!=null&&C.success?(N({type:"success",text:"Configuration saved successfully!"}),W(M=>({...M,has_api_token:!0})),w(!1)):N({type:"error",text:((a=C==null?void 0:C.errors)==null?void 0:a.join(", "))||(C==null?void 0:C.message)||"Failed to save configuration"})}catch(g){N({type:"error",text:g.message||"Failed to save configuration"})}finally{Z(!1)}}},os=o=>{L("selected_schema_id",o),L("selected_object_type_id",""),U([]),o&&pe(o)};l.useEffect(()=>{console.log("[JiraConfig] Schema load check:",{has_api_token:t.has_api_token,jira_base_url:t.jira_base_url,workspace_id:t.workspace_id,schemas_length:f.length}),t.has_api_token&&t.jira_base_url&&t.workspace_id&&f.length===0&&(console.log("[JiraConfig] Calling loadSchemas()"),_e())},[t.has_api_token,t.jira_base_url,t.workspace_id,_e,f.length]),l.useEffect(()=>{t.has_api_token&&t.selected_schema_id&&T.length===0&&pe(t.selected_schema_id)},[t.has_api_token,t.selected_schema_id,pe,T.length]),l.useEffect(()=>{b&&u&&ce()},[b,u,ce]);const rs=[{value:1,label:"Every hour"},{value:6,label:"Every 6 hours"},{value:12,label:"Every 12 hours"},{value:24,label:"Every 24 hours"},{value:48,label:"Every 48 hours"}];return e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",fontSize:13,sx:{mb:3},children:"Connect to your Jira Service Management Assets to import AI Systems as use-cases."}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 1: Connection Settings"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Deployment Type *"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:t.deployment_type||"cloud",onChange:o=>L("deployment_type",o.target.value),sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"cloud",sx:{fontSize:"13px"},children:"JIRA Cloud (Atlassian-hosted)"}),e.jsx(s.MenuItem,{value:"datacenter",sx:{fontSize:"13px"},children:"JIRA Data Center / Server (Self-hosted)"})]})}),e.jsx(s.Typography,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:"Select Cloud for *.atlassian.net, or Data Center for self-hosted JIRA"})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"JIRA Base URL *"}),e.jsx(s.TextField,{fullWidth:!0,placeholder:t.deployment_type==="datacenter"?"https://jira.your-company.com":"https://your-company.atlassian.net",value:t.jira_base_url||"",onChange:o=>L("jira_base_url",o.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[t.deployment_type==="datacenter"?"Insight Object Schema ID":"Workspace ID"," *"]}),e.jsx(s.TextField,{fullWidth:!0,placeholder:t.deployment_type==="datacenter"?"Enter object schema ID (e.g., 1)":"Enter your JSM Assets workspace ID",value:t.workspace_id||"",onChange:o=>L("workspace_id",o.target.value),size:"small",helperText:t.deployment_type==="datacenter"?"For Data Center: Use object schema ID from Insight settings":"Found in Assets settings or the URL when viewing Assets",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[t.deployment_type==="datacenter"?"Username":"Email"," *"]}),e.jsx(s.TextField,{fullWidth:!0,type:t.deployment_type==="datacenter"?"text":"email",placeholder:t.deployment_type==="datacenter"?"your-username":"your-email@company.com",value:t.email||"",onChange:o=>L("email",o.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[t.deployment_type==="datacenter"?"Password / Token":"API Token"," ",!t.has_api_token&&"*"]}),e.jsx(s.TextField,{fullWidth:!0,type:"password",placeholder:t.has_api_token&&!t.api_token?"••••••••••••••••  (saved - enter new value to change)":t.deployment_type==="datacenter"?"Enter your password or personal access token":"Enter your Atlassian API token",value:t.api_token||"",onChange:o=>L("api_token",o.target.value),size:"small",helperText:t.has_api_token&&!t.api_token?"API token is saved. Leave empty to keep current token, or enter a new value to update.":t.deployment_type==="datacenter"?"Use your JIRA password or personal access token":"Generate at id.atlassian.com/manage-profile/security/api-tokens",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]})]}),D!=="idle"&&e.jsx(s.Box,{sx:{mt:2},children:e.jsx(s.Alert,{severity:D==="success"?"success":D==="error"?"error":"info",sx:{fontSize:"13px"},children:D==="testing"?"Testing connection...":I})}),e.jsx(s.Box,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:e.jsx(s.Button,{variant:"outlined",onClick:es,disabled:J||D==="testing"||!t.jira_base_url||!t.workspace_id||!t.email||!t.api_token&&!t.has_api_token,sx:{borderColor:"#13715B",color:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{borderColor:"#0f5a47",backgroundColor:"rgba(19, 113, 91, 0.04)"},"&:disabled":{borderColor:"#d0d5dd",color:"#98a2b3"}},children:J||D==="testing"?e.jsxs(e.Fragment,{children:[e.jsx(s.CircularProgress,{size:16,sx:{mr:1}}),"Testing..."]}):"Test Connection"})}),e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 2: Select Schema & Object Type"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Schema"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:t.selected_schema_id||"",onChange:o=>os(o.target.value),disabled:A||f.length===0,displayEmpty:!0,sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"",sx:{fontSize:"13px"},children:A?"Loading schemas...":"Select a schema"}),f.map(o=>e.jsxs(s.MenuItem,{value:o.id,sx:{fontSize:"13px"},children:[o.name," (",o.objectSchemaKey,")"]},o.id))]})})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Object Type (AI Systems)"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:t.selected_object_type_id||"",onChange:o=>L("selected_object_type_id",o.target.value),disabled:oe||T.length===0||!t.selected_schema_id,displayEmpty:!0,sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"",sx:{fontSize:"13px"},children:oe?"Loading object types...":"Select an object type"}),T.map(o=>e.jsxs(s.MenuItem,{value:o.id,sx:{fontSize:"13px"},children:[o.name,o.objectCount!==void 0&&e.jsx(s.Chip,{label:`${o.objectCount} objects`,size:"small",sx:{ml:1,fontSize:"11px"}})]},o.id))]})})]})]}),e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 3: Sync Settings"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsx(s.Box,{children:e.jsx(s.FormControlLabel,{control:e.jsx(s.Switch,{checked:t.sync_enabled||!1,onChange:o=>L("sync_enabled",o.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#13715B"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#13715B"}}}),label:e.jsx(s.Typography,{variant:"body2",fontSize:13,sx:{color:"#344054"},children:"Enable automatic sync"})})}),t.sync_enabled&&e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Sync Interval"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsx(s.Select,{value:t.sync_interval_hours||24,onChange:o=>L("sync_interval_hours",o.target.value),sx:{fontSize:"13px",backgroundColor:"white"},children:rs.map(o=>e.jsx(s.MenuItem,{value:o.value,sx:{fontSize:"13px"},children:o.label},o.value))})})]})]}),t.last_sync_at&&e.jsx(s.Box,{sx:{mt:2},children:e.jsxs(s.Alert,{severity:t.last_sync_status==="success"?"success":"warning",sx:{fontSize:"13px"},children:["Last sync: ",new Date(t.last_sync_at).toLocaleString()," -"," ",t.last_sync_status==="success"?"Successful":t.last_sync_message]})}),P&&e.jsx(s.Box,{sx:{mt:2},children:e.jsx(s.Alert,{severity:P.type,sx:{fontSize:"13px"},onClose:()=>N(null),children:P.text})}),e.jsx(s.Box,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:e.jsx(s.Button,{variant:"contained",onClick:ss,disabled:re||!t.jira_base_url||!t.workspace_id||!t.email||!t.api_token&&!t.has_api_token,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{backgroundColor:"#0f5a47"},"&:disabled":{backgroundColor:"#d0d5dd"}},children:re?e.jsxs(e.Fragment,{children:[e.jsx(s.CircularProgress,{size:16,sx:{mr:1,color:"white"}}),"Saving..."]}):"Save Configuration"})}),t.has_api_token&&t.selected_object_type_id&&e.jsxs(e.Fragment,{children:[e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 4: Import JIRA Objects"}),e.jsx(s.Box,{sx:{display:"flex",gap:2,mb:2},children:e.jsx(s.Button,{variant:"outlined",startIcon:Q?e.jsx(s.CircularProgress,{size:16}):e.jsx(de,{size:16}),onClick:ue,disabled:Q||$.length>0,sx:{borderColor:"#13715B",color:"#13715B",textTransform:"none",fontSize:"13px","&:hover":{borderColor:"#0f5a47",backgroundColor:"rgba(19, 113, 91, 0.04)"},"&:disabled":{borderColor:"#d0d5dd",color:"#98a2b3"}},children:Q?"Loading...":"Fetch Objects from JIRA"})}),R&&e.jsx(s.Alert,{severity:R.type,sx:{mb:2,fontSize:"13px"},onClose:()=>B(null),children:R.text}),E.length>0&&e.jsxs(s.Box,{sx:{mb:3},children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(s.FormControlLabel,{control:e.jsx(s.Checkbox,{checked:O.size===E.length&&E.length>0,indeterminate:O.size>0&&O.size<E.length,onChange:Re,size:"small"}),label:e.jsxs(s.Typography,{variant:"body2",fontSize:13,children:["Select All (",E.length," available)"]})}),e.jsx(s.Button,{variant:"contained",onClick:Ye,disabled:m||O.size===0,startIcon:m?e.jsx(s.CircularProgress,{size:16}):e.jsx(de,{size:16}),sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px","&:hover":{backgroundColor:"#0f5a47"}},children:m?"Importing...":`Import ${O.size} Selected`})]}),e.jsx(s.TableContainer,{component:s.Paper,sx:{maxHeight:300,boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{sx:{backgroundColor:"#f9fafb"},children:[e.jsx(s.TableCell,{padding:"checkbox"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"})]})}),e.jsx(s.TableBody,{children:E.map(o=>e.jsxs(s.TableRow,{hover:!0,selected:O.has(o.id),onClick:()=>me(o.id),sx:{cursor:"pointer"},children:[e.jsx(s.TableCell,{padding:"checkbox",children:e.jsx(s.Checkbox,{checked:O.has(o.id),size:"small"})}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:o.key}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:o.name})]},o.id))})]})})]}),E.length===0&&!Q&&e.jsx(s.Alert,{severity:"info",sx:{mb:3,fontSize:"13px"},children:'Click "Fetch Objects from JIRA" to load available objects for import.'}),e.jsx(s.Divider,{sx:{my:3}}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{color:"#344054"},children:["Imported Use Cases (",$.length,")"]}),e.jsx(s.Button,{variant:"contained",startIcon:j?e.jsx(s.CircularProgress,{size:14,sx:{color:"white"}}):e.jsx(ie,{size:14}),onClick:Qe,disabled:j||i,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"12px","&:hover":{backgroundColor:"#0f5a47"},"&:disabled":{backgroundColor:"#d0d5dd"}},children:j?"Syncing...":"Sync Now"})]}),F&&e.jsx(s.Alert,{severity:F.type,sx:{mb:2,fontSize:"13px"},onClose:()=>ee(null),children:F.text}),i?e.jsx(s.Box,{sx:{display:"flex",justifyContent:"center",py:2},children:e.jsx(s.CircularProgress,{size:24})}):$.length===0?e.jsx(s.Alert,{severity:"info",sx:{fontSize:"13px"},children:"No objects imported yet. Fetch objects from JIRA and import them above."}):e.jsx(s.TableContainer,{component:s.Paper,sx:{maxHeight:400,boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",backgroundColor:"#f9fafb",py:1},children:"UC-ID"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",backgroundColor:"#f9fafb",py:1},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",backgroundColor:"#f9fafb",py:1},children:"JIRA Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",backgroundColor:"#f9fafb",py:1},children:"Status"})]})}),e.jsx(s.TableBody,{children:$.map(o=>{const a=typeof o.data=="string"?JSON.parse(o.data):o.data,g=(a==null?void 0:a.objectKey)||"-";return e.jsxs(s.TableRow,{hover:!0,children:[e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace",py:1},children:o.uc_id}),e.jsx(s.TableCell,{sx:{fontSize:"13px",py:1,cursor:"pointer",color:"#13715B","&:hover":{textDecoration:"underline"}},onClick:()=>window.location.href=`/project-view?projectId=jira-assets-${o.project_id}`,children:o.name||(a==null?void 0:a.label)||"-"}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace",py:1},children:g}),e.jsx(s.TableCell,{sx:{py:1},children:e.jsx(s.Chip,{label:o.sync_status,size:"small",color:o.sync_status==="synced"?"success":o.sync_status==="updated"?"info":"default",sx:{fontSize:"11px"}})})]},o.id)})})]})})]})]})},Pe=({apiServices:c,pluginApiCall:n})=>{const d=l.useCallback(async(r,i,x)=>{var F;if(n)return n(r,i,x);if(!c)throw new Error("No API service available");const j=`/plugins/jira-assets${i.startsWith("/")?i:`/${i}`}`;let z;switch(r.toUpperCase()){case"GET":z=await c.get(j);break;case"POST":z=await c.post(j,x);break;case"PUT":z=await c.put(j,x);break;case"PATCH":z=await c.patch(j,x);break;case"DELETE":z=await c.delete(j);break;default:throw new Error(`Unsupported method: ${r}`)}return((F=z.data)==null?void 0:F.data)??z.data},[c,n]),h=!!(c||n),[k,J]=l.useState([]),[p,_]=l.useState(!0),[y,b]=l.useState(!1),[t,W]=l.useState(null),[u,w]=l.useState(null),[f,v]=l.useState(!1),[T,U]=l.useState([]),[A,G]=l.useState(new Set),[oe,X]=l.useState(!1),[D,V]=l.useState(!1),[I,q]=l.useState(null),[re,Z]=l.useState(!1),P=l.useCallback(async()=>{if(h){_(!0),w(null);try{const r=await d("GET","/use-cases");Array.isArray(r)&&J(r)}catch(r){w(r.message||"Failed to load use cases")}finally{_(!1)}}},[h,d]),N=l.useCallback(async()=>{if(h)try{const r=await d("GET","/sync/status");W(r)}catch(r){console.error("Failed to load sync status:",r)}},[h,d]);l.useEffect(()=>{P(),N()},[P,N]);const E=async()=>{if(h){b(!0),w(null);try{const r=await d("POST","/sync");r!=null&&r.success?(await P(),await N()):w((r==null?void 0:r.status)||"Sync failed")}catch(r){w(r.message||"Sync failed")}finally{b(!1)}}},he=async()=>{if(h){v(!0),X(!0),G(new Set),U([]);try{const r=await d("GET","/config"),i=r==null?void 0:r.selected_object_type_id;if(!i){w("No object type configured. Please configure the plugin first."),X(!1);return}const x=await d("GET",`/object-types/${i}/objects`);if(Array.isArray(x)){const j=new Set(k.map(F=>F.jira_object_id)),z=x.filter(F=>!j.has(F.id));U(z)}}catch(r){w(r.message||"Failed to load JIRA objects")}finally{X(!1)}}},O=r=>{G(i=>{const x=new Set(i);return x.has(r)?x.delete(r):x.add(r),x})},Y=()=>{A.size===T.length?G(new Set):G(new Set(T.map(r=>r.id)))},Q=async()=>{if(!(!d||A.size===0)){V(!0),w(null);try{const r=await d("POST","/import",{object_ids:Array.from(A)});r!=null&&r.success?(v(!1),await P()):w((r==null?void 0:r.error)||"Import failed")}catch(r){w(r.message||"Import failed")}finally{V(!1)}}},te=r=>{q(r),Z(!0)},m=r=>{window.location.href=`/project-view?projectId=jira-assets-${r.project_id}`},ne=r=>{var x;const i=typeof r.data=="string"?JSON.parse(r.data):r.data;return(i==null?void 0:i.label)||((x=i==null?void 0:i.attributes)==null?void 0:x.Name)||r.uc_id},R=async r=>{if(h&&window.confirm(`Are you sure you want to delete "${ne(r)}"?`))try{await d("DELETE",`/use-cases/${r.id}`),await P(),(I==null?void 0:I.id)===r.id&&(Z(!1),q(null))}catch(i){w(i.message||"Failed to delete use case")}},B=r=>r?new Date(r).toLocaleString():"N/A",$=r=>{switch(r){case"synced":return e.jsx(s.Chip,{label:"Synced",size:"small",color:"success",sx:{fontSize:"11px"}});case"updated":return e.jsx(s.Chip,{label:"Updated",size:"small",color:"info",sx:{fontSize:"11px"}});case"deleted_in_jira":return e.jsx(s.Chip,{label:"Deleted in JIRA",size:"small",color:"error",sx:{fontSize:"11px"}});default:return e.jsx(s.Chip,{label:r,size:"small",sx:{fontSize:"11px"}})}};return e.jsxs(s.Box,{sx:{p:3},children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"h6",fontWeight:600,children:"JIRA AI Systems"}),e.jsx(s.Typography,{variant:"body2",color:"text.secondary",fontSize:13,children:"AI Systems imported from Jira Service Management Assets"})]}),e.jsxs(s.Box,{sx:{display:"flex",gap:2},children:[e.jsx(s.Button,{variant:"outlined",startIcon:y?e.jsx(s.CircularProgress,{size:16}):e.jsx(ie,{size:16}),onClick:E,disabled:y,sx:{borderColor:"#d0d5dd",color:"#344054",textTransform:"none",fontSize:"13px"},children:y?"Syncing...":"Sync Now"}),e.jsx(s.Button,{variant:"contained",startIcon:e.jsx(de,{size:16}),onClick:he,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px","&:hover":{backgroundColor:"#0f5a47"}},children:"Import from JIRA"})]})]}),t&&e.jsx(s.Alert,{severity:t.last_sync_status==="success"?"success":t.last_sync_status==="failed"?"warning":"info",sx:{mb:2,fontSize:"13px"},icon:e.jsx(ye,{size:18}),children:e.jsxs(s.Box,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs("span",{children:["Last sync: ",t.last_sync_at?B(t.last_sync_at):"Never"]}),t.sync_enabled&&e.jsx(s.Chip,{label:`Auto-sync: Every ${t.sync_interval_hours}h`,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"11px"}})]})}),u&&e.jsx(s.Alert,{severity:"error",sx:{mb:2,fontSize:"13px"},onClose:()=>w(null),children:u}),p?e.jsx(s.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(s.CircularProgress,{})}):k.length===0?e.jsxs(s.Paper,{sx:{p:4,textAlign:"center"},children:[e.jsx(Ie,{size:48,color:"#98a2b3"}),e.jsx(s.Typography,{variant:"h6",sx:{mt:2,color:"#344054"},children:"No JIRA AI Systems Imported"}),e.jsx(s.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:'Click "Import from JIRA" to start importing AI Systems from your JSM Assets.'})]}):e.jsx(s.TableContainer,{component:s.Paper,sx:{boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{sx:{backgroundColor:"#f9fafb"},children:[e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"UC-ID"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"JIRA Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Sync Status"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Last Synced"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},align:"right",children:"Actions"})]})}),e.jsx(s.TableBody,{children:k.map(r=>{var x;const i=typeof r.data=="string"?JSON.parse(r.data):r.data;return e.jsxs(s.TableRow,{hover:!0,children:[e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:r.uc_id}),e.jsx(s.TableCell,{sx:{fontSize:"13px",cursor:"pointer",color:"#13715B","&:hover":{textDecoration:"underline"}},onClick:()=>m(r),children:(i==null?void 0:i.label)||((x=i==null?void 0:i.attributes)==null?void 0:x.Name)||"-"}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:(i==null?void 0:i.objectKey)||"-"}),e.jsx(s.TableCell,{children:$(r.sync_status)}),e.jsx(s.TableCell,{sx:{fontSize:"12px",color:"#667085"},children:B(r.last_synced_at)}),e.jsxs(s.TableCell,{align:"right",children:[e.jsx(s.Tooltip,{title:"Open Use Case",children:e.jsx(s.IconButton,{size:"small",onClick:()=>m(r),color:"primary",children:e.jsx(Me,{size:16})})}),e.jsx(s.Tooltip,{title:"View JIRA Data",children:e.jsx(s.IconButton,{size:"small",onClick:()=>te(r),children:e.jsx(Ee,{size:16})})}),e.jsx(s.Tooltip,{title:"Delete",children:e.jsx(s.IconButton,{size:"small",onClick:()=>R(r),color:"error",children:e.jsx(be,{size:16})})})]})]},r.id)})})]})}),e.jsxs(s.Dialog,{open:f,onClose:()=>v(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(s.DialogTitle,{children:e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s.Typography,{variant:"h6",children:"Import AI Systems from JIRA"}),e.jsx(s.IconButton,{onClick:()=>v(!1),children:e.jsx(Ce,{size:20})})]})}),e.jsx(s.DialogContent,{dividers:!0,children:oe?e.jsxs(s.Box,{sx:{py:4,textAlign:"center"},children:[e.jsx(s.CircularProgress,{}),e.jsx(s.Typography,{sx:{mt:2},children:"Loading objects from JIRA..."})]}):T.length===0?e.jsx(s.Alert,{severity:"info",children:"No new objects to import. All JIRA objects have already been imported."}):e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s.FormControlLabel,{control:e.jsx(s.Checkbox,{checked:A.size===T.length&&T.length>0,indeterminate:A.size>0&&A.size<T.length,onChange:Y,size:"small"}),label:e.jsxs(s.Typography,{variant:"body2",fontSize:13,children:["Select All (",T.length," objects)"]})}),e.jsxs(s.Typography,{variant:"body2",color:"text.secondary",children:[A.size," selected"]})]}),e.jsx(s.TableContainer,{sx:{maxHeight:400},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{padding:"checkbox"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Updated"})]})}),e.jsx(s.TableBody,{children:T.map(r=>e.jsxs(s.TableRow,{hover:!0,selected:A.has(r.id),onClick:()=>O(r.id),sx:{cursor:"pointer"},children:[e.jsx(s.TableCell,{padding:"checkbox",children:e.jsx(s.Checkbox,{checked:A.has(r.id),size:"small"})}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:r.key}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:r.name}),e.jsx(s.TableCell,{sx:{fontSize:"12px",color:"#667085"},children:B(r.updated)})]},r.id))})]})})]})}),e.jsxs(s.DialogActions,{sx:{p:2},children:[e.jsx(s.Button,{onClick:()=>v(!1),sx:{textTransform:"none"},children:"Cancel"}),e.jsx(s.Button,{variant:"contained",onClick:Q,disabled:D||A.size===0,startIcon:D?e.jsx(s.CircularProgress,{size:16}):e.jsx(Je,{size:16}),sx:{backgroundColor:"#13715B",textTransform:"none","&:hover":{backgroundColor:"#0f5a47"}},children:D?"Importing...":`Import ${A.size} Objects`})]})]}),e.jsx(s.Drawer,{anchor:"right",open:re,onClose:()=>Z(!1),children:e.jsx(s.Box,{sx:{width:480,p:3},children:I&&(()=>{var j;const r=typeof I.data=="string"?JSON.parse(I.data):I.data,i=(r==null?void 0:r.label)||((j=r==null?void 0:r.attributes)==null?void 0:j.Name)||I.uc_id,x=(r==null?void 0:r.objectKey)||"-";return e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"h6",children:i}),e.jsxs(s.Typography,{variant:"body2",color:"text.secondary",sx:{fontFamily:"monospace"},children:[I.uc_id," | ",x]})]}),e.jsx(s.IconButton,{onClick:()=>Z(!1),children:e.jsx(Ce,{size:20})})]}),e.jsxs(s.Stack,{spacing:2,children:[e.jsx(s.Box,{sx:{display:"flex",gap:1},children:$(I.sync_status)}),e.jsx(s.Divider,{}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"Sync Information"}),e.jsxs(s.Stack,{spacing:1,children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"Last Synced"}),e.jsx(s.Typography,{variant:"body2",children:B(I.last_synced_at)})]}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"JIRA Created"}),e.jsx(s.Typography,{variant:"body2",children:B(r==null?void 0:r.created)})]}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"JIRA Updated"}),e.jsx(s.Typography,{variant:"body2",children:B(r==null?void 0:r.updated)})]})]})]}),e.jsx(s.Divider,{}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"JIRA Attributes"}),e.jsx(s.Stack,{spacing:1,children:Object.entries((r==null?void 0:r.attributes)||{}).map(([z,F])=>e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:z}),e.jsx(s.Typography,{variant:"body2",sx:{wordBreak:"break-word"},children:Array.isArray(F)?F.join(", "):String(F??"N/A")})]},z))})]}),e.jsx(s.Divider,{}),e.jsx(s.Box,{sx:{display:"flex",gap:2},children:e.jsx(s.Button,{variant:"outlined",color:"error",fullWidth:!0,onClick:()=>R(I),startIcon:e.jsx(be,{size:16}),sx:{textTransform:"none"},children:"Delete"})})]})]})})()})})]})},Se=c=>{if(!c)return"-";try{return new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return c}},ae={border:"1px solid #d0d5dd",borderRadius:2,background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",minWidth:228,width:"100%",padding:"8px 36px 14px 14px",position:"relative"},ke={fontSize:13,color:"#8594AC",pb:"2px",textWrap:"wrap"},Ne={fontSize:16,fontWeight:600,color:"#2D3748"},$e={fontSize:13,color:"#2D3748",textAlign:"justify"},se={display:"flex",flexDirection:"row",gap:10,mb:10},we={color:"#1A1919",fontWeight:600,mb:"10px",fontSize:16};function K({title:c,body:n,icon:d}){return e.jsxs(s.Stack,{sx:ae,children:[d&&e.jsx(s.Box,{sx:{position:"absolute",top:8,right:8,color:"#8594AC",opacity:.7},children:d}),e.jsx(s.Typography,{sx:ke,children:c}),e.jsx(s.Typography,{sx:Ne,children:n})]})}function He({title:c,body:n,icon:d}){return e.jsxs(s.Stack,{sx:ae,children:[d&&e.jsx(s.Box,{sx:{position:"absolute",top:8,right:8,color:"#8594AC",opacity:.7},children:d}),e.jsx(s.Typography,{sx:ke,children:c}),e.jsx(s.Typography,{sx:$e,children:n})]})}const Ke=({project:c})=>{var _;if(!c)return e.jsx(s.Typography,{children:"No JIRA use case found"});const n=c._jira_data,d=(n==null?void 0:n.attributes)||{},h=d["Description / Purpose"]||d.Description||d.Purpose||"No description available",k=d["Risk Level / Criticality"]||"-",J=d["Lifecycle Status"]||"-",p=d["Primary Function"]||"-";return e.jsx(s.Stack,{sx:{width:"100%"},children:e.jsxs(s.Stack,{className:"vw-project-overview",sx:{width:"100%"},children:[e.jsx(s.Box,{sx:{mb:10},children:e.jsx(s.Chip,{icon:e.jsx(fe,{size:14}),label:"Imported from JIRA Assets",size:"small",sx:{backgroundColor:"#E3F2FD",color:"#1565C0","& .MuiChip-icon":{color:"#1565C0"}}})}),e.jsxs(s.Stack,{className:"vw-project-overview-row",sx:se,children:[e.jsx(K,{title:"JIRA Object Key",body:(n==null?void 0:n.objectKey)||"-",icon:e.jsx(We,{size:16})}),e.jsx(K,{title:"Object Type",body:((_=n==null?void 0:n.objectType)==null?void 0:_.name)||"-",icon:e.jsx(je,{size:16})}),e.jsx(K,{title:"Sync Status",body:(c._sync_status||"Synced").charAt(0).toUpperCase()+(c._sync_status||"synced").slice(1),icon:e.jsx(ie,{size:16})})]}),e.jsxs(s.Stack,{className:"vw-project-overview-row",sx:se,children:[e.jsx(K,{title:"Created in JIRA",body:Se(n==null?void 0:n.created),icon:e.jsx(Fe,{size:16})}),e.jsx(K,{title:"Last Updated in JIRA",body:Se(n==null?void 0:n.updated),icon:e.jsx(ye,{size:16})})]}),e.jsxs(s.Stack,{sx:{mb:10},children:[e.jsx(s.Typography,{sx:we,children:"Key Attributes"}),e.jsxs(s.Stack,{className:"vw-project-overview-row",sx:se,children:[e.jsx(K,{title:"Risk Level / Criticality",body:k,icon:e.jsx(Be,{size:16})}),e.jsx(K,{title:"Lifecycle Status",body:J,icon:e.jsx(Ae,{size:16})}),e.jsx(K,{title:"Primary Function",body:p,icon:e.jsx(Le,{size:16})})]})]}),e.jsx(s.Stack,{className:"vw-project-overview-row",sx:se,children:e.jsx(He,{title:"Description / Purpose",body:h,icon:e.jsx(De,{size:16})})}),e.jsx(s.Divider,{}),e.jsxs(s.Stack,{sx:{gap:10,mt:10},children:[e.jsx(s.Typography,{sx:we,children:"Framework & Risk Status"}),e.jsx(s.Box,{sx:{...ae,minHeight:80,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(s.Typography,{sx:{fontSize:13,color:"#8594AC",textAlign:"center"},children:["JIRA-imported use cases don't have native framework or risk tracking.",e.jsx("br",{}),"Use the Settings tab to view all JIRA attributes."]})})]})]})})},Te=c=>{if(!c)return"-";try{return new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return c}},Ge=c=>c==null?"-":typeof c=="boolean"?c?"Yes":"No":Array.isArray(c)?c.join(", ")||"-":typeof c=="object"?JSON.stringify(c):String(c)||"-",Ve=()=>{var n;const c=s.useTheme();return{root:{display:"flex",flexDirection:"column",gap:c.spacing(4),fontSize:13,width:"100%",margin:"0 auto"},card:{background:c.palette.background.paper,border:`1.5px solid ${((n=c.palette.border)==null?void 0:n.light)||"#E5E7EB"}`,borderRadius:c.shape.borderRadius,padding:c.spacing(5,6),marginBottom:c.spacing(4),boxShadow:"none",width:"100%"},sectionTitle:{fontWeight:600,fontSize:16,marginBottom:c.spacing(2),color:c.palette.text.primary},gridContainer:{display:"grid",gridTemplateColumns:"220px 1fr",rowGap:"25px",columnGap:"250px",alignItems:"center",mt:2},labelTitle:{fontSize:13,fontWeight:500},labelDescription:{fontSize:12,color:"#888",mt:.5},valueField:{backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"4px",padding:"8px 14px",fontSize:13,color:"#344054",minHeight:"34px",display:"flex",alignItems:"center",width:400},multilineValue:{backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"4px",padding:"8px 14px",fontSize:13,color:"#344054",minHeight:"60px",width:400,whiteSpace:"pre-wrap",wordBreak:"break-word"}}},qe=({project:c})=>{var w;const n=Ve();if(!c)return e.jsx(s.Typography,{children:"No JIRA use case found"});const d=c._jira_data,h=(d==null?void 0:d.attributes)||{},k=(f,v,T,U=!1)=>e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{sx:n.labelTitle,children:f}),v&&e.jsx(s.Typography,{sx:n.labelDescription,children:v})]}),e.jsx(s.Box,{sx:U?n.multilineValue:n.valueField,children:Ge(T)})]}),J=["System Name / Identifier","Name","Description / Purpose","Description","Purpose"],p=["Business Owner / Responsible Team","Technical Owner / Maintainer","AI Officer","Model Owner / Maintainer","Risk Owner","Vendor / Developer Name (if third-party)"],_=["Lifecycle Status","Primary Function","Use Case / Business Process Supported","User Groups / Stakeholders","Decision Type","AI Function Type"],y=["Risk Level / Criticality","Potential Harms or Impacts","Known Limitations","Applicable Regulations"],b=["Input Data Sources & Types","Contains Personal / Sensitive Data","Deployment Environment","Platform / Tooling","Model Type / Algorithm & Version","Key Performance Metrics","Explainability Method","Human Oversight Mechanisms"],t=[...J,...p,..._,...y,...b],W=Object.keys(h).filter(f=>!t.includes(f)),u=f=>f.filter(v=>h[v]!==void 0).map(v=>{const T=h[v],U=String(T||"").length>80;return e.jsx(l.Fragment,{children:k(v,null,T,U)},v)});return e.jsx(s.Stack,{children:e.jsxs(s.Box,{sx:n.root,children:[e.jsxs(s.Box,{sx:{display:"flex",gap:2,alignItems:"center",mb:2},children:[e.jsx(s.Chip,{icon:e.jsx(fe,{size:14}),label:"JIRA Assets Object",size:"small",sx:{backgroundColor:"#E3F2FD",color:"#1565C0","& .MuiChip-icon":{color:"#1565C0"}}}),e.jsx(s.Typography,{sx:{fontSize:13,color:"#6B7280"},children:"This use case is imported from JIRA and is read-only"})]}),e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Use Case Overview"}),e.jsxs(s.Box,{sx:n.gridContainer,children:[k("Use case title","Imported from JIRA Assets",c.project_title),k("Use case ID","Generated identifier for this use case",c.uc_id),k("JIRA object key","Original key in JIRA Assets",d==null?void 0:d.objectKey),k("Sync status","Current synchronization state",c._sync_status||"synced")]})]}),e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"JIRA Details"}),e.jsxs(s.Box,{sx:n.gridContainer,children:[k("Object type","JIRA Assets object type",(w=d==null?void 0:d.objectType)==null?void 0:w.name),k("Created in JIRA","When this object was created",Te(d==null?void 0:d.created)),k("Last updated in JIRA","When this object was last modified",Te(d==null?void 0:d.updated)),k("JIRA Object ID","Internal JIRA identifier",d==null?void 0:d.id)]})]}),J.some(f=>h[f]!==void 0)&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Identification & Description"}),e.jsx(s.Box,{sx:n.gridContainer,children:u(J)})]}),p.some(f=>h[f]!==void 0)&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Ownership & Governance"}),e.jsx(s.Box,{sx:n.gridContainer,children:u(p)})]}),_.some(f=>h[f]!==void 0)&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Classification & Function"}),e.jsx(s.Box,{sx:n.gridContainer,children:u(_)})]}),y.some(f=>h[f]!==void 0)&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Risk & Compliance"}),e.jsx(s.Box,{sx:n.gridContainer,children:u(y)})]}),b.some(f=>h[f]!==void 0)&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Technical Details"}),e.jsx(s.Box,{sx:n.gridContainer,children:u(b)})]}),W.length>0&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Other Attributes"}),e.jsx(s.Box,{sx:n.gridContainer,children:u(W)})]}),Object.keys(h).length===0&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"JIRA Attributes"}),e.jsx(s.Typography,{sx:{color:"#6B7280",fontStyle:"italic"},children:"No attributes available for this object"})]})]})})},Ze=({project:c})=>{const n=c.framework||[];return n.length>0?e.jsxs(s.Box,{sx:{p:3},children:[e.jsx(s.Typography,{sx:{fontSize:16,fontWeight:600,color:"#374151",mb:2},children:"Frameworks"}),e.jsx(s.Stack,{spacing:1.5,children:n.map(d=>e.jsxs(s.Box,{sx:{display:"flex",alignItems:"center",gap:1.5,p:2,backgroundColor:"#F0FDF4",border:"1px solid #BBF7D0",borderRadius:1},children:[e.jsx(ge,{size:18,color:"#16A34A"}),e.jsx(s.Typography,{sx:{fontSize:14,color:"#166534"},children:d.name})]},d.project_framework_id))})]}):e.jsx(s.Box,{sx:{p:4},children:e.jsxs(s.Stack,{alignItems:"center",spacing:3,children:[e.jsx(s.Box,{sx:{width:80,height:80,borderRadius:"50%",backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ge,{size:40,color:"#9ca3af"})}),e.jsxs(s.Box,{sx:{textAlign:"center"},children:[e.jsx(s.Typography,{sx:{fontSize:18,fontWeight:600,color:"#374151",mb:1},children:"Frameworks"}),e.jsx(s.Typography,{sx:{fontSize:14,color:"#6b7280",maxWidth:450},children:'This use case was imported from JIRA Assets. Framework and regulation tracking is managed through your JIRA "Applicable Regulations" attribute.'})]}),e.jsxs(s.Box,{sx:{display:"flex",alignItems:"flex-start",gap:1.5,backgroundColor:"#EFF6FF",border:"1px solid #BFDBFE",borderRadius:2,p:2,maxWidth:450},children:[e.jsx(xe,{size:18,color:"#3B82F6",style:{flexShrink:0,marginTop:2}}),e.jsx(s.Typography,{sx:{fontSize:13,color:"#1E40AF"},children:'To assign frameworks to this AI system, update the "Applicable Regulations" field in JIRA Assets. Changes will sync automatically.'})]})]})})},Xe=({project:c})=>e.jsx(s.Box,{sx:{p:4},children:e.jsxs(s.Stack,{alignItems:"center",spacing:3,children:[e.jsx(s.Box,{sx:{width:80,height:80,borderRadius:"50%",backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Oe,{size:40,color:"#9ca3af"})}),e.jsxs(s.Box,{sx:{textAlign:"center"},children:[e.jsx(s.Typography,{sx:{fontSize:18,fontWeight:600,color:"#374151",mb:1},children:"Post-Market Monitoring"}),e.jsx(s.Typography,{sx:{fontSize:14,color:"#6b7280",maxWidth:450},children:"Post-market monitoring is managed through your JIRA workflow. This use case was imported from JIRA Assets and monitoring data should be tracked in your JIRA instance."})]}),e.jsxs(s.Box,{sx:{display:"flex",alignItems:"flex-start",gap:1.5,backgroundColor:"#EFF6FF",border:"1px solid #BFDBFE",borderRadius:2,p:2,maxWidth:450},children:[e.jsx(xe,{size:18,color:"#3B82F6",style:{flexShrink:0,marginTop:2}}),e.jsx(s.Typography,{sx:{fontSize:13,color:"#1E40AF"},children:"To configure post-market monitoring for this AI system, update the monitoring attributes in JIRA Assets. Changes will sync automatically."})]})]})});return H.JiraAssetsConfiguration=Ue,H.JiraAssetsUseCasesTab=Pe,H.JiraUseCaseFrameworks=Ze,H.JiraUseCaseMonitoring=Xe,H.JiraUseCaseOverview=Ke,H.JiraUseCaseSettings=qe,Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),H}({},jsxRuntime,React,MUI);
//# sourceMappingURL=index.esm.js.map
