var PluginJiraAssets=function(H,e,l,s){"use strict";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),w=(c,n)=>{const d=l.forwardRef(({color:p="currentColor",size:x=24,strokeWidth:u=2,absoluteStrokeWidth:y,className:v="",children:f,...k},t)=>l.createElement("svg",{ref:t,..._e,width:x,height:x,stroke:p,strokeWidth:y?Number(u)*24/Number(x):u,className:["lucide",`lucide-${ue(c)}`,v].join(" "),...k},[...n.map(([O,h])=>l.createElement(O,h)),...Array.isArray(f)?f:[f]]));return d.displayName=`${c}`,d};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=w("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=w("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=w("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=w("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=w("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=w("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=w("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=w("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=w("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=w("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=w("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=w("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=w("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=w("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=w("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=w("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=w("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=w("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=w("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=w("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=w("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=w("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ne=({configData:c={},onConfigChange:n,onSaveConfiguration:d,onTestConnection:p,isSavingConfig:x=!1,isTestingConnection:u=!1,apiServices:y,pluginApiCall:v})=>{const f=l.useCallback(async(o,i,S)=>{var le;if(v)return v(o,i,S);if(!y)throw new Error("No API service available");const T=`/plugins/jira-assets${i.startsWith("/")?i:`/${i}`}`;let E;switch(o.toUpperCase()){case"GET":E=await y.get(T);break;case"POST":E=await y.post(T,S);break;case"PUT":E=await y.put(T,S);break;case"PATCH":E=await y.patch(T,S);break;case"DELETE":E=await y.delete(T);break;default:throw new Error(`Unsupported method: ${o}`)}return((le=E.data)==null?void 0:le.data)??E.data},[y,v]),k=!!(y||v),[t,O]=l.useState({deployment_type:"cloud",sync_enabled:!1,sync_interval_hours:24,...c}),[h,g]=l.useState(!1),[b,z]=l.useState([]),[_,U]=l.useState([]),[I,V]=l.useState(!1),[oe,X]=l.useState(!1),[L,G]=l.useState("idle"),[B,q]=l.useState(""),[re,Z]=l.useState(!1),[P,N]=l.useState(null),[W,he]=l.useState([]),[M,Y]=l.useState(new Set),[Q,te]=l.useState(!1),[m,ne]=l.useState(!1),[R,j]=l.useState(null),[$,r]=l.useState([]),[a,C]=l.useState(!1),[F,A]=l.useState(!1),[J,ee]=l.useState(null);l.useEffect(()=>{if(h||!y)return;(async()=>{var i;try{const T=await y.get("/plugins/jira-assets/config"),E=((i=T.data)==null?void 0:i.data)??T.data;E&&O(le=>({...le,...E}))}catch(S){console.error("Failed to load JIRA config:",S)}finally{g(!0)}})()},[y,h]);const D=l.useCallback((o,i)=>{O(S=>({...S,[o]:i})),n&&n(o,i)},[n]),Te=l.useCallback(async()=>{if(!(!k||!t.jira_base_url||!t.workspace_id)){V(!0);try{const o=await f("GET","/schemas");o&&Array.isArray(o)&&z(o)}catch(o){console.error("Failed to load schemas:",o)}finally{V(!1)}}},[k,f,t.jira_base_url,t.workspace_id]),ye=l.useCallback(async o=>{if(!(!k||!o)){X(!0);try{const i=await f("GET",`/schemas/${o}/object-types`);console.log("[JiraConfig] loadObjectTypes response:",i,"isArray:",Array.isArray(i)),i&&Array.isArray(i)?U(i):console.warn("[JiraConfig] Object types response is not an array:",typeof i)}catch(i){console.error("Failed to load object types:",i)}finally{X(!1)}}},[k,f]),ve=l.useCallback(async()=>{if(!(!k||!t.selected_object_type_id)){te(!0),j(null);try{const o=await f("GET",`/object-types/${t.selected_object_type_id}/objects`);if(o&&Array.isArray(o)){const i=new Set($.map(T=>T.jira_object_id)),S=o.filter(T=>!i.has(T.id));he(S)}}catch(o){j({type:"error",text:o.message||"Failed to load JIRA objects"})}finally{te(!1)}}},[k,f,t.selected_object_type_id,$]),ce=l.useCallback(async()=>{if(k){C(!0);try{const o=await f("GET","/use-cases");o&&Array.isArray(o)&&r(o)}catch(o){console.error("Failed to load imported use cases:",o)}finally{C(!1)}}},[k,f]),me=async()=>{if(!(!k||M.size===0)){ne(!0),j(null);try{const o=await f("POST","/import",{object_ids:Array.from(M)});o!=null&&o.success?(j({type:"success",text:`Successfully imported ${o.imported} objects`}),Y(new Set),await ce(),await ve()):j({type:"error",text:(o==null?void 0:o.error)||"Import failed"})}catch(o){j({type:"error",text:o.message||"Import failed"})}finally{ne(!1)}}},Re=async()=>{if(k){A(!0),ee(null);try{const o=await f("POST","/sync");o!=null&&o.success?(ee({type:"success",text:`Sync completed: ${o.objectsCreated||0} created, ${o.objectsUpdated||0} updated, ${o.objectsDeleted||0} deleted`}),await ce()):ee({type:"error",text:(o==null?void 0:o.error)||"Sync failed"})}catch(o){ee({type:"error",text:o.message||"Sync failed"})}finally{A(!1)}}},es=o=>{Y(i=>{const S=new Set(i);return S.has(o)?S.delete(o):S.add(o),S})},ss=()=>{M.size===W.length?Y(new Set):Y(new Set(W.map(o=>o.id)))},os=async()=>{if(!k){p&&p();return}G("testing"),q("");try{const o=await f("POST","/test-connection",{configuration:{jira_base_url:t.jira_base_url,workspace_id:t.workspace_id,email:t.email,api_token:t.api_token,deployment_type:t.deployment_type||"cloud"}});o!=null&&o.success?(G("success"),q(o.message||"Connection successful. Click 'Save Configuration' to proceed to Step 2.")):(G("error"),q((o==null?void 0:o.message)||"Connection failed"))}catch(o){G("error"),q(o.message||"Connection test failed")}},rs=async()=>{var o,i;if(y){Z(!0),N(null);try{const S=await y.post("/plugins/jira-assets/config",{jira_base_url:t.jira_base_url,workspace_id:t.workspace_id,email:t.email,api_token:t.api_token||void 0,deployment_type:t.deployment_type||"cloud",selected_schema_id:t.selected_schema_id||void 0,selected_object_type_id:t.selected_object_type_id||void 0,sync_enabled:t.sync_enabled||!1,sync_interval_hours:t.sync_interval_hours||24}),T=((o=S.data)==null?void 0:o.data)??S.data;T!=null&&T.success?(N({type:"success",text:"Configuration saved successfully!"}),O(E=>({...E,has_api_token:!0})),g(!1)):N({type:"error",text:((i=T==null?void 0:T.errors)==null?void 0:i.join(", "))||(T==null?void 0:T.message)||"Failed to save configuration"})}catch(S){N({type:"error",text:S.message||"Failed to save configuration"})}finally{Z(!1)}}},ts=o=>{D("selected_schema_id",o),D("selected_object_type_id",""),U([]),o&&ye(o)};l.useEffect(()=>{console.log("[JiraConfig] Schema load check:",{has_api_token:t.has_api_token,jira_base_url:t.jira_base_url,workspace_id:t.workspace_id,schemas_length:b.length}),t.has_api_token&&t.jira_base_url&&t.workspace_id&&b.length===0&&(console.log("[JiraConfig] Calling loadSchemas()"),Te())},[t.has_api_token,t.jira_base_url,t.workspace_id,Te,b.length]),l.useEffect(()=>{t.has_api_token&&t.selected_schema_id&&_.length===0&&ye(t.selected_schema_id)},[t.has_api_token,t.selected_schema_id,ye,_.length]),l.useEffect(()=>{k&&h&&ce()},[k,h,ce]);const ns=[{value:1,label:"Every hour"},{value:6,label:"Every 6 hours"},{value:12,label:"Every 12 hours"},{value:24,label:"Every 24 hours"},{value:48,label:"Every 48 hours"}];return e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",fontSize:13,sx:{mb:3},children:"Connect to your Jira Service Management Assets to import AI Systems as use-cases."}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 1: Connection Settings"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Deployment Type *"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:t.deployment_type||"cloud",onChange:o=>D("deployment_type",o.target.value),sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"cloud",sx:{fontSize:"13px"},children:"JIRA Cloud (Atlassian-hosted)"}),e.jsx(s.MenuItem,{value:"datacenter",sx:{fontSize:"13px"},children:"JIRA Data Center / Server (Self-hosted)"})]})}),e.jsx(s.Typography,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:"Select Cloud for *.atlassian.net, or Data Center for self-hosted JIRA"})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"JIRA Base URL *"}),e.jsx(s.TextField,{fullWidth:!0,placeholder:t.deployment_type==="datacenter"?"https://jira.your-company.com":"https://your-company.atlassian.net",value:t.jira_base_url||"",onChange:o=>D("jira_base_url",o.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[t.deployment_type==="datacenter"?"Insight Object Schema ID":"Workspace ID"," *"]}),e.jsx(s.TextField,{fullWidth:!0,placeholder:t.deployment_type==="datacenter"?"Enter object schema ID (e.g., 1)":"Enter your JSM Assets workspace ID",value:t.workspace_id||"",onChange:o=>D("workspace_id",o.target.value),size:"small",helperText:t.deployment_type==="datacenter"?"For Data Center: Use object schema ID from Insight settings":"Found in Assets settings or the URL when viewing Assets",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[t.deployment_type==="datacenter"?"Username":"Email"," *"]}),e.jsx(s.TextField,{fullWidth:!0,type:t.deployment_type==="datacenter"?"text":"email",placeholder:t.deployment_type==="datacenter"?"your-username":"your-email@company.com",value:t.email||"",onChange:o=>D("email",o.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[t.deployment_type==="datacenter"?"Password / Token":"API Token"," ",!t.has_api_token&&"*"]}),e.jsx(s.TextField,{fullWidth:!0,type:"password",placeholder:t.has_api_token&&!t.api_token?"••••••••••••••••  (saved - enter new value to change)":t.deployment_type==="datacenter"?"Enter your password or personal access token":"Enter your Atlassian API token",value:t.api_token||"",onChange:o=>D("api_token",o.target.value),size:"small",helperText:t.has_api_token&&!t.api_token?"API token is saved. Leave empty to keep current token, or enter a new value to update.":t.deployment_type==="datacenter"?"Use your JIRA password or personal access token":"Generate at id.atlassian.com/manage-profile/security/api-tokens",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]})]}),L!=="idle"&&e.jsx(s.Box,{sx:{mt:2},children:e.jsx(s.Alert,{severity:L==="success"?"success":L==="error"?"error":"info",sx:{fontSize:"13px"},children:L==="testing"?"Testing connection...":B})}),e.jsx(s.Box,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:e.jsx(s.Button,{variant:"outlined",onClick:os,disabled:u||L==="testing"||!t.jira_base_url||!t.workspace_id||!t.email||!t.api_token&&!t.has_api_token,sx:{borderColor:"#13715B",color:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{borderColor:"#0f5a47",backgroundColor:"rgba(19, 113, 91, 0.04)"},"&:disabled":{borderColor:"#d0d5dd",color:"#98a2b3"}},children:u||L==="testing"?e.jsxs(e.Fragment,{children:[e.jsx(s.CircularProgress,{size:16,sx:{mr:1}}),"Testing..."]}):"Test Connection"})}),e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 2: Select Schema & Object Type"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Schema"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:t.selected_schema_id||"",onChange:o=>ts(o.target.value),disabled:I||b.length===0,displayEmpty:!0,sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"",sx:{fontSize:"13px"},children:I?"Loading schemas...":"Select a schema"}),b.map(o=>e.jsxs(s.MenuItem,{value:o.id,sx:{fontSize:"13px"},children:[o.name," (",o.objectSchemaKey,")"]},o.id))]})})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Object Type (AI Systems)"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:t.selected_object_type_id||"",onChange:o=>D("selected_object_type_id",o.target.value),disabled:oe||_.length===0||!t.selected_schema_id,displayEmpty:!0,sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"",sx:{fontSize:"13px"},children:oe?"Loading object types...":"Select an object type"}),_.map(o=>e.jsxs(s.MenuItem,{value:o.id,sx:{fontSize:"13px"},children:[o.name,o.objectCount!==void 0&&e.jsx(s.Chip,{label:`${o.objectCount} objects`,size:"small",sx:{ml:1,fontSize:"11px"}})]},o.id))]})})]})]}),e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 3: Sync Settings"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsx(s.Box,{children:e.jsx(s.FormControlLabel,{control:e.jsx(s.Switch,{checked:t.sync_enabled||!1,onChange:o=>D("sync_enabled",o.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#13715B"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#13715B"}}}),label:e.jsx(s.Typography,{variant:"body2",fontSize:13,sx:{color:"#344054"},children:"Enable automatic sync"})})}),t.sync_enabled&&e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Sync Interval"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsx(s.Select,{value:t.sync_interval_hours||24,onChange:o=>D("sync_interval_hours",o.target.value),sx:{fontSize:"13px",backgroundColor:"white"},children:ns.map(o=>e.jsx(s.MenuItem,{value:o.value,sx:{fontSize:"13px"},children:o.label},o.value))})})]})]}),t.last_sync_at&&e.jsx(s.Box,{sx:{mt:2},children:e.jsxs(s.Alert,{severity:t.last_sync_status==="success"?"success":"warning",sx:{fontSize:"13px"},children:["Last sync: ",new Date(t.last_sync_at).toLocaleString()," -"," ",t.last_sync_status==="success"?"Successful":t.last_sync_message]})}),P&&e.jsx(s.Box,{sx:{mt:2},children:e.jsx(s.Alert,{severity:P.type,sx:{fontSize:"13px"},onClose:()=>N(null),children:P.text})}),e.jsx(s.Box,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:e.jsx(s.Button,{variant:"contained",onClick:rs,disabled:re||!t.jira_base_url||!t.workspace_id||!t.email||!t.api_token&&!t.has_api_token,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{backgroundColor:"#0f5a47"},"&:disabled":{backgroundColor:"#d0d5dd"}},children:re?e.jsxs(e.Fragment,{children:[e.jsx(s.CircularProgress,{size:16,sx:{mr:1,color:"white"}}),"Saving..."]}):"Save Configuration"})}),t.has_api_token&&t.selected_object_type_id&&e.jsxs(e.Fragment,{children:[e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 4: Import JIRA Objects"}),e.jsx(s.Box,{sx:{display:"flex",gap:2,mb:2},children:e.jsx(s.Button,{variant:"outlined",startIcon:Q?e.jsx(s.CircularProgress,{size:16}):e.jsx(de,{size:16}),onClick:ve,disabled:Q||$.length>0,sx:{borderColor:"#13715B",color:"#13715B",textTransform:"none",fontSize:"13px","&:hover":{borderColor:"#0f5a47",backgroundColor:"rgba(19, 113, 91, 0.04)"},"&:disabled":{borderColor:"#d0d5dd",color:"#98a2b3"}},children:Q?"Loading...":"Fetch Objects from JIRA"})}),R&&e.jsx(s.Alert,{severity:R.type,sx:{mb:2,fontSize:"13px"},onClose:()=>j(null),children:R.text}),W.length>0&&e.jsxs(s.Box,{sx:{mb:3},children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(s.FormControlLabel,{control:e.jsx(s.Checkbox,{checked:M.size===W.length&&W.length>0,indeterminate:M.size>0&&M.size<W.length,onChange:ss,size:"small"}),label:e.jsxs(s.Typography,{variant:"body2",fontSize:13,children:["Select All (",W.length," available)"]})}),e.jsx(s.Button,{variant:"contained",onClick:me,disabled:m||M.size===0,startIcon:m?e.jsx(s.CircularProgress,{size:16}):e.jsx(de,{size:16}),sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px","&:hover":{backgroundColor:"#0f5a47"}},children:m?"Importing...":`Import ${M.size} Selected`})]}),e.jsx(s.TableContainer,{component:s.Paper,sx:{maxHeight:300,boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{sx:{backgroundColor:"#f9fafb"},children:[e.jsx(s.TableCell,{padding:"checkbox"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"})]})}),e.jsx(s.TableBody,{children:W.map(o=>e.jsxs(s.TableRow,{hover:!0,selected:M.has(o.id),onClick:()=>es(o.id),sx:{cursor:"pointer"},children:[e.jsx(s.TableCell,{padding:"checkbox",children:e.jsx(s.Checkbox,{checked:M.has(o.id),size:"small"})}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:o.key}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:o.name})]},o.id))})]})})]}),W.length===0&&!Q&&e.jsx(s.Alert,{severity:"info",sx:{mb:3,fontSize:"13px"},children:'Click "Fetch Objects from JIRA" to load available objects for import.'}),e.jsx(s.Divider,{sx:{my:3}}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{color:"#344054"},children:["Imported Use Cases (",$.length,")"]}),e.jsx(s.Button,{variant:"contained",startIcon:F?e.jsx(s.CircularProgress,{size:14,sx:{color:"white"}}):e.jsx(ae,{size:14}),onClick:Re,disabled:F||a,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"12px","&:hover":{backgroundColor:"#0f5a47"},"&:disabled":{backgroundColor:"#d0d5dd"}},children:F?"Syncing...":"Sync Now"})]}),J&&e.jsx(s.Alert,{severity:J.type,sx:{mb:2,fontSize:"13px"},onClose:()=>ee(null),children:J.text}),a?e.jsx(s.Box,{sx:{display:"flex",justifyContent:"center",py:2},children:e.jsx(s.CircularProgress,{size:24})}):$.length===0?e.jsx(s.Alert,{severity:"info",sx:{fontSize:"13px"},children:"No objects imported yet. Fetch objects from JIRA and import them above."}):e.jsx(s.TableContainer,{component:s.Paper,sx:{maxHeight:400,boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",backgroundColor:"#f9fafb",py:1},children:"UC-ID"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",backgroundColor:"#f9fafb",py:1},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",backgroundColor:"#f9fafb",py:1},children:"JIRA Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",backgroundColor:"#f9fafb",py:1},children:"Status"})]})}),e.jsx(s.TableBody,{children:$.map(o=>{const i=typeof o.data=="string"?JSON.parse(o.data):o.data,S=(i==null?void 0:i.objectKey)||"-";return e.jsxs(s.TableRow,{hover:!0,children:[e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace",py:1},children:o.uc_id}),e.jsx(s.TableCell,{sx:{fontSize:"13px",py:1,cursor:"pointer",color:"#13715B","&:hover":{textDecoration:"underline"}},onClick:()=>window.location.href=`/project-view?projectId=jira-assets-${o.project_id}`,children:o.name||(i==null?void 0:i.label)||"-"}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace",py:1},children:S}),e.jsx(s.TableCell,{sx:{py:1},children:e.jsx(s.Chip,{label:o.sync_status,size:"small",color:o.sync_status==="synced"?"success":o.sync_status==="updated"?"info":"default",sx:{fontSize:"11px"}})})]},o.id)})})]})})]})]})},$e=({apiServices:c,pluginApiCall:n})=>{const d=l.useCallback(async(r,a,C)=>{var J;if(n)return n(r,a,C);if(!c)throw new Error("No API service available");const F=`/plugins/jira-assets${a.startsWith("/")?a:`/${a}`}`;let A;switch(r.toUpperCase()){case"GET":A=await c.get(F);break;case"POST":A=await c.post(F,C);break;case"PUT":A=await c.put(F,C);break;case"PATCH":A=await c.patch(F,C);break;case"DELETE":A=await c.delete(F);break;default:throw new Error(`Unsupported method: ${r}`)}return((J=A.data)==null?void 0:J.data)??A.data},[c,n]),p=!!(c||n),[x,u]=l.useState([]),[y,v]=l.useState(!0),[f,k]=l.useState(!1),[t,O]=l.useState(null),[h,g]=l.useState(null),[b,z]=l.useState(!1),[_,U]=l.useState([]),[I,V]=l.useState(new Set),[oe,X]=l.useState(!1),[L,G]=l.useState(!1),[B,q]=l.useState(null),[re,Z]=l.useState(!1),P=l.useCallback(async()=>{if(p){v(!0),g(null);try{const r=await d("GET","/use-cases");Array.isArray(r)&&u(r)}catch(r){g(r.message||"Failed to load use cases")}finally{v(!1)}}},[p,d]),N=l.useCallback(async()=>{if(p)try{const r=await d("GET","/sync/status");O(r)}catch(r){console.error("Failed to load sync status:",r)}},[p,d]);l.useEffect(()=>{P(),N()},[P,N]);const W=async()=>{if(p){k(!0),g(null);try{const r=await d("POST","/sync");r!=null&&r.success?(await P(),await N()):g((r==null?void 0:r.status)||"Sync failed")}catch(r){g(r.message||"Sync failed")}finally{k(!1)}}},he=async()=>{if(p){z(!0),X(!0),V(new Set),U([]);try{const r=await d("GET","/config"),a=r==null?void 0:r.selected_object_type_id;if(!a){g("No object type configured. Please configure the plugin first."),X(!1);return}const C=await d("GET",`/object-types/${a}/objects`);if(Array.isArray(C)){const F=new Set(x.map(J=>J.jira_object_id)),A=C.filter(J=>!F.has(J.id));U(A)}}catch(r){g(r.message||"Failed to load JIRA objects")}finally{X(!1)}}},M=r=>{V(a=>{const C=new Set(a);return C.has(r)?C.delete(r):C.add(r),C})},Y=()=>{I.size===_.length?V(new Set):V(new Set(_.map(r=>r.id)))},Q=async()=>{if(!(!d||I.size===0)){G(!0),g(null);try{const r=await d("POST","/import",{object_ids:Array.from(I)});r!=null&&r.success?(z(!1),await P()):g((r==null?void 0:r.error)||"Import failed")}catch(r){g(r.message||"Import failed")}finally{G(!1)}}},te=r=>{q(r),Z(!0)},m=r=>{window.location.href=`/project-view?projectId=jira-assets-${r.project_id}`},ne=r=>{var C;const a=typeof r.data=="string"?JSON.parse(r.data):r.data;return(a==null?void 0:a.label)||((C=a==null?void 0:a.attributes)==null?void 0:C.Name)||r.uc_id},R=async r=>{if(p&&window.confirm(`Are you sure you want to delete "${ne(r)}"?`))try{await d("DELETE",`/use-cases/${r.id}`),await P(),(B==null?void 0:B.id)===r.id&&(Z(!1),q(null))}catch(a){g(a.message||"Failed to delete use case")}},j=r=>r?new Date(r).toLocaleString():"N/A",$=r=>{switch(r){case"synced":return e.jsx(s.Chip,{label:"Synced",size:"small",color:"success",sx:{fontSize:"11px"}});case"updated":return e.jsx(s.Chip,{label:"Updated",size:"small",color:"info",sx:{fontSize:"11px"}});case"deleted_in_jira":return e.jsx(s.Chip,{label:"Deleted in JIRA",size:"small",color:"error",sx:{fontSize:"11px"}});default:return e.jsx(s.Chip,{label:r,size:"small",sx:{fontSize:"11px"}})}};return e.jsxs(s.Box,{sx:{p:3},children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"h6",fontWeight:600,children:"JIRA AI Systems"}),e.jsx(s.Typography,{variant:"body2",color:"text.secondary",fontSize:13,children:"AI Systems imported from Jira Service Management Assets"})]}),e.jsxs(s.Box,{sx:{display:"flex",gap:2},children:[e.jsx(s.Button,{variant:"outlined",startIcon:f?e.jsx(s.CircularProgress,{size:16}):e.jsx(ae,{size:16}),onClick:W,disabled:f,sx:{borderColor:"#d0d5dd",color:"#344054",textTransform:"none",fontSize:"13px"},children:f?"Syncing...":"Sync Now"}),e.jsx(s.Button,{variant:"contained",startIcon:e.jsx(de,{size:16}),onClick:he,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px","&:hover":{backgroundColor:"#0f5a47"}},children:"Import from JIRA"})]})]}),t&&e.jsx(s.Alert,{severity:t.last_sync_status==="success"?"success":t.last_sync_status==="failed"?"warning":"info",sx:{mb:2,fontSize:"13px"},icon:e.jsx(pe,{size:18}),children:e.jsxs(s.Box,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs("span",{children:["Last sync: ",t.last_sync_at?j(t.last_sync_at):"Never"]}),t.sync_enabled&&e.jsx(s.Chip,{label:`Auto-sync: Every ${t.sync_interval_hours}h`,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"11px"}})]})}),h&&e.jsx(s.Alert,{severity:"error",sx:{mb:2,fontSize:"13px"},onClose:()=>g(null),children:h}),y?e.jsx(s.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(s.CircularProgress,{})}):x.length===0?e.jsxs(s.Paper,{sx:{p:4,textAlign:"center"},children:[e.jsx(Ae,{size:48,color:"#98a2b3"}),e.jsx(s.Typography,{variant:"h6",sx:{mt:2,color:"#344054"},children:"No JIRA AI Systems Imported"}),e.jsx(s.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:'Click "Import from JIRA" to start importing AI Systems from your JSM Assets.'})]}):e.jsx(s.TableContainer,{component:s.Paper,sx:{boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{sx:{backgroundColor:"#f9fafb"},children:[e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"UC-ID"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"JIRA Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Sync Status"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Last Synced"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},align:"right",children:"Actions"})]})}),e.jsx(s.TableBody,{children:x.map(r=>{var C;const a=typeof r.data=="string"?JSON.parse(r.data):r.data;return e.jsxs(s.TableRow,{hover:!0,children:[e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:r.uc_id}),e.jsx(s.TableCell,{sx:{fontSize:"13px",cursor:"pointer",color:"#13715B","&:hover":{textDecoration:"underline"}},onClick:()=>m(r),children:(a==null?void 0:a.label)||((C=a==null?void 0:a.attributes)==null?void 0:C.Name)||"-"}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:(a==null?void 0:a.objectKey)||"-"}),e.jsx(s.TableCell,{children:$(r.sync_status)}),e.jsx(s.TableCell,{sx:{fontSize:"12px",color:"#667085"},children:j(r.last_synced_at)}),e.jsxs(s.TableCell,{align:"right",children:[e.jsx(s.Tooltip,{title:"Open Use Case",children:e.jsx(s.IconButton,{size:"small",onClick:()=>m(r),color:"primary",children:e.jsx(Me,{size:16})})}),e.jsx(s.Tooltip,{title:"View JIRA Data",children:e.jsx(s.IconButton,{size:"small",onClick:()=>te(r),children:e.jsx(Ee,{size:16})})}),e.jsx(s.Tooltip,{title:"Delete",children:e.jsx(s.IconButton,{size:"small",onClick:()=>R(r),color:"error",children:e.jsx(ge,{size:16})})})]})]},r.id)})})]})}),e.jsxs(s.Dialog,{open:b,onClose:()=>z(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(s.DialogTitle,{children:e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s.Typography,{variant:"h6",children:"Import AI Systems from JIRA"}),e.jsx(s.IconButton,{onClick:()=>z(!1),children:e.jsx(be,{size:20})})]})}),e.jsx(s.DialogContent,{dividers:!0,children:oe?e.jsxs(s.Box,{sx:{py:4,textAlign:"center"},children:[e.jsx(s.CircularProgress,{}),e.jsx(s.Typography,{sx:{mt:2},children:"Loading objects from JIRA..."})]}):_.length===0?e.jsx(s.Alert,{severity:"info",children:"No new objects to import. All JIRA objects have already been imported."}):e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s.FormControlLabel,{control:e.jsx(s.Checkbox,{checked:I.size===_.length&&_.length>0,indeterminate:I.size>0&&I.size<_.length,onChange:Y,size:"small"}),label:e.jsxs(s.Typography,{variant:"body2",fontSize:13,children:["Select All (",_.length," objects)"]})}),e.jsxs(s.Typography,{variant:"body2",color:"text.secondary",children:[I.size," selected"]})]}),e.jsx(s.TableContainer,{sx:{maxHeight:400},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{padding:"checkbox"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Updated"})]})}),e.jsx(s.TableBody,{children:_.map(r=>e.jsxs(s.TableRow,{hover:!0,selected:I.has(r.id),onClick:()=>M(r.id),sx:{cursor:"pointer"},children:[e.jsx(s.TableCell,{padding:"checkbox",children:e.jsx(s.Checkbox,{checked:I.has(r.id),size:"small"})}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:r.key}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:r.name}),e.jsx(s.TableCell,{sx:{fontSize:"12px",color:"#667085"},children:j(r.updated)})]},r.id))})]})})]})}),e.jsxs(s.DialogActions,{sx:{p:2},children:[e.jsx(s.Button,{onClick:()=>z(!1),sx:{textTransform:"none"},children:"Cancel"}),e.jsx(s.Button,{variant:"contained",onClick:Q,disabled:L||I.size===0,startIcon:L?e.jsx(s.CircularProgress,{size:16}):e.jsx(Je,{size:16}),sx:{backgroundColor:"#13715B",textTransform:"none","&:hover":{backgroundColor:"#0f5a47"}},children:L?"Importing...":`Import ${I.size} Objects`})]})]}),e.jsx(s.Drawer,{anchor:"right",open:re,onClose:()=>Z(!1),children:e.jsx(s.Box,{sx:{width:480,p:3},children:B&&(()=>{var F;const r=typeof B.data=="string"?JSON.parse(B.data):B.data,a=(r==null?void 0:r.label)||((F=r==null?void 0:r.attributes)==null?void 0:F.Name)||B.uc_id,C=(r==null?void 0:r.objectKey)||"-";return e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"h6",children:a}),e.jsxs(s.Typography,{variant:"body2",color:"text.secondary",sx:{fontFamily:"monospace"},children:[B.uc_id," | ",C]})]}),e.jsx(s.IconButton,{onClick:()=>Z(!1),children:e.jsx(be,{size:20})})]}),e.jsxs(s.Stack,{spacing:2,children:[e.jsx(s.Box,{sx:{display:"flex",gap:1},children:$(B.sync_status)}),e.jsx(s.Divider,{}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"Sync Information"}),e.jsxs(s.Stack,{spacing:1,children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"Last Synced"}),e.jsx(s.Typography,{variant:"body2",children:j(B.last_synced_at)})]}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"JIRA Created"}),e.jsx(s.Typography,{variant:"body2",children:j(r==null?void 0:r.created)})]}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"JIRA Updated"}),e.jsx(s.Typography,{variant:"body2",children:j(r==null?void 0:r.updated)})]})]})]}),e.jsx(s.Divider,{}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"JIRA Attributes"}),e.jsx(s.Stack,{spacing:1,children:Object.entries((r==null?void 0:r.attributes)||{}).map(([A,J])=>e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:A}),e.jsx(s.Typography,{variant:"body2",sx:{wordBreak:"break-word"},children:Array.isArray(J)?J.join(", "):String(J??"N/A")})]},A))})]}),e.jsx(s.Divider,{}),e.jsx(s.Box,{sx:{display:"flex",gap:2},children:e.jsx(s.Button,{variant:"outlined",color:"error",fullWidth:!0,onClick:()=>R(B),startIcon:e.jsx(ge,{size:16}),sx:{textTransform:"none"},children:"Delete"})})]})]})})()})})]})},ke=c=>{if(!c)return"-";try{return new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return c}},ie={border:"1px solid #d0d5dd",borderRadius:2,background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",minWidth:228,width:"100%",padding:"8px 36px 14px 14px",position:"relative"},Ce={fontSize:13,color:"#8594AC",pb:"2px",textWrap:"wrap"},He={fontSize:16,fontWeight:600,color:"#2D3748"},Ke={fontSize:13,color:"#2D3748",textAlign:"justify"},se={display:"flex",flexDirection:"row",gap:10,mb:10},Se={color:"#1A1919",fontWeight:600,mb:"10px",fontSize:16};function K({title:c,body:n,icon:d}){return e.jsxs(s.Stack,{sx:ie,children:[d&&e.jsx(s.Box,{sx:{position:"absolute",top:8,right:8,color:"#8594AC",opacity:.7},children:d}),e.jsx(s.Typography,{sx:Ce,children:c}),e.jsx(s.Typography,{sx:He,children:n})]})}function Ve({title:c,body:n,icon:d}){return e.jsxs(s.Stack,{sx:ie,children:[d&&e.jsx(s.Box,{sx:{position:"absolute",top:8,right:8,color:"#8594AC",opacity:.7},children:d}),e.jsx(s.Typography,{sx:Ce,children:c}),e.jsx(s.Typography,{sx:Ke,children:n})]})}const Ge=({project:c})=>{var v;if(!c)return e.jsx(s.Typography,{children:"No JIRA use case found"});const n=c._jira_data,d=(n==null?void 0:n.attributes)||{},p=d["Description / Purpose"]||d.Description||d.Purpose||"No description available",x=d["Risk Level / Criticality"]||"-",u=d["Lifecycle Status"]||"-",y=d["Primary Function"]||"-";return e.jsx(s.Stack,{sx:{width:"100%"},children:e.jsxs(s.Stack,{className:"vw-project-overview",sx:{width:"100%"},children:[e.jsx(s.Box,{sx:{mb:10},children:e.jsx(s.Chip,{icon:e.jsx(fe,{size:14}),label:"Imported from JIRA Assets",size:"small",sx:{backgroundColor:"#E3F2FD",color:"#1565C0","& .MuiChip-icon":{color:"#1565C0"}}})}),e.jsxs(s.Stack,{className:"vw-project-overview-row",sx:se,children:[e.jsx(K,{title:"JIRA Object Key",body:(n==null?void 0:n.objectKey)||"-",icon:e.jsx(De,{size:16})}),e.jsx(K,{title:"Object Type",body:((v=n==null?void 0:n.objectType)==null?void 0:v.name)||"-",icon:e.jsx(Be,{size:16})}),e.jsx(K,{title:"Sync Status",body:(c._sync_status||"Synced").charAt(0).toUpperCase()+(c._sync_status||"synced").slice(1),icon:e.jsx(ae,{size:16})})]}),e.jsxs(s.Stack,{className:"vw-project-overview-row",sx:se,children:[e.jsx(K,{title:"Created in JIRA",body:ke(n==null?void 0:n.created),icon:e.jsx(je,{size:16})}),e.jsx(K,{title:"Last Updated in JIRA",body:ke(n==null?void 0:n.updated),icon:e.jsx(pe,{size:16})})]}),e.jsxs(s.Stack,{sx:{mb:10},children:[e.jsx(s.Typography,{sx:Se,children:"Key Attributes"}),e.jsxs(s.Stack,{className:"vw-project-overview-row",sx:se,children:[e.jsx(K,{title:"Risk Level / Criticality",body:x,icon:e.jsx(Ie,{size:16})}),e.jsx(K,{title:"Lifecycle Status",body:u,icon:e.jsx(ze,{size:16})}),e.jsx(K,{title:"Primary Function",body:y,icon:e.jsx(Pe,{size:16})})]})]}),e.jsx(s.Stack,{className:"vw-project-overview-row",sx:se,children:e.jsx(Ve,{title:"Description / Purpose",body:p,icon:e.jsx(Ue,{size:16})})}),e.jsx(s.Divider,{}),e.jsxs(s.Stack,{sx:{gap:10,mt:10},children:[e.jsx(s.Typography,{sx:Se,children:"Framework & Risk Status"}),e.jsx(s.Box,{sx:{...ie,minHeight:80,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(s.Typography,{sx:{fontSize:13,color:"#8594AC",textAlign:"center"},children:["JIRA-imported use cases don't have native framework or risk tracking.",e.jsx("br",{}),"Use the Settings tab to view all JIRA attributes."]})})]})]})})},we=c=>{if(!c)return"-";try{return new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return c}},qe=c=>c==null?"-":typeof c=="boolean"?c?"Yes":"No":Array.isArray(c)?c.join(", ")||"-":typeof c=="object"?JSON.stringify(c):String(c)||"-",Ze=()=>{var n;const c=s.useTheme();return{root:{display:"flex",flexDirection:"column",gap:c.spacing(4),fontSize:13,width:"100%",margin:"0 auto"},card:{background:c.palette.background.paper,border:`1.5px solid ${((n=c.palette.border)==null?void 0:n.light)||"#E5E7EB"}`,borderRadius:c.shape.borderRadius,padding:c.spacing(5,6),marginBottom:c.spacing(4),boxShadow:"none",width:"100%"},sectionTitle:{fontWeight:600,fontSize:16,marginBottom:c.spacing(2),color:c.palette.text.primary},gridContainer:{display:"grid",gridTemplateColumns:"220px 1fr",rowGap:"25px",columnGap:"250px",alignItems:"center",mt:2},labelTitle:{fontSize:13,fontWeight:500},labelDescription:{fontSize:12,color:"#888",mt:.5},valueField:{backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"4px",padding:"8px 14px",fontSize:13,color:"#344054",minHeight:"34px",display:"flex",alignItems:"center",width:400},multilineValue:{backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"4px",padding:"8px 14px",fontSize:13,color:"#344054",minHeight:"60px",width:400,whiteSpace:"pre-wrap",wordBreak:"break-word"}}},Xe=({project:c})=>{var g;const n=Ze();if(!c)return e.jsx(s.Typography,{children:"No JIRA use case found"});const d=c._jira_data,p=(d==null?void 0:d.attributes)||{},x=(b,z,_,U=!1)=>e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{sx:n.labelTitle,children:b}),z&&e.jsx(s.Typography,{sx:n.labelDescription,children:z})]}),e.jsx(s.Box,{sx:U?n.multilineValue:n.valueField,children:qe(_)})]}),u=["System Name / Identifier","Name","Description / Purpose","Description","Purpose"],y=["Business Owner / Responsible Team","Technical Owner / Maintainer","AI Officer","Model Owner / Maintainer","Risk Owner","Vendor / Developer Name (if third-party)"],v=["Lifecycle Status","Primary Function","Use Case / Business Process Supported","User Groups / Stakeholders","Decision Type","AI Function Type"],f=["Risk Level / Criticality","Potential Harms or Impacts","Known Limitations","Applicable Regulations"],k=["Input Data Sources & Types","Contains Personal / Sensitive Data","Deployment Environment","Platform / Tooling","Model Type / Algorithm & Version","Key Performance Metrics","Explainability Method","Human Oversight Mechanisms"],t=[...u,...y,...v,...f,...k],O=Object.keys(p).filter(b=>!t.includes(b)),h=b=>b.filter(z=>p[z]!==void 0).map(z=>{const _=p[z],U=String(_||"").length>80;return e.jsx(l.Fragment,{children:x(z,null,_,U)},z)});return e.jsx(s.Stack,{children:e.jsxs(s.Box,{sx:n.root,children:[e.jsxs(s.Box,{sx:{display:"flex",gap:2,alignItems:"center",mb:2},children:[e.jsx(s.Chip,{icon:e.jsx(fe,{size:14}),label:"JIRA Assets Object",size:"small",sx:{backgroundColor:"#E3F2FD",color:"#1565C0","& .MuiChip-icon":{color:"#1565C0"}}}),e.jsx(s.Typography,{sx:{fontSize:13,color:"#6B7280"},children:"This use case is imported from JIRA and is read-only"})]}),e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Use Case Overview"}),e.jsxs(s.Box,{sx:n.gridContainer,children:[x("Use case title","Imported from JIRA Assets",c.project_title),x("Use case ID","Generated identifier for this use case",c.uc_id),x("JIRA object key","Original key in JIRA Assets",d==null?void 0:d.objectKey),x("Sync status","Current synchronization state",c._sync_status||"synced")]})]}),e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"JIRA Details"}),e.jsxs(s.Box,{sx:n.gridContainer,children:[x("Object type","JIRA Assets object type",(g=d==null?void 0:d.objectType)==null?void 0:g.name),x("Created in JIRA","When this object was created",we(d==null?void 0:d.created)),x("Last updated in JIRA","When this object was last modified",we(d==null?void 0:d.updated)),x("JIRA Object ID","Internal JIRA identifier",d==null?void 0:d.id)]})]}),u.some(b=>p[b]!==void 0)&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Identification & Description"}),e.jsx(s.Box,{sx:n.gridContainer,children:h(u)})]}),y.some(b=>p[b]!==void 0)&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Ownership & Governance"}),e.jsx(s.Box,{sx:n.gridContainer,children:h(y)})]}),v.some(b=>p[b]!==void 0)&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Classification & Function"}),e.jsx(s.Box,{sx:n.gridContainer,children:h(v)})]}),f.some(b=>p[b]!==void 0)&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Risk & Compliance"}),e.jsx(s.Box,{sx:n.gridContainer,children:h(f)})]}),k.some(b=>p[b]!==void 0)&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Technical Details"}),e.jsx(s.Box,{sx:n.gridContainer,children:h(k)})]}),O.length>0&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"Other Attributes"}),e.jsx(s.Box,{sx:n.gridContainer,children:h(O)})]}),Object.keys(p).length===0&&e.jsxs(s.Box,{sx:n.card,children:[e.jsx(s.Typography,{sx:n.sectionTitle,children:"JIRA Attributes"}),e.jsx(s.Typography,{sx:{color:"#6B7280",fontStyle:"italic"},children:"No attributes available for this object"})]})]})})},Ye=({project:c,apiServices:n})=>{const[d,p]=l.useState(!0),[x,u]=l.useState([]),[y,v]=l.useState(null),f=c.framework||[];l.useEffect(()=>{k()},[]);const k=async()=>{p(!0),v(null);try{if(n){const g=(await n.get("/frameworks")).data;u(g.data||g||[])}else u([])}catch(h){console.warn("Could not load available frameworks:",h.message),u([])}finally{p(!1)}},t=(h,g)=>{const b=g.toLowerCase().replace(/\s+/g,"-");window.location.href=`/project-view?projectId=${c.id}&tab=frameworks&framework=${b}`},O=()=>{window.location.href=`/project-view?projectId=${c.id}&tab=settings`};return d?e.jsx(s.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(s.CircularProgress,{size:32})}):f.length>0?e.jsxs(s.Box,{sx:{p:2},children:[e.jsx(s.Typography,{variant:"h6",sx:{mb:2,fontSize:"16px",fontWeight:600},children:"Installed Frameworks"}),e.jsx(s.Stack,{spacing:2,children:f.map(h=>e.jsx(s.Card,{variant:"outlined",sx:{borderRadius:2},children:e.jsxs(s.CardContent,{sx:{display:"flex",alignItems:"center",gap:2,py:2},children:[e.jsx(Fe,{size:20,color:"#16a34a"}),e.jsx(s.Typography,{sx:{flex:1,fontWeight:500},children:h.name}),e.jsx(s.Button,{size:"small",variant:"outlined",onClick:()=>t(h.framework_id,h.name),children:"View Controls"})]})},h.project_framework_id))}),y&&e.jsx(s.Alert,{severity:"error",sx:{mt:2},children:y}),x.filter(h=>!f.some(g=>g.framework_id===h.id)).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(s.Typography,{variant:"h6",sx:{mt:4,mb:2,fontSize:"16px",fontWeight:600},children:"Add More Frameworks"}),e.jsx(s.Button,{variant:"outlined",startIcon:e.jsx(xe,{size:16}),onClick:O,sx:{textTransform:"none"},children:"Add Framework"})]})]}):e.jsx(s.Box,{sx:{p:4},children:e.jsxs(s.Stack,{alignItems:"center",spacing:3,children:[e.jsx(s.Box,{sx:{width:80,height:80,borderRadius:"50%",backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(We,{size:40,color:"#9ca3af"})}),e.jsxs(s.Box,{sx:{textAlign:"center"},children:[e.jsx(s.Typography,{sx:{fontSize:18,fontWeight:600,color:"#374151",mb:1},children:"No frameworks installed"}),e.jsx(s.Typography,{sx:{fontSize:14,color:"#6b7280",maxWidth:400},children:"This use case doesn't have any compliance frameworks yet. Add a framework to start tracking controls and assessments."})]}),y&&e.jsx(s.Alert,{severity:"error",sx:{width:"100%",maxWidth:400},children:y}),e.jsx(s.Button,{variant:"contained",startIcon:e.jsx(xe,{size:16}),onClick:O,sx:{mt:2,textTransform:"none",backgroundColor:"#13715B","&:hover":{backgroundColor:"#0f5a47"}},children:"Add Framework"}),x.length>0&&e.jsxs(s.Typography,{sx:{fontSize:13,color:"#9ca3af",textAlign:"center"},children:[x.length," framework",x.length!==1?"s":""," available: ",x.map(h=>h.name).join(", ")]})]})})},Qe=({project:c})=>e.jsx(s.Box,{sx:{p:4},children:e.jsxs(s.Stack,{alignItems:"center",spacing:3,children:[e.jsx(s.Box,{sx:{width:80,height:80,borderRadius:"50%",backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Oe,{size:40,color:"#9ca3af"})}),e.jsxs(s.Box,{sx:{textAlign:"center"},children:[e.jsx(s.Typography,{sx:{fontSize:18,fontWeight:600,color:"#374151",mb:1},children:"Post-Market Monitoring"}),e.jsx(s.Typography,{sx:{fontSize:14,color:"#6b7280",maxWidth:450},children:"Post-market monitoring is managed through your JIRA workflow. This use case was imported from JIRA Assets and monitoring data should be tracked in your JIRA instance."})]}),e.jsxs(s.Box,{sx:{display:"flex",alignItems:"flex-start",gap:1.5,backgroundColor:"#EFF6FF",border:"1px solid #BFDBFE",borderRadius:2,p:2,maxWidth:450},children:[e.jsx(Le,{size:18,color:"#3B82F6",style:{flexShrink:0,marginTop:2}}),e.jsx(s.Typography,{sx:{fontSize:13,color:"#1E40AF"},children:"To configure post-market monitoring for this AI system, update the monitoring attributes in JIRA Assets. Changes will sync automatically."})]})]})});return H.JiraAssetsConfiguration=Ne,H.JiraAssetsUseCasesTab=$e,H.JiraUseCaseFrameworks=Ye,H.JiraUseCaseMonitoring=Qe,H.JiraUseCaseOverview=Ge,H.JiraUseCaseSettings=Xe,Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),H}({},jsxRuntime,React,MUI);
//# sourceMappingURL=index.esm.js.map
