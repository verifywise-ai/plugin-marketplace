var PluginJiraAssets=function(G,e,c,s){"use strict";const R=({configData:h={},onConfigChange:C,onSaveConfiguration:p,onTestConnection:_,isSavingConfig:B=!1,isTestingConnection:E=!1,apiServices:d,pluginApiCall:z})=>{const x=c.useCallback(async(t,l,i)=>{var a;if(z)return z(t,l,i);if(!d)throw new Error("No API service available");const o=`/plugins/jira-assets${l.startsWith("/")?l:`/${l}`}`;let r;switch(t.toUpperCase()){case"GET":r=await d.get(o);break;case"POST":r=await d.post(o,i);break;case"PUT":r=await d.put(o,i);break;case"PATCH":r=await d.patch(o,i);break;case"DELETE":r=await d.delete(o);break;default:throw new Error(`Unsupported method: ${t}`)}return((a=r.data)==null?void 0:a.data)??r.data},[d,z]),k=!!(d||z),[n,W]=c.useState({deployment_type:"cloud",sync_enabled:!1,sync_interval_hours:24,...h}),[M,y]=c.useState(!1),[O,J]=c.useState([]),[b,P]=c.useState([]),[f,D]=c.useState(!1),[H,U]=c.useState(!1),[v,L]=c.useState("idle"),[g,F]=c.useState(""),[K,N]=c.useState(!1),[A,I]=c.useState(null);c.useEffect(()=>{if(M||!d)return;(async()=>{var l;try{const o=await d.get("/plugins/jira-assets/config"),r=((l=o.data)==null?void 0:l.data)??o.data;r&&W(a=>({...a,...r}))}catch(i){console.error("Failed to load JIRA config:",i)}finally{y(!0)}})()},[d,M]);const u=c.useCallback((t,l)=>{W(i=>({...i,[t]:l})),C&&C(t,l)},[C]),V=c.useCallback(async()=>{if(!(!k||!n.jira_base_url||!n.workspace_id)){D(!0);try{const t=await x("GET","/schemas");t&&Array.isArray(t)&&J(t)}catch(t){console.error("Failed to load schemas:",t)}finally{D(!1)}}},[k,x,n.jira_base_url,n.workspace_id]),$=c.useCallback(async t=>{if(!(!k||!t)){U(!0);try{const l=await x("GET",`/schemas/${t}/object-types`);console.log("[JiraConfig] loadObjectTypes response:",l,"isArray:",Array.isArray(l)),l&&Array.isArray(l)?P(l):console.warn("[JiraConfig] Object types response is not an array:",typeof l)}catch(l){console.error("Failed to load object types:",l)}finally{U(!1)}}},[k,x]),q=async()=>{if(!k){_&&_();return}L("testing"),F("");try{const t=await x("POST","/test-connection",{configuration:{jira_base_url:n.jira_base_url,workspace_id:n.workspace_id,email:n.email,api_token:n.api_token,deployment_type:n.deployment_type||"cloud"}});t!=null&&t.success?(L("success"),F(t.message||"Connection successful. Click 'Save Configuration' to proceed to Step 2.")):(L("error"),F((t==null?void 0:t.message)||"Connection failed"))}catch(t){L("error"),F(t.message||"Connection test failed")}},X=async()=>{var t,l;if(d){N(!0),I(null);try{const i=await d.post("/plugins/jira-assets/config",{jira_base_url:n.jira_base_url,workspace_id:n.workspace_id,email:n.email,api_token:n.api_token||void 0,deployment_type:n.deployment_type||"cloud",selected_schema_id:n.selected_schema_id||void 0,selected_object_type_id:n.selected_object_type_id||void 0,sync_enabled:n.sync_enabled||!1,sync_interval_hours:n.sync_interval_hours||24}),o=((t=i.data)==null?void 0:t.data)??i.data;o!=null&&o.success?(I({type:"success",text:"Configuration saved successfully!"}),W(r=>({...r,has_api_token:!0})),y(!1)):I({type:"error",text:((l=o==null?void 0:o.errors)==null?void 0:l.join(", "))||(o==null?void 0:o.message)||"Failed to save configuration"})}catch(i){I({type:"error",text:i.message||"Failed to save configuration"})}finally{N(!1)}}},Z=t=>{u("selected_schema_id",t),u("selected_object_type_id",""),P([]),t&&$(t)};c.useEffect(()=>{console.log("[JiraConfig] Schema load check:",{has_api_token:n.has_api_token,jira_base_url:n.jira_base_url,workspace_id:n.workspace_id,schemas_length:O.length}),n.has_api_token&&n.jira_base_url&&n.workspace_id&&O.length===0&&(console.log("[JiraConfig] Calling loadSchemas()"),V())},[n.has_api_token,n.jira_base_url,n.workspace_id,V,O.length]),c.useEffect(()=>{n.has_api_token&&n.selected_schema_id&&b.length===0&&$(n.selected_schema_id)},[n.has_api_token,n.selected_schema_id,$,b.length]);const Q=[{value:1,label:"Every hour"},{value:6,label:"Every 6 hours"},{value:12,label:"Every 12 hours"},{value:24,label:"Every 24 hours"},{value:48,label:"Every 48 hours"}];return e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",fontSize:13,sx:{mb:3},children:"Connect to your Jira Service Management Assets to import AI Systems as use-cases."}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 1: Connection Settings"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Deployment Type *"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:n.deployment_type||"cloud",onChange:t=>u("deployment_type",t.target.value),sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"cloud",sx:{fontSize:"13px"},children:"JIRA Cloud (Atlassian-hosted)"}),e.jsx(s.MenuItem,{value:"datacenter",sx:{fontSize:"13px"},children:"JIRA Data Center / Server (Self-hosted)"})]})}),e.jsx(s.Typography,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:"Select Cloud for *.atlassian.net, or Data Center for self-hosted JIRA"})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"JIRA Base URL *"}),e.jsx(s.TextField,{fullWidth:!0,placeholder:n.deployment_type==="datacenter"?"https://jira.your-company.com":"https://your-company.atlassian.net",value:n.jira_base_url||"",onChange:t=>u("jira_base_url",t.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[n.deployment_type==="datacenter"?"Insight Object Schema ID":"Workspace ID"," *"]}),e.jsx(s.TextField,{fullWidth:!0,placeholder:n.deployment_type==="datacenter"?"Enter object schema ID (e.g., 1)":"Enter your JSM Assets workspace ID",value:n.workspace_id||"",onChange:t=>u("workspace_id",t.target.value),size:"small",helperText:n.deployment_type==="datacenter"?"For Data Center: Use object schema ID from Insight settings":"Found in Assets settings or the URL when viewing Assets",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[n.deployment_type==="datacenter"?"Username":"Email"," *"]}),e.jsx(s.TextField,{fullWidth:!0,type:n.deployment_type==="datacenter"?"text":"email",placeholder:n.deployment_type==="datacenter"?"your-username":"your-email@company.com",value:n.email||"",onChange:t=>u("email",t.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[n.deployment_type==="datacenter"?"Password / Token":"API Token"," ",!n.has_api_token&&"*"]}),e.jsx(s.TextField,{fullWidth:!0,type:"password",placeholder:n.has_api_token&&!n.api_token?"••••••••••••••••  (saved - enter new value to change)":n.deployment_type==="datacenter"?"Enter your password or personal access token":"Enter your Atlassian API token",value:n.api_token||"",onChange:t=>u("api_token",t.target.value),size:"small",helperText:n.has_api_token&&!n.api_token?"API token is saved. Leave empty to keep current token, or enter a new value to update.":n.deployment_type==="datacenter"?"Use your JIRA password or personal access token":"Generate at id.atlassian.com/manage-profile/security/api-tokens",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]})]}),v!=="idle"&&e.jsx(s.Box,{sx:{mt:2},children:e.jsx(s.Alert,{severity:v==="success"?"success":v==="error"?"error":"info",sx:{fontSize:"13px"},children:v==="testing"?"Testing connection...":g})}),e.jsx(s.Box,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:e.jsx(s.Button,{variant:"outlined",onClick:q,disabled:E||v==="testing"||!n.jira_base_url||!n.workspace_id||!n.email||!n.api_token&&!n.has_api_token,sx:{borderColor:"#13715B",color:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{borderColor:"#0f5a47",backgroundColor:"rgba(19, 113, 91, 0.04)"},"&:disabled":{borderColor:"#d0d5dd",color:"#98a2b3"}},children:E||v==="testing"?e.jsxs(e.Fragment,{children:[e.jsx(s.CircularProgress,{size:16,sx:{mr:1}}),"Testing..."]}):"Test Connection"})}),e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 2: Select Schema & Object Type"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Schema"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:n.selected_schema_id||"",onChange:t=>Z(t.target.value),disabled:f||O.length===0,displayEmpty:!0,sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"",sx:{fontSize:"13px"},children:f?"Loading schemas...":"Select a schema"}),O.map(t=>e.jsxs(s.MenuItem,{value:t.id,sx:{fontSize:"13px"},children:[t.name," (",t.objectSchemaKey,")"]},t.id))]})})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Object Type (AI Systems)"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:n.selected_object_type_id||"",onChange:t=>u("selected_object_type_id",t.target.value),disabled:H||b.length===0||!n.selected_schema_id,displayEmpty:!0,sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"",sx:{fontSize:"13px"},children:H?"Loading object types...":"Select an object type"}),b.map(t=>e.jsxs(s.MenuItem,{value:t.id,sx:{fontSize:"13px"},children:[t.name,t.objectCount!==void 0&&e.jsx(s.Chip,{label:`${t.objectCount} objects`,size:"small",sx:{ml:1,fontSize:"11px"}})]},t.id))]})})]})]}),e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 3: Sync Settings"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsx(s.Box,{children:e.jsx(s.FormControlLabel,{control:e.jsx(s.Switch,{checked:n.sync_enabled||!1,onChange:t=>u("sync_enabled",t.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#13715B"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#13715B"}}}),label:e.jsx(s.Typography,{variant:"body2",fontSize:13,sx:{color:"#344054"},children:"Enable automatic sync"})})}),n.sync_enabled&&e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Sync Interval"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsx(s.Select,{value:n.sync_interval_hours||24,onChange:t=>u("sync_interval_hours",t.target.value),sx:{fontSize:"13px",backgroundColor:"white"},children:Q.map(t=>e.jsx(s.MenuItem,{value:t.value,sx:{fontSize:"13px"},children:t.label},t.value))})})]})]}),n.last_sync_at&&e.jsx(s.Box,{sx:{mt:2},children:e.jsxs(s.Alert,{severity:n.last_sync_status==="success"?"success":"warning",sx:{fontSize:"13px"},children:["Last sync: ",new Date(n.last_sync_at).toLocaleString()," -"," ",n.last_sync_status==="success"?"Successful":n.last_sync_message]})}),A&&e.jsx(s.Box,{sx:{mt:2},children:e.jsx(s.Alert,{severity:A.type,sx:{fontSize:"13px"},onClose:()=>I(null),children:A.text})}),e.jsx(s.Box,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:e.jsx(s.Button,{variant:"contained",onClick:X,disabled:K||!n.jira_base_url||!n.workspace_id||!n.email||!n.api_token&&!n.has_api_token,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{backgroundColor:"#0f5a47"},"&:disabled":{backgroundColor:"#d0d5dd"}},children:K?e.jsxs(e.Fragment,{children:[e.jsx(s.CircularProgress,{size:16,sx:{mr:1,color:"white"}}),"Saving..."]}):"Save Configuration"})})]})};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=h=>h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),j=(h,C)=>{const p=c.forwardRef(({color:_="currentColor",size:B=24,strokeWidth:E=2,absoluteStrokeWidth:d,className:z="",children:x,...k},n)=>c.createElement("svg",{ref:n,...ee,width:B,height:B,stroke:_,strokeWidth:d?Number(E)*24/Number(B):E,className:["lucide",`lucide-${se(h)}`,z].join(" "),...k},[...C.map(([W,M])=>c.createElement(W,M)),...Array.isArray(x)?x:[x]]));return p.displayName=`${h}`,p};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=j("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=j("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=j("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=j("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=j("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=j("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=j("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=j("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ae=({apiServices:h,pluginApiCall:C})=>{const p=c.useCallback(async(o,r,a)=>{var T;if(C)return C(o,r,a);if(!h)throw new Error("No API service available");const w=`/plugins/jira-assets${r.startsWith("/")?r:`/${r}`}`;let S;switch(o.toUpperCase()){case"GET":S=await h.get(w);break;case"POST":S=await h.post(w,a);break;case"PUT":S=await h.put(w,a);break;case"PATCH":S=await h.patch(w,a);break;case"DELETE":S=await h.delete(w);break;default:throw new Error(`Unsupported method: ${o}`)}return((T=S.data)==null?void 0:T.data)??S.data},[h,C]),_=!!(h||C),[B,E]=c.useState([]),[d,z]=c.useState(!0),[x,k]=c.useState(!1),[n,W]=c.useState(null),[M,y]=c.useState(null),[O,J]=c.useState(!1),[b,P]=c.useState([]),[f,D]=c.useState(new Set),[H,U]=c.useState(!1),[v,L]=c.useState(!1),[g,F]=c.useState(null),[K,N]=c.useState(!1),A=c.useCallback(async()=>{if(_){z(!0),y(null);try{const o=await p("GET","/use-cases");Array.isArray(o)&&E(o)}catch(o){y(o.message||"Failed to load use cases")}finally{z(!1)}}},[_,p]),I=c.useCallback(async()=>{if(_)try{const o=await p("GET","/sync/status");W(o)}catch(o){console.error("Failed to load sync status:",o)}},[_,p]);c.useEffect(()=>{A(),I()},[A,I]);const u=async()=>{if(_){k(!0),y(null);try{const o=await p("POST","/sync");o!=null&&o.success?(await A(),await I()):y((o==null?void 0:o.status)||"Sync failed")}catch(o){y(o.message||"Sync failed")}finally{k(!1)}}},V=async()=>{if(_){J(!0),U(!0),D(new Set),P([]);try{const o=await p("GET","/config"),r=o==null?void 0:o.selected_object_type_id;if(!r){y("No object type configured. Please configure the plugin first."),U(!1);return}const a=await p("GET",`/object-types/${r}/objects`);if(Array.isArray(a)){const w=new Set(B.map(T=>T.jira_object_id)),S=a.filter(T=>!w.has(T.id));P(S)}}catch(o){y(o.message||"Failed to load JIRA objects")}finally{U(!1)}}},$=o=>{D(r=>{const a=new Set(r);return a.has(o)?a.delete(o):a.add(o),a})},q=()=>{f.size===b.length?D(new Set):D(new Set(b.map(o=>o.id)))},X=async()=>{if(!(!p||f.size===0)){L(!0),y(null);try{const o=await p("POST","/import",{object_ids:Array.from(f)});o!=null&&o.success?(J(!1),await A()):y((o==null?void 0:o.error)||"Import failed")}catch(o){y(o.message||"Import failed")}finally{L(!1)}}},Z=o=>{F(o),N(!0)},Q=o=>{var a;const r=typeof o.data=="string"?JSON.parse(o.data):o.data;return(r==null?void 0:r.label)||((a=r==null?void 0:r.attributes)==null?void 0:a.Name)||o.uc_id},t=async o=>{if(_&&window.confirm(`Are you sure you want to delete "${Q(o)}"?`))try{await p("DELETE",`/use-cases/${o.id}`),await A(),(g==null?void 0:g.id)===o.id&&(N(!1),F(null))}catch(r){y(r.message||"Failed to delete use case")}},l=o=>o?new Date(o).toLocaleString():"N/A",i=o=>{switch(o){case"synced":return e.jsx(s.Chip,{label:"Synced",size:"small",color:"success",sx:{fontSize:"11px"}});case"updated":return e.jsx(s.Chip,{label:"Updated",size:"small",color:"info",sx:{fontSize:"11px"}});case"deleted_in_jira":return e.jsx(s.Chip,{label:"Deleted in JIRA",size:"small",color:"error",sx:{fontSize:"11px"}});default:return e.jsx(s.Chip,{label:o,size:"small",sx:{fontSize:"11px"}})}};return e.jsxs(s.Box,{sx:{p:3},children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"h6",fontWeight:600,children:"JIRA AI Systems"}),e.jsx(s.Typography,{variant:"body2",color:"text.secondary",fontSize:13,children:"AI Systems imported from Jira Service Management Assets"})]}),e.jsxs(s.Box,{sx:{display:"flex",gap:2},children:[e.jsx(s.Button,{variant:"outlined",startIcon:x?e.jsx(s.CircularProgress,{size:16}):e.jsx(le,{size:16}),onClick:u,disabled:x,sx:{borderColor:"#d0d5dd",color:"#344054",textTransform:"none",fontSize:"13px"},children:x?"Syncing...":"Sync Now"}),e.jsx(s.Button,{variant:"contained",startIcon:e.jsx(re,{size:16}),onClick:V,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px","&:hover":{backgroundColor:"#0f5a47"}},children:"Import from JIRA"})]})]}),n&&e.jsx(s.Alert,{severity:n.last_sync_status==="success"?"success":n.last_sync_status==="failed"?"warning":"info",sx:{mb:2,fontSize:"13px"},icon:e.jsx(te,{size:18}),children:e.jsxs(s.Box,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs("span",{children:["Last sync: ",n.last_sync_at?l(n.last_sync_at):"Never"]}),n.sync_enabled&&e.jsx(s.Chip,{label:`Auto-sync: Every ${n.sync_interval_hours}h`,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"11px"}})]})}),M&&e.jsx(s.Alert,{severity:"error",sx:{mb:2,fontSize:"13px"},onClose:()=>y(null),children:M}),d?e.jsx(s.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(s.CircularProgress,{})}):B.length===0?e.jsxs(s.Paper,{sx:{p:4,textAlign:"center"},children:[e.jsx(oe,{size:48,color:"#98a2b3"}),e.jsx(s.Typography,{variant:"h6",sx:{mt:2,color:"#344054"},children:"No JIRA AI Systems Imported"}),e.jsx(s.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:'Click "Import from JIRA" to start importing AI Systems from your JSM Assets.'})]}):e.jsx(s.TableContainer,{component:s.Paper,sx:{boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{sx:{backgroundColor:"#f9fafb"},children:[e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"UC-ID"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"JIRA Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Sync Status"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Last Synced"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},align:"right",children:"Actions"})]})}),e.jsx(s.TableBody,{children:B.map(o=>{var a;const r=typeof o.data=="string"?JSON.parse(o.data):o.data;return e.jsxs(s.TableRow,{hover:!0,children:[e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:o.uc_id}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:(r==null?void 0:r.label)||((a=r==null?void 0:r.attributes)==null?void 0:a.Name)||"-"}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:(r==null?void 0:r.objectKey)||"-"}),e.jsx(s.TableCell,{children:i(o.sync_status)}),e.jsx(s.TableCell,{sx:{fontSize:"12px",color:"#667085"},children:l(o.last_synced_at)}),e.jsxs(s.TableCell,{align:"right",children:[e.jsx(s.Tooltip,{title:"View Details",children:e.jsx(s.IconButton,{size:"small",onClick:()=>Z(o),children:e.jsx(ce,{size:16})})}),e.jsx(s.Tooltip,{title:"Delete",children:e.jsx(s.IconButton,{size:"small",onClick:()=>t(o),color:"error",children:e.jsx(Y,{size:16})})})]})]},o.id)})})]})}),e.jsxs(s.Dialog,{open:O,onClose:()=>J(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(s.DialogTitle,{children:e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s.Typography,{variant:"h6",children:"Import AI Systems from JIRA"}),e.jsx(s.IconButton,{onClick:()=>J(!1),children:e.jsx(m,{size:20})})]})}),e.jsx(s.DialogContent,{dividers:!0,children:H?e.jsxs(s.Box,{sx:{py:4,textAlign:"center"},children:[e.jsx(s.CircularProgress,{}),e.jsx(s.Typography,{sx:{mt:2},children:"Loading objects from JIRA..."})]}):b.length===0?e.jsx(s.Alert,{severity:"info",children:"No new objects to import. All JIRA objects have already been imported."}):e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s.FormControlLabel,{control:e.jsx(s.Checkbox,{checked:f.size===b.length&&b.length>0,indeterminate:f.size>0&&f.size<b.length,onChange:q,size:"small"}),label:e.jsxs(s.Typography,{variant:"body2",fontSize:13,children:["Select All (",b.length," objects)"]})}),e.jsxs(s.Typography,{variant:"body2",color:"text.secondary",children:[f.size," selected"]})]}),e.jsx(s.TableContainer,{sx:{maxHeight:400},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{padding:"checkbox"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Updated"})]})}),e.jsx(s.TableBody,{children:b.map(o=>e.jsxs(s.TableRow,{hover:!0,selected:f.has(o.id),onClick:()=>$(o.id),sx:{cursor:"pointer"},children:[e.jsx(s.TableCell,{padding:"checkbox",children:e.jsx(s.Checkbox,{checked:f.has(o.id),size:"small"})}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:o.key}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:o.name}),e.jsx(s.TableCell,{sx:{fontSize:"12px",color:"#667085"},children:l(o.updated)})]},o.id))})]})})]})}),e.jsxs(s.DialogActions,{sx:{p:2},children:[e.jsx(s.Button,{onClick:()=>J(!1),sx:{textTransform:"none"},children:"Cancel"}),e.jsx(s.Button,{variant:"contained",onClick:X,disabled:v||f.size===0,startIcon:v?e.jsx(s.CircularProgress,{size:16}):e.jsx(ne,{size:16}),sx:{backgroundColor:"#13715B",textTransform:"none","&:hover":{backgroundColor:"#0f5a47"}},children:v?"Importing...":`Import ${f.size} Objects`})]})]}),e.jsx(s.Drawer,{anchor:"right",open:K,onClose:()=>N(!1),children:e.jsx(s.Box,{sx:{width:480,p:3},children:g&&(()=>{var w;const o=typeof g.data=="string"?JSON.parse(g.data):g.data,r=(o==null?void 0:o.label)||((w=o==null?void 0:o.attributes)==null?void 0:w.Name)||g.uc_id,a=(o==null?void 0:o.objectKey)||"-";return e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"h6",children:r}),e.jsxs(s.Typography,{variant:"body2",color:"text.secondary",sx:{fontFamily:"monospace"},children:[g.uc_id," | ",a]})]}),e.jsx(s.IconButton,{onClick:()=>N(!1),children:e.jsx(m,{size:20})})]}),e.jsxs(s.Stack,{spacing:2,children:[e.jsx(s.Box,{sx:{display:"flex",gap:1},children:i(g.sync_status)}),e.jsx(s.Divider,{}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"Sync Information"}),e.jsxs(s.Stack,{spacing:1,children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"Last Synced"}),e.jsx(s.Typography,{variant:"body2",children:l(g.last_synced_at)})]}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"JIRA Created"}),e.jsx(s.Typography,{variant:"body2",children:l(o==null?void 0:o.created)})]}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"JIRA Updated"}),e.jsx(s.Typography,{variant:"body2",children:l(o==null?void 0:o.updated)})]})]})]}),e.jsx(s.Divider,{}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"JIRA Attributes"}),e.jsx(s.Stack,{spacing:1,children:Object.entries((o==null?void 0:o.attributes)||{}).map(([S,T])=>e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:S}),e.jsx(s.Typography,{variant:"body2",sx:{wordBreak:"break-word"},children:Array.isArray(T)?T.join(", "):String(T??"N/A")})]},S))})]}),e.jsx(s.Divider,{}),e.jsx(s.Box,{sx:{display:"flex",gap:2},children:e.jsx(s.Button,{variant:"outlined",color:"error",fullWidth:!0,onClick:()=>t(g),startIcon:e.jsx(Y,{size:16}),sx:{textTransform:"none"},children:"Delete"})})]})]})})()})})]})};return G.JiraAssetsConfiguration=R,G.JiraAssetsUseCasesTab=ae,Object.defineProperty(G,Symbol.toStringTag,{value:"Module"}),G}({},jsxRuntime,React,MUI);
//# sourceMappingURL=index.esm.js.map
