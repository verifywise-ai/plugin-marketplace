var PluginModelLifecycle=function(W,e,r,o,R){"use strict";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),P=(t,l)=>{const c=r.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:h=2,absoluteStrokeWidth:d,className:y="",children:f,...g},u)=>r.createElement("svg",{ref:u,...ae,width:n,height:n,stroke:s,strokeWidth:d?Number(h)*24/Number(n):h,className:["lucide",`lucide-${pe(t)}`,y].join(" "),...g},[...l.map(([p,b])=>r.createElement(p,b)),...Array.isArray(f)?f:[f]]));return c.displayName=`${t}`,c};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=P("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=P("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=P("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=P("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=P("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=P("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=P("GitCommitVertical",[["path",{d:"M12 3v6",key:"1holv5"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 15v6",key:"a9ows0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=P("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=P("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=P("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=P("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=P("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=P("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=P("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=P("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function we(t,l,c=!0){const[s,n]=r.useState([]),[h,d]=r.useState(!1),[y,f]=r.useState(null),g=r.useCallback(async()=>{var u;if(!(!t||!c||!l)){d(!0),f(null);try{const p=await l.get(`/plugins/model-lifecycle/models/${t}/lifecycle`);n(((u=p.data)==null?void 0:u.data)||p.data||[])}catch(p){f(p.message||"Failed to load lifecycle data")}finally{d(!1)}}},[t,c,l]);return r.useEffect(()=>{g()},[g]),{phases:s,loading:h,error:y,refresh:g}}function Ce(t,l,c=!0){const[s,n]=r.useState(null),[h,d]=r.useState(!1),[y,f]=r.useState(null),g=r.useCallback(async()=>{var u;if(!(!t||!c||!l)){d(!0),f(null);try{const p=await l.get(`/plugins/model-lifecycle/models/${t}/lifecycle/progress`);n(((u=p.data)==null?void 0:u.data)||p.data||null)}catch(p){f(p.message||"Failed to load lifecycle progress")}finally{d(!1)}}},[t,c,l]);return r.useEffect(()=>{g()},[g]),{progress:s,loading:h,error:y,refresh:g}}function ze(t,l=!1,c=!0){const[s,n]=r.useState([]),[h,d]=r.useState(!1),[y,f]=r.useState(null),g=r.useCallback(async()=>{var u;if(!(!c||!t)){d(!0),f(null);try{const p=l?"?includeInactive=true":"",b=await t.get(`/plugins/model-lifecycle/config${p}`);n(((u=b.data)==null?void 0:u.data)||b.data||[])}catch(p){f(p.message||"Failed to load lifecycle config")}finally{d(!1)}}},[l,c,t]);return r.useEffect(()=>{g()},[g]),{phases:s,loading:h,error:y,refresh:g,setPhases:n}}function Se({phases:t,progress:l,activePhaseId:c,onPhaseSelect:s}){const n=r.useMemo(()=>t.map(d=>{var f;const y=l==null?void 0:l.phases.find(g=>g.phase_id===d.id);return{id:d.id,name:d.name,totalItems:(y==null?void 0:y.total_items)??((f=d.items)==null?void 0:f.length)??0,filledItems:(y==null?void 0:y.filled_items)??0}}),[t,l]),h=r.useCallback(d=>{s(d)},[s]);return e.jsxs(o.Stack,{sx:{width:280,minWidth:280,borderRight:"1px solid #E0E4E9",backgroundColor:"#FCFCFD"},children:[e.jsxs(o.Box,{sx:{px:"20px",py:"16px",borderBottom:"1px solid #E0E4E9"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"13px",color:"#344054",mb:"4px"},children:"Lifecycle Progress"}),e.jsxs(o.Typography,{sx:{fontSize:"12px",color:"#667085"},children:[(l==null?void 0:l.completion_percentage)??0,"% complete",l?` (${l.filled_items}/${l.total_items} items)`:""]})]}),e.jsx(o.Stack,{sx:{py:"8px"},children:n.map((d,y)=>{const f=d.id===c,g=d.totalItems>0&&d.filledItems===d.totalItems,u=d.filledItems>0;return e.jsxs(o.Stack,{direction:"row",alignItems:"center",onClick:()=>h(d.id),sx:{px:"20px",py:"10px",gap:"12px",cursor:"pointer",borderLeft:f?"3px solid #13715B":"3px solid transparent",backgroundColor:f?"rgba(19,113,91,0.06)":"transparent","&:hover":{backgroundColor:f?"rgba(19,113,91,0.06)":"#F9FAFB"},transition:"background-color 0.15s ease"},children:[e.jsx(o.Box,{sx:{width:24,height:24,minWidth:24,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:g||f?"#13715B":"#E0E4E9",color:g||f?"#fff":"#667085",fontSize:"11px",fontWeight:600},children:g?e.jsx(Z,{size:14}):y+1}),e.jsxs(o.Stack,{sx:{flex:1,minWidth:0},children:[e.jsx(o.Typography,{sx:{fontSize:"13px",fontWeight:f?600:400,color:"#344054",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.name}),e.jsxs(o.Typography,{sx:{fontSize:"11px",color:u?"#475467":"#667085"},children:[d.filledItems,"/",d.totalItems," items"]})]})]},d.id)})})]})}function ne({modelId:t,item:l,onValueChanged:c,apiServices:s}){const n=l.value;switch(l.item_type){case"text":return e.jsx(se,{modelId:t,item:l,value:n,multiline:!1,onValueChanged:c,apiServices:s});case"textarea":return e.jsx(se,{modelId:t,item:l,value:n,multiline:!0,onValueChanged:c,apiServices:s});case"documents":return e.jsx(Fe,{modelId:t,item:l,value:n,onValueChanged:c,apiServices:s});case"people":return e.jsx(Te,{modelId:t,item:l,value:n,onValueChanged:c,apiServices:s});case"classification":return e.jsx(ve,{modelId:t,item:l,value:n,onValueChanged:c,apiServices:s});case"checklist":return e.jsx(Ie,{modelId:t,item:l,value:n,onValueChanged:c,apiServices:s});case"approval":return e.jsx(Me,{modelId:t,item:l,value:n,onValueChanged:c,apiServices:s});default:return e.jsxs(o.Typography,{color:"text.secondary",variant:"body2",children:["Unsupported field type: ",l.item_type]})}}function se({modelId:t,item:l,value:c,multiline:s,onValueChanged:n,apiServices:h}){const d=l.config,[y,f]=r.useState((c==null?void 0:c.value_text)??""),[g,u]=r.useState(!1),p=r.useRef((c==null?void 0:c.value_text)??""),b=r.useCallback(async()=>{if(y!==p.current){u(!0);try{await(h==null?void 0:h.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_text:y||null})),p.current=y,n==null||n()}catch{}finally{u(!1)}}},[y,t,l.id,n,h]);return e.jsx(o.TextField,{placeholder:(d==null?void 0:d.placeholder)||`Enter ${l.name.toLowerCase()}`,value:y,onChange:M=>{d!=null&&d.maxLength&&M.target.value.length>d.maxLength||f(M.target.value)},onBlur:b,multiline:s,rows:s?3:void 0,size:"small",fullWidth:!0,InputProps:{endAdornment:g?e.jsx(o.CircularProgress,{size:14}):void 0}})}function Fe({modelId:t,item:l,value:c,onValueChanged:s,apiServices:n}){const h=(c==null?void 0:c.files)??[],[d,y]=r.useState(!1),f=r.useRef(null),g=r.useCallback(async p=>{var M,F,E;const b=p.target.files;if(!(!b||b.length===0||!n)){y(!0);try{for(const w of Array.from(b)){const B=new FormData;B.append("file",w),B.append("source","File Manager");const k=await n.post("/files/upload",B,{headers:{"Content-Type":"multipart/form-data"}}),C=((F=(M=k.data)==null?void 0:M.data)==null?void 0:F.id)||((E=k.data)==null?void 0:E.id);await n.post(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}/files`,{fileId:C})}s==null||s()}catch{}finally{y(!1),f.current&&(f.current.value="")}}},[t,l.id,s,n]),u=r.useCallback(async p=>{try{await(n==null?void 0:n.delete(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}/files/${p}`)),s==null||s()}catch{}},[t,l.id,s,n]);return e.jsxs(o.Stack,{sx:{gap:"12px"},children:[h.length>0&&e.jsx(o.Stack,{sx:{gap:"8px"},children:h.map(p=>e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"10px",p:"10px 12px",borderRadius:"4px",border:"1px solid #E0E4E9",backgroundColor:"#F9FAFB"},children:[e.jsx(fe,{size:16,color:"#667085"}),e.jsx(o.Typography,{variant:"body2",sx:{flex:1},children:p.filename||`File #${p.file_id}`}),e.jsx(o.IconButton,{size:"small",onClick:()=>u(p.file_id),"aria-label":"Remove file",children:e.jsx(X,{size:14})})]},p.id))}),e.jsxs(o.Box,{sx:{border:"1px dashed #D0D5DD",borderRadius:"4px",p:"20px 16px",textAlign:"center",cursor:"pointer","&:hover":{backgroundColor:"#F9FAFB"}},onClick:()=>{var p;return(p=f.current)==null?void 0:p.click()},children:[d?e.jsx(o.CircularProgress,{size:20}):e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px",justifyContent:"center",alignItems:"center"},children:[e.jsx(be,{size:16,color:"#667085"}),e.jsx(o.Typography,{variant:"body2",color:"text.secondary",children:"Click to upload documents"})]}),e.jsx("input",{ref:f,type:"file",multiple:!0,hidden:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.csv,.txt,.md",onChange:g})]})]})}function Te({modelId:t,item:l,value:c,onValueChanged:s,apiServices:n}){const h=Array.isArray(c==null?void 0:c.value_json)?c.value_json:[],[d,y]=r.useState(""),[f,g]=r.useState(!1),u=r.useCallback(async()=>{const p=parseInt(d);if(!(!p||h.find(b=>b.userId===p))){g(!0);try{const b=[...h,{userId:p}];await(n==null?void 0:n.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_json:b})),y(""),s==null||s()}catch{}finally{g(!1)}}},[d,h,t,l.id,s,n]);return e.jsxs(o.Stack,{sx:{gap:"8px"},children:[h.map(p=>e.jsx(o.Chip,{label:`User #${p.userId}`,size:"small",variant:"outlined"},p.userId)),e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px"},children:[e.jsx(o.TextField,{placeholder:"Enter user ID...",size:"small",value:d,onChange:p=>y(p.target.value),onKeyDown:p=>p.key==="Enter"&&u(),sx:{flex:1}}),e.jsx(o.Button,{variant:"outlined",size:"small",onClick:u,disabled:f,children:"Add"})]}),f&&e.jsx(o.CircularProgress,{size:14})]})}function ve({modelId:t,item:l,value:c,onValueChanged:s,apiServices:n}){var M;const h=l.config,d=(h==null?void 0:h.levels)??[],y=((M=c==null?void 0:c.value_json)==null?void 0:M.level)??"",[f,g]=r.useState(y),[u,p]=r.useState(!1),b=r.useCallback(async F=>{g(F),p(!0);try{await(n==null?void 0:n.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_json:{level:F}})),s==null||s()}catch{}finally{p(!1)}},[t,l.id,s,n]);return e.jsxs(o.Stack,{sx:{gap:"8px"},children:[e.jsx(o.RadioGroup,{value:f,onChange:F=>b(F.target.value),children:d.map(F=>e.jsx(o.FormControlLabel,{value:F,control:e.jsx(o.Radio,{size:"small"}),label:e.jsx(o.Typography,{variant:"body2",children:F})},F))}),u&&e.jsx(o.CircularProgress,{size:14})]})}function Ie({modelId:t,item:l,value:c,onValueChanged:s,apiServices:n}){const h=l.config,d=((h==null?void 0:h.defaultItems)??[]).map(k=>({label:k,checked:!1})),y=Array.isArray(c==null?void 0:c.value_json)?c.value_json:d,[f,g]=r.useState(y.length>0?y:d),[u,p]=r.useState(!1),[b,M]=r.useState(""),F=r.useCallback(async k=>{p(!0);try{await(n==null?void 0:n.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_json:k})),s==null||s()}catch{}finally{p(!1)}},[t,l.id,s,n]),E=r.useCallback(k=>{const C=f.map((D,_)=>_===k?{...D,checked:!D.checked}:D);g(C),F(C)},[f,F]),w=r.useCallback(()=>{if(!b.trim())return;const k=[...f,{label:b.trim(),checked:!1}];g(k),M(""),F(k)},[f,b,F]),B=r.useCallback(k=>{const C=f.filter((D,_)=>_!==k);g(C),F(C)},[f,F]);return e.jsxs(o.Stack,{sx:{gap:"10px"},children:[f.map((k,C)=>e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"10px"},children:[e.jsx(o.Checkbox,{checked:k.checked,onChange:()=>E(C),size:"small"}),e.jsx(o.Typography,{variant:"body2",sx:{flex:1,fontSize:"13px",textDecoration:k.checked?"line-through":"none",color:k.checked?"#667085":"#344054"},children:k.label}),e.jsx(o.IconButton,{size:"small",onClick:()=>B(C),"aria-label":"Remove item",children:e.jsx(J,{size:14})})]},C)),e.jsxs(o.Stack,{direction:"row",sx:{gap:"10px"},children:[e.jsx(o.TextField,{placeholder:"Add checklist item...",value:b,onChange:k=>M(k.target.value),onKeyDown:k=>k.key==="Enter"&&w(),size:"small",sx:{flex:1}}),e.jsx(o.Button,{variant:"outlined",size:"small",onClick:w,children:"Add"})]}),u&&e.jsx(o.CircularProgress,{size:14})]})}function Me({modelId:t,item:l,value:c,onValueChanged:s,apiServices:n}){const h=Array.isArray(c==null?void 0:c.value_json)?c.value_json:[],[d,y]=r.useState(h),[f,g]=r.useState(!1),[u,p]=r.useState(""),b=r.useCallback(async w=>{g(!0);try{await(n==null?void 0:n.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_json:w})),s==null||s()}catch{}finally{g(!1)}},[t,l.id,s,n]),M=r.useCallback((w,B)=>{const k=d.map(C=>C.userId===w?{...C,status:B,date:new Date().toISOString()}:C);y(k),b(k)},[d,b]),F=r.useCallback(()=>{const w=parseInt(u);if(!w||d.find(k=>k.userId===w))return;const B=[...d,{userId:w,status:"pending"}];y(B),p(""),b(B)},[u,d,b]),E=w=>{switch(w){case"approved":return"#079455";case"rejected":return"#F04438";default:return"#667085"}};return e.jsxs(o.Stack,{sx:{gap:"12px"},children:[d.map(w=>e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"10px",p:"12px 16px",borderRadius:"4px",border:"1px solid #E0E4E9"},children:[e.jsxs(o.Typography,{variant:"body2",sx:{flex:1},children:["User #",w.userId]}),e.jsx(o.Chip,{label:w.status,size:"small",sx:{color:E(w.status),borderColor:E(w.status)},variant:"outlined"}),w.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(o.IconButton,{size:"small",onClick:()=>M(w.userId,"approved"),sx:{color:"#079455"},"aria-label":"Approve",children:e.jsx(Z,{size:16})}),e.jsx(o.IconButton,{size:"small",onClick:()=>M(w.userId,"rejected"),sx:{color:"#F04438"},"aria-label":"Reject",children:e.jsx(J,{size:16})})]})]},w.userId)),e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px"},children:[e.jsx(o.TextField,{placeholder:"Enter approver user ID...",size:"small",value:u,onChange:w=>p(w.target.value),onKeyDown:w=>w.key==="Enter"&&F(),sx:{flex:1}}),e.jsx(o.Button,{variant:"outlined",size:"small",onClick:F,disabled:f,children:"Add Approver"})]}),f&&e.jsx(o.CircularProgress,{size:14})]})}function Ae({phase:t,modelId:l,onValueChanged:c,apiServices:s}){const n=t.items??[];return e.jsxs(o.Stack,{sx:{flex:1,overflowY:"auto",p:"24px",gap:"16px"},children:[e.jsxs(o.Stack,{sx:{gap:"4px"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"16px",color:"#344054"},children:t.name}),t.description&&e.jsx(o.Typography,{sx:{fontSize:"13px",color:"#667085"},children:t.description})]}),e.jsx(o.Box,{sx:{borderTop:"1px solid #E0E4E9"}}),n.length>0?e.jsx(o.Stack,{spacing:0,divider:e.jsx(o.Box,{sx:{borderTop:"1px solid #E0E4E9"}}),children:n.map(h=>e.jsxs(o.Stack,{sx:{py:"16px",gap:"10px"},children:[e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"8px"},children:[e.jsx(o.Typography,{sx:{fontWeight:500,color:"#344054",fontSize:"13px"},children:h.name}),h.is_required&&e.jsx(o.Typography,{sx:{color:"#F04438",fontSize:"11px"},children:"Required"})]}),h.description&&e.jsx(o.Typography,{sx:{color:"#667085",display:"block",fontSize:"12px"},children:h.description}),e.jsx(ne,{modelId:l,item:h,onValueChanged:c,apiServices:s})]},h.id))}):e.jsx(o.Typography,{sx:{textAlign:"center",color:"#667085",py:4},children:"No items configured for this phase"})]})}function Be({phases:t,progress:l,modelId:c,loading:s,onValueChanged:n,apiServices:h}){const[d,y]=r.useState(null);r.useEffect(()=>{t.length>0&&d===null&&y(t[0].id)},[t,d]);const f=r.useMemo(()=>t.find(u=>u.id===d)??null,[t,d]),g=r.useCallback(u=>{y(u)},[]);return s&&t.length===0?e.jsx(o.Stack,{alignItems:"center",sx:{py:4},children:e.jsx(o.CircularProgress,{size:24})}):t.length===0?e.jsx(o.Typography,{sx:{textAlign:"center",color:"#667085",py:4},children:"No lifecycle phases configured. Contact an administrator to set up the model lifecycle."}):e.jsxs(o.Box,{sx:{border:"1px solid #E0E4E9",borderRadius:"4px",backgroundColor:"#fff",overflow:"hidden",display:"flex",flexDirection:{xs:"column",md:"row"},minHeight:400},children:[e.jsx(Se,{phases:t,progress:l,activePhaseId:d,onPhaseSelect:g}),e.jsx(o.Box,{sx:{flex:1,display:"flex",minWidth:0},children:f?e.jsx(Ae,{phase:f,modelId:c,onValueChanged:n,apiServices:h}):e.jsx(o.Stack,{alignItems:"center",justifyContent:"center",sx:{flex:1,p:"24px"},children:e.jsx(o.Typography,{sx:{color:"#667085"},children:"Select a phase from the sidebar"})})})]})}function Pe({progress:t,onPhaseClick:l}){if(!t||t.phases.length===0)return null;const c=(s,n)=>n===0?"#E0E4E9":s===n?"#079455":s>0?"#2E90FA":"#E0E4E9";return e.jsxs(o.Stack,{sx:{gap:"12px"},children:[e.jsxs(o.Stack,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"14px",color:"#344054"},children:"Lifecycle Progress"}),e.jsxs(o.Typography,{sx:{fontSize:"13px",color:"#667085"},children:[t.completion_percentage,"% complete (",t.filled_items,"/",t.total_items," items)"]})]}),e.jsx(o.Stack,{direction:"row",sx:{gap:"6px",width:"100%"},children:t.phases.map(s=>{const n=s.total_items>0?s.filled_items/s.total_items*100:0,h=c(s.filled_items,s.total_items);return e.jsx(o.Tooltip,{title:`${s.phase_name}: ${s.filled_items}/${s.total_items} items`,arrow:!0,children:e.jsx(o.Box,{onClick:()=>l==null?void 0:l(s.phase_id),sx:{flex:1,height:8,borderRadius:3,overflow:"hidden",backgroundColor:"#E0E4E9",cursor:l?"pointer":"default","&:hover":l?{opacity:.8}:{},position:"relative"},children:e.jsx(o.Box,{sx:{width:`${n}%`,height:"100%",backgroundColor:h,borderRadius:3,transition:"width 0.3s ease"}})})},s.phase_id)})}),e.jsx(o.Stack,{direction:"row",sx:{gap:"6px",width:"100%"},children:t.phases.map(s=>e.jsx(o.Typography,{sx:{flex:1,textAlign:"center",fontSize:"11px",color:"#667085",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:l?"pointer":"default"},onClick:()=>l==null?void 0:l(s.phase_id),children:s.phase_name},s.phase_id))})]})}function Ee({phase:t,modelId:l,expanded:c,onToggle:s,onValueChanged:n,apiServices:h}){const d=t.items??[],y=d.length,f=d.filter(p=>{const b=p.value;return b?!!(b.value_text||b.value_json||b.files&&b.files.length>0):!1}).length,u=y>0&&f===y?"#079455":f>0?"#2E90FA":"#667085";return e.jsxs(o.Accordion,{expanded:c,onChange:s,disableGutters:!0,sx:{border:"1px solid #E0E4E9",borderRadius:"4px !important","&:before":{display:"none"},boxShadow:"none",mb:"12px",overflow:"hidden"},children:[e.jsx(o.AccordionSummary,{expandIcon:e.jsx(te,{size:16,style:{transform:c?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease",color:"#667085"}}),sx:{backgroundColor:c?"#F9FAFB":"#fff","&:hover":{backgroundColor:"#F9FAFB"},px:"16px",py:"12px","& .MuiAccordionSummary-expandIconWrapper":{transform:"none !important"}},children:e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{width:"100%",gap:"12px"},children:[e.jsxs(o.Stack,{sx:{flex:1},children:[e.jsx(o.Typography,{sx:{fontWeight:600,color:"#344054",fontSize:"14px"},children:t.name}),t.description&&e.jsx(o.Typography,{sx:{color:"#667085",fontSize:"12px",mt:"4px"},children:t.description})]}),e.jsx(o.Chip,{label:`${f} / ${y}`,size:"small",variant:"outlined",sx:{color:u,borderColor:u}})]})}),e.jsx(o.AccordionDetails,{sx:{p:0},children:e.jsxs(o.Stack,{spacing:0,divider:e.jsx(o.Box,{sx:{borderTop:"1px solid #E0E4E9"}}),children:[d.map(p=>e.jsxs(o.Stack,{sx:{px:"16px",py:"16px",gap:"10px"},children:[e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"8px"},children:[e.jsx(o.Typography,{sx:{fontWeight:500,color:"#344054",fontSize:"13px"},children:p.name}),p.is_required&&e.jsx(o.Typography,{sx:{color:"#F04438",fontSize:"11px"},children:"Required"})]}),p.description&&e.jsx(o.Typography,{sx:{color:"#667085",display:"block",fontSize:"12px"},children:p.description}),e.jsx(ne,{modelId:l,item:p,onValueChanged:n,apiServices:h})]},p.id)),d.length===0&&e.jsx(o.Typography,{sx:{textAlign:"center",color:"#667085",py:4},children:"No items configured for this phase"})]})})]})}function re({modelId:t,apiServices:l}){var B;const{phases:c,loading:s,refresh:n}=we(t,l),{progress:h,refresh:d}=Ce(t,l),[y,f]=r.useState("stepper"),[g,u]=r.useState(()=>new Set),p=r.useRef(new Map),b=r.useCallback(()=>{n(),d()},[n,d]),M=r.useCallback((k,C)=>{C&&f(C)},[]),F=r.useCallback(k=>{u(C=>{const D=new Set(C);return D.has(k)?D.delete(k):D.add(k),D})},[]),E=r.useCallback(k=>{u(D=>{const _=new Set(D);return _.add(k),_});const C=p.current.get(k);C&&C.scrollIntoView({behavior:"smooth",block:"start"})},[]),w=(B=c[0])==null?void 0:B.id;return w!==void 0&&g.size===0&&c.length>0&&u(new Set([w])),e.jsxs(o.Stack,{sx:{gap:"16px"},children:[e.jsx(o.Stack,{direction:"row",justifyContent:"flex-end",children:e.jsxs(o.ToggleButtonGroup,{value:y,exclusive:!0,onChange:M,size:"small",sx:{"& .MuiToggleButton-root":{px:"12px",py:"4px",fontSize:"13px",textTransform:"none",gap:"6px",color:"#667085",borderColor:"#E0E4E9","&.Mui-selected":{backgroundColor:"#F9FAFB",color:"#344054"}}},children:[e.jsxs(o.ToggleButton,{value:"accordion","aria-label":"Accordion view",children:[e.jsx(ge,{size:16}),"Accordion"]}),e.jsxs(o.ToggleButton,{value:"stepper","aria-label":"Stepper view",children:[e.jsx(he,{size:16}),"Stepper"]})]})}),y==="accordion"?e.jsxs(o.Stack,{sx:{gap:"16px"},children:[e.jsx(Pe,{progress:h,onPhaseClick:E}),c.map(k=>e.jsx("div",{ref:C=>{C?p.current.set(k.id,C):p.current.delete(k.id)},children:e.jsx(Ee,{phase:k,modelId:t,expanded:g.has(k.id),onToggle:()=>F(k.id),onValueChanged:b,apiServices:l})},k.id))]}):e.jsx(Be,{phases:c,progress:h,modelId:t,loading:s,onValueChanged:b,apiServices:l})]})}const i={primary:"#13715B",primaryDark:"#10614d",textPrimary:"#1c2130",textSecondary:"#344054",textTertiary:"#475467",textAccent:"#838c99",bgMain:"#FFFFFF",bgAlt:"#FCFCFD",bgFill:"#F4F4F4",bgAccent:"#f9fafb",borderLight:"#eaecf0",borderDark:"#d0d5dd",error:"#f04438",errorBg:"#FEE2E2"},v={fontFamily:"'Inter', system-ui, -apple-system, sans-serif"},q={textTransform:"none",fontWeight:500,fontSize:"13px",fontFamily:v.fontFamily,borderRadius:"4px",backgroundColor:i.primary,color:"#fff","&:hover":{backgroundColor:i.primaryDark}},N={textTransform:"none",fontWeight:400,fontSize:"13px",fontFamily:v.fontFamily,borderRadius:"4px",borderColor:i.borderDark,color:i.textSecondary,"&:hover":{borderColor:i.borderDark,backgroundColor:i.bgFill}},U={"& .MuiOutlinedInput-root":{backgroundColor:i.bgMain,borderRadius:"4px",fontSize:"13px",fontFamily:v.fontFamily,"& .MuiOutlinedInput-notchedOutline":{borderColor:i.borderDark,borderWidth:"1px"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:i.borderDark},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:i.primary,borderWidth:"1px"}}},De={backgroundColor:i.bgMain,borderRadius:"4px",fontSize:"13px",fontFamily:v.fontFamily,"& .MuiOutlinedInput-notchedOutline":{borderColor:i.borderDark},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:i.borderDark},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:i.primary}},_e={border:`1px solid ${i.borderLight}`,borderRadius:"4px !important","&:before":{display:"none"},boxShadow:"none",overflow:"hidden"},Le={backgroundColor:i.bgAccent,px:"16px",py:"10px",minHeight:"44px","& .MuiAccordionSummary-expandIconWrapper":{transform:"none !important",order:-1,mr:"10px"},"& .MuiAccordionSummary-content":{margin:0,alignItems:"center",gap:"10px"}},Q={"& .MuiDialog-paper":{borderRadius:"8px",backgroundColor:i.bgAlt}},$e=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"documents",label:"Documents"},{value:"people",label:"People"},{value:"classification",label:"Classification"},{value:"checklist",label:"Checklist"},{value:"approval",label:"Approval"}];function We({apiServices:t}){const{phases:l,loading:c,refresh:s,setPhases:n}=ze(t,!0),[h,d]=r.useState(!1),[y,f]=r.useState(!1),[g,u]=r.useState(""),[p,b]=r.useState(""),[M,F]=r.useState(null),[E,w]=r.useState(""),[B,k]=r.useState("text"),[C,D]=r.useState(!1),[_,H]=r.useState(null),[G,K]=r.useState(null),[Oe,j]=r.useState(null),[Y,V]=r.useState(""),[ce,qe]=r.useState(new Set),Ue=r.useCallback(x=>{qe(T=>{const a=new Set(T);return a.has(x)?a.delete(x):a.add(x),a})},[]),He=r.useCallback(async()=>{if(!(!g.trim()||!t)){d(!0);try{await t.post("/plugins/model-lifecycle/phases",{name:g.trim(),description:p.trim()||void 0}),u(""),b(""),s()}catch{}finally{d(!1)}}},[g,p,s,t]),Ge=r.useCallback(async()=>{if(!(_===null||!t)){d(!0);try{await t.delete(`/plugins/model-lifecycle/phases/${_}`),s()}catch{}finally{d(!1),H(null)}}},[_,s,t]),de=r.useCallback(async(x,T)=>{const a=l.findIndex(O=>O.id===x);if(a<0||!t)return;const z=T==="up"?a-1:a+1;if(z<0||z>=l.length)return;const I=[...l],S=[...l];[S[a],S[z]]=[S[z],S[a]],n(S);const A=S.map(O=>O.id);try{await t.put("/plugins/model-lifecycle/phases/reorder",{orderedIds:A})}catch{n(I)}},[l,n,t]),m=r.useCallback(async(x,T)=>{var I;const a=T.trim();if(!a||!t){j(null);return}const z=((I=l.find(S=>S.id===x))==null?void 0:I.name)??"";if(a===z){j(null);return}n(S=>S.map(A=>A.id===x?{...A,name:a}:A)),j(null);try{await t.put(`/plugins/model-lifecycle/phases/${x}`,{name:a})}catch{n(S=>S.map(A=>A.id===x?{...A,name:z}:A))}},[l,n,t]),Ke=r.useCallback(async(x,T)=>{if(t){n(a=>a.map(z=>z.id===x?{...z,is_active:T}:z));try{await t.put(`/plugins/model-lifecycle/phases/${x}`,{is_active:T})}catch{n(a=>a.map(z=>z.id===x?{...z,is_active:!T}:z))}}},[n,t]),Ye=r.useCallback(async x=>{if(!(!E.trim()||!t)){d(!0);try{await t.post(`/plugins/model-lifecycle/phases/${x}/items`,{name:E.trim(),item_type:B,is_required:C}),w(""),k("text"),D(!1),F(null),s()}catch{}finally{d(!1)}}},[E,B,C,s,t]),Ze=r.useCallback(async()=>{if(!(G===null||!t)){d(!0);try{await t.delete(`/plugins/model-lifecycle/items/${G}`),s()}catch{}finally{d(!1),K(null)}}},[G,s,t]),Xe=r.useCallback(async(x,T)=>{if(t){n(a=>a.map(z=>{var I;return{...z,items:(I=z.items)==null?void 0:I.map(S=>S.id===x?{...S,is_required:T}:S)}}));try{await t.put(`/plugins/model-lifecycle/items/${x}`,{is_required:T})}catch{n(a=>a.map(z=>{var I;return{...z,items:(I=z.items)==null?void 0:I.map(S=>S.id===x?{...S,is_required:!T}:S)}}))}}},[n,t]),ie=r.useCallback(async(x,T,a,z)=>{const I=T.findIndex(L=>L.id===a);if(I<0||!t)return;const S=z==="up"?I-1:I+1;if(S<0||S>=T.length)return;const A=[...T];[A[I],A[S]]=[A[S],A[I]],n(L=>L.map($=>$.id===x?{...$,items:A}:$));const O=A.map(L=>L.id);try{await t.put(`/plugins/model-lifecycle/phases/${x}/items/reorder`,{orderedIds:O})}catch{n(L=>L.map($=>$.id===x?{...$,items:T}:$))}},[n,t]);return e.jsxs(e.Fragment,{children:[e.jsxs(o.Stack,{sx:{gap:"16px"},children:[c?e.jsx(o.Stack,{alignItems:"center",sx:{py:2},children:e.jsx(o.CircularProgress,{size:24,sx:{color:i.primary}})}):l.length===0?e.jsx(o.Typography,{sx:{fontSize:"13px",fontFamily:v.fontFamily,color:i.textTertiary},children:"No lifecycle phases configured yet. Click the button below to add phases."}):e.jsxs(o.Stack,{sx:{gap:"8px"},children:[e.jsxs(o.Typography,{sx:{fontWeight:600,fontSize:"13px",fontFamily:v.fontFamily,color:i.textSecondary},children:["Configured Phases (",l.filter(x=>x.is_active).length," active)"]}),l.map((x,T)=>{var a;return e.jsxs(o.Box,{sx:{display:"flex",alignItems:"center",gap:"12px",py:"8px",px:"12px",backgroundColor:x.is_active?i.bgAccent:i.bgFill,borderRadius:"4px",border:`1px solid ${i.borderLight}`,opacity:x.is_active?1:.6},children:[e.jsxs(o.Typography,{sx:{fontSize:"12px",fontWeight:600,fontFamily:v.fontFamily,color:i.textAccent,minWidth:"20px"},children:[T+1,"."]}),e.jsx(o.Typography,{sx:{flex:1,fontSize:"13px",fontWeight:500,fontFamily:v.fontFamily,color:i.textPrimary},children:x.name}),e.jsx(o.Chip,{label:`${((a=x.items)==null?void 0:a.length)||0} items`,size:"small",sx:{fontSize:"11px",fontFamily:v.fontFamily,height:"20px",backgroundColor:i.bgFill,color:i.textTertiary,borderRadius:"4px"}}),!x.is_active&&e.jsx(o.Chip,{label:"Inactive",size:"small",sx:{fontSize:"11px",fontFamily:v.fontFamily,height:"20px",backgroundColor:i.errorBg,color:i.error,borderRadius:"4px"}})]},x.id)})]}),e.jsx(o.Button,{variant:"outlined",startIcon:e.jsx(ke,{size:16}),onClick:()=>f(!0),sx:{...N,alignSelf:"flex-start"},children:"Configure Phases"})]}),e.jsxs(o.Dialog,{open:y,onClose:()=>f(!1),maxWidth:"md",fullWidth:!0,sx:Q,PaperProps:{sx:{maxHeight:"85vh"}},children:[e.jsxs(o.DialogTitle,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${i.borderLight}`,py:"12px",px:"20px"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"16px",fontFamily:v.fontFamily,color:i.textPrimary},children:"Configure Model Lifecycle"}),e.jsx(o.IconButton,{onClick:()=>f(!1),size:"small","aria-label":"Close",sx:{color:i.textTertiary},children:e.jsx(J,{size:18})})]}),e.jsx(o.DialogContent,{sx:{p:"20px"},children:c&&l.length===0?e.jsx(o.Stack,{alignItems:"center",sx:{py:4},children:e.jsx(o.CircularProgress,{sx:{color:i.primary}})}):e.jsxs(o.Stack,{sx:{gap:"12px"},children:[l.map((x,T)=>e.jsxs(o.Accordion,{expanded:ce.has(x.id),onChange:()=>Ue(x.id),disableGutters:!0,sx:{..._e,opacity:x.is_active?1:.6},children:[e.jsxs(o.AccordionSummary,{sx:Le,children:[e.jsx(te,{size:16,color:i.textTertiary,style:{transform:ce.has(x.id)?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease"}}),Oe===x.id?e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{flex:1,gap:"6px",mr:"8px"},onClick:a=>a.stopPropagation(),children:[e.jsx(o.TextField,{value:Y,onChange:a=>V(a.target.value),onBlur:()=>m(x.id,Y),onKeyDown:a=>{a.key==="Enter"?m(x.id,Y):a.key==="Escape"&&j(null)},autoFocus:!0,size:"small",sx:{...U,flex:1}}),e.jsx(o.IconButton,{size:"small",onClick:()=>m(x.id,Y),"aria-label":"Save phase name",sx:{color:i.primary},children:e.jsx(Z,{size:16})})]}):e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{flex:1,gap:"6px","&:hover .phase-edit-icon":{opacity:1}},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"13px",fontFamily:v.fontFamily,color:i.textPrimary,cursor:"text"},onDoubleClick:a=>{a.stopPropagation(),j(x.id),V(x.name)},children:x.name}),e.jsx(o.IconButton,{className:"phase-edit-icon",size:"small",sx:{opacity:0,transition:"opacity 0.2s",p:"2px",color:i.textTertiary},onClick:a=>{a.stopPropagation(),j(x.id),V(x.name)},"aria-label":"Edit phase name",children:e.jsx(ue,{size:14})})]}),e.jsx(o.FormControlLabel,{control:e.jsx(o.Switch,{size:"small",checked:x.is_active,onChange:a=>{a.stopPropagation(),Ke(x.id,a.target.checked)},sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:i.primary},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:i.primary}}}),label:e.jsx(o.Typography,{sx:{fontSize:"12px",fontFamily:v.fontFamily,color:i.textTertiary},children:"Active"}),onClick:a=>a.stopPropagation(),sx:{mr:0}}),e.jsx(o.IconButton,{size:"small",disabled:T===0,onClick:a=>{a.stopPropagation(),de(x.id,"up")},"aria-label":"Move phase up",sx:{opacity:T===0?.4:1,color:i.textTertiary},children:e.jsx(oe,{size:16})}),e.jsx(o.IconButton,{size:"small",disabled:T===l.length-1,onClick:a=>{a.stopPropagation(),de(x.id,"down")},"aria-label":"Move phase down",sx:{opacity:T===l.length-1?.4:1,color:i.textTertiary},children:e.jsx(ee,{size:16})}),e.jsx(o.IconButton,{size:"small",onClick:a=>{a.stopPropagation(),H(x.id)},sx:{color:i.error},"aria-label":"Delete phase",children:e.jsx(X,{size:16})})]}),e.jsx(o.AccordionDetails,{sx:{px:"16px",py:"12px",backgroundColor:i.bgMain},children:e.jsxs(o.Stack,{spacing:0,children:[(x.items??[]).map((a,z)=>{var I,S;return e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"12px",py:"10px",borderBottom:`1px solid ${i.borderLight}`},children:[e.jsx(o.Typography,{sx:{flex:1,fontSize:"13px",fontFamily:v.fontFamily,color:i.textSecondary},children:a.name}),e.jsx(o.Chip,{label:a.item_type,size:"small",variant:"outlined",sx:{fontSize:"11px",fontFamily:v.fontFamily,borderColor:i.borderDark,color:i.textTertiary,borderRadius:"4px"}}),e.jsx(o.FormControlLabel,{control:e.jsx(o.Switch,{size:"small",checked:a.is_required,onChange:A=>Xe(a.id,A.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:i.primary},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:i.primary}}}),label:e.jsx(o.Typography,{sx:{fontSize:"11px",fontFamily:v.fontFamily,color:i.textTertiary},children:"Required"}),sx:{mr:0}}),e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"4px",pl:"12px",borderLeft:`1px solid ${i.borderLight}`},children:[e.jsx(o.IconButton,{size:"small",disabled:z===0,onClick:()=>ie(x.id,x.items??[],a.id,"up"),"aria-label":"Move item up",sx:{opacity:z===0?.4:1,color:i.textTertiary},children:e.jsx(oe,{size:14})}),e.jsx(o.IconButton,{size:"small",disabled:z===(((I=x.items)==null?void 0:I.length)??0)-1,onClick:()=>ie(x.id,x.items??[],a.id,"down"),"aria-label":"Move item down",sx:{opacity:z===(((S=x.items)==null?void 0:S.length)??0)-1?.4:1,color:i.textTertiary},children:e.jsx(ee,{size:14})}),e.jsx(o.IconButton,{size:"small",onClick:()=>K(a.id),sx:{color:i.error},"aria-label":"Delete item",children:e.jsx(X,{size:14})})]})]},a.id)}),M===x.id?e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px",pt:"12px"},alignItems:"center",children:[e.jsx(o.TextField,{placeholder:"Item name",value:E,onChange:a=>w(a.target.value),size:"small",sx:{...U,flex:1}}),e.jsx(o.Select,{value:B,onChange:a=>k(a.target.value),size:"small",sx:{...De,minWidth:120},children:$e.map(a=>e.jsx(o.MenuItem,{value:a.value,sx:{fontSize:"13px"},children:a.label},a.value))}),e.jsx(o.FormControlLabel,{control:e.jsx(o.Switch,{size:"small",checked:C,onChange:a=>D(a.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:i.primary},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:i.primary}}}),label:e.jsx(o.Typography,{sx:{fontSize:"11px",fontFamily:v.fontFamily,color:i.textTertiary},children:"Req"}),sx:{ml:"4px"}}),e.jsx(o.Button,{variant:"contained",size:"small",onClick:()=>Ye(x.id),disabled:!E.trim()||h,sx:q,children:"Add"}),e.jsx(o.Button,{variant:"text",size:"small",onClick:()=>{F(null),w("")},sx:{...N,border:"none"},children:"Cancel"})]}):e.jsx(o.Button,{variant:"text",size:"small",startIcon:e.jsx(le,{size:14}),onClick:()=>F(x.id),sx:{alignSelf:"flex-start",mt:"12px",textTransform:"none",fontSize:"13px",fontFamily:v.fontFamily,color:i.primary,"&:hover":{backgroundColor:i.bgAccent}},children:"Add item"})]})})]},x.id)),e.jsxs(o.Box,{sx:{border:`1px dashed ${i.borderDark}`,borderRadius:"4px",p:"16px",backgroundColor:i.bgMain},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"13px",fontFamily:v.fontFamily,color:i.textSecondary,mb:"12px"},children:"Add new phase"}),e.jsxs(o.Stack,{sx:{gap:"10px"},children:[e.jsx(o.TextField,{placeholder:"Phase name",value:g,onChange:x=>u(x.target.value),size:"small",fullWidth:!0,sx:U}),e.jsx(o.TextField,{placeholder:"Description (optional)",value:p,onChange:x=>b(x.target.value),size:"small",multiline:!0,rows:2,fullWidth:!0,sx:U}),e.jsx(o.Button,{variant:"contained",size:"small",startIcon:e.jsx(le,{size:14}),onClick:He,disabled:!g.trim()||h,sx:{...q,alignSelf:"flex-start"},children:"Create phase"})]})]})]})}),e.jsx(o.DialogActions,{sx:{px:"20px",py:"12px",borderTop:`1px solid ${i.borderLight}`},children:e.jsx(o.Button,{variant:"outlined",onClick:()=>f(!1),sx:N,children:"Close"})})]}),e.jsxs(o.Dialog,{open:_!==null,onClose:()=>H(null),sx:Q,children:[e.jsx(o.DialogTitle,{sx:{fontWeight:600,fontSize:"16px",fontFamily:v.fontFamily,color:i.textPrimary},children:"Delete phase"}),e.jsx(o.DialogContent,{children:e.jsx(o.Typography,{sx:{fontSize:"13px",fontFamily:v.fontFamily,color:i.textSecondary},children:"Delete this phase and all its items? This cannot be undone."})}),e.jsxs(o.DialogActions,{sx:{px:"20px",py:"12px"},children:[e.jsx(o.Button,{onClick:()=>H(null),sx:N,children:"Cancel"}),e.jsx(o.Button,{onClick:Ge,variant:"contained",disabled:h,sx:{...q,backgroundColor:i.error,"&:hover":{backgroundColor:"#dc2626"}},children:"Delete"})]})]}),e.jsxs(o.Dialog,{open:G!==null,onClose:()=>K(null),sx:Q,children:[e.jsx(o.DialogTitle,{sx:{fontWeight:600,fontSize:"16px",fontFamily:v.fontFamily,color:i.textPrimary},children:"Delete item"}),e.jsx(o.DialogContent,{children:e.jsx(o.Typography,{sx:{fontSize:"13px",fontFamily:v.fontFamily,color:i.textSecondary},children:"Delete this item? This cannot be undone."})}),e.jsxs(o.DialogActions,{sx:{px:"20px",py:"12px"},children:[e.jsx(o.Button,{onClick:()=>K(null),sx:N,children:"Cancel"}),e.jsx(o.Button,{onClick:Ze,variant:"contained",disabled:h,sx:{...q,backgroundColor:i.error,"&:hover":{backgroundColor:"#dc2626"}},children:"Delete"})]})]})]})}const je=({modelId:t})=>{const l=R.useNavigate(),c=s=>{s.stopPropagation(),l(`/model-inventory/models/${t}`)};return e.jsx(o.Tooltip,{title:"View Lifecycle",arrow:!0,placement:"top",children:e.jsx(o.IconButton,{size:"small",onClick:c,sx:{color:"#667085","&:hover":{color:"#13715B",backgroundColor:"rgba(19, 113, 91, 0.08)"}},children:e.jsx(ye,{size:16})})})};function Ne({modelId:t,apiServices:l}){const c=o.useTheme(),s=R.useNavigate(),[n,h]=r.useState(null),[d,y]=r.useState(!0);return r.useEffect(()=>{if(!t||!l)return;(async()=>{var g;y(!0);try{const u=await l.get(`/modelInventory/${t}`);h(((g=u.data)==null?void 0:g.data)||u.data)}catch(u){console.error("Failed to fetch model:",u)}finally{y(!1)}})()},[t,l]),d?e.jsx(o.Stack,{alignItems:"center",justifyContent:"center",sx:{py:"64px"},children:e.jsx(o.CircularProgress,{})}):n?e.jsxs(o.Stack,{spacing:0,sx:{gap:"16px",maxWidth:"1400px",width:"100%"},children:[e.jsx(o.Box,{sx:{border:`1px solid ${c.palette.divider}`,borderRadius:"4px",p:"20px",backgroundColor:c.palette.background.paper},children:e.jsxs(o.Stack,{sx:{gap:"16px"},children:[e.jsxs(o.Box,{component:"button",onClick:()=>s("/model-inventory"),sx:{display:"flex",alignItems:"center",gap:"8px",background:"none",border:"none",cursor:"pointer",padding:0,color:c.palette.text.secondary,fontSize:"14px","&:hover":{color:c.palette.text.primary}},children:[e.jsx(xe,{size:16}),"Back to Model Inventory"]}),e.jsx(o.Stack,{direction:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",sx:{gap:"16px"},children:e.jsxs(o.Stack,{sx:{gap:"6px"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"16px",color:c.palette.text.primary},children:n.model||n.provider_model}),e.jsxs(o.Stack,{direction:"row",sx:{gap:"16px"},children:[n.provider&&e.jsxs(o.Typography,{sx:{fontSize:"13px",color:c.palette.text.secondary},children:["Provider: ",e.jsx("strong",{children:n.provider})]}),n.version&&e.jsxs(o.Typography,{sx:{fontSize:"13px",color:c.palette.text.secondary},children:["Version: ",e.jsx("strong",{children:n.version})]})]})]})})]})}),e.jsx(re,{modelId:t,apiServices:l})]}):e.jsx(o.Stack,{alignItems:"center",justifyContent:"center",sx:{py:"64px"},children:e.jsx(o.Typography,{children:"Model not found"})})}return W.ModelLifecycleConfig=We,W.ModelLifecycleDetail=Ne,W.ModelLifecycleTab=re,W.ViewLifecycleButton=je,Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),W}({},jsxRuntime,React,MUI,ReactRouterDOM);
//# sourceMappingURL=index.esm.js.map
