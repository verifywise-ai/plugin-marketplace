var PluginModelLifecycle=function(N,e,s,o,te){"use strict";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),_=(t,l)=>{const c=s.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:b=2,absoluteStrokeWidth:f,className:x="",children:u,...h},k)=>s.createElement("svg",{ref:k,...ge,width:r,height:r,stroke:n,strokeWidth:f?Number(b)*24/Number(r):b,className:["lucide",`lucide-${ue(t)}`,x].join(" "),...h},[...l.map(([g,w])=>s.createElement(g,w)),...Array.isArray(u)?u:[u]]));return c.displayName=`${t}`,c};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=_("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=_("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=_("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=_("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=_("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=_("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=_("GitCommitVertical",[["path",{d:"M12 3v6",key:"1holv5"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 15v6",key:"a9ows0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=_("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=_("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=_("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=_("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=_("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=_("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=_("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=_("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Te(t,l,c=!0){const[n,r]=s.useState([]),[b,f]=s.useState(!1),[x,u]=s.useState(null),h=s.useCallback(async()=>{var k;if(!(!t||!c||!l)){f(!0),u(null);try{const g=await l.get(`/plugins/model-lifecycle/models/${t}/lifecycle`),w=((k=g.data)==null?void 0:k.data)||g.data||[];r(Array.isArray(w)?w:[])}catch(g){u(g.message||"Failed to load lifecycle data")}finally{f(!1)}}},[t,c,l]);return s.useEffect(()=>{h()},[h]),{phases:n,loading:b,error:x,refresh:h}}function Me(t,l,c=!0){const[n,r]=s.useState(null),[b,f]=s.useState(!1),[x,u]=s.useState(null),h=s.useCallback(async()=>{var k;if(!(!t||!c||!l)){f(!0),u(null);try{const g=await l.get(`/plugins/model-lifecycle/models/${t}/lifecycle/progress`);r(((k=g.data)==null?void 0:k.data)||g.data||null)}catch(g){u(g.message||"Failed to load lifecycle progress")}finally{f(!1)}}},[t,c,l]);return s.useEffect(()=>{h()},[h]),{progress:n,loading:b,error:x,refresh:h}}function ve(t,l=!1,c=!0){const[n,r]=s.useState([]),[b,f]=s.useState(!1),[x,u]=s.useState(null),h=s.useCallback(async()=>{var k;if(!(!c||!t)){f(!0),u(null);try{const g=l?"?includeInactive=true":"",w=await t.get(`/plugins/model-lifecycle/config${g}`),T=((k=w.data)==null?void 0:k.data)||w.data||[];r(Array.isArray(T)?T:[])}catch(g){u(g.message||"Failed to load lifecycle config")}finally{f(!1)}}},[l,c,t]);return s.useEffect(()=>{h()},[h]),{phases:n,loading:b,error:x,refresh:h,setPhases:r}}function Ie({phases:t,progress:l,activePhaseId:c,onPhaseSelect:n}){const r=Array.isArray(l==null?void 0:l.phases)?l.phases:[],b=s.useMemo(()=>(Array.isArray(t)?t:[]).map(x=>{var h;const u=r.find(k=>k.phase_id===x.id);return{id:x.id,name:x.name,totalItems:(u==null?void 0:u.total_items)??((h=x.items)==null?void 0:h.length)??0,filledItems:(u==null?void 0:u.filled_items)??0}}),[t,l]),f=s.useCallback(x=>{n(x)},[n]);return e.jsxs(o.Stack,{sx:{width:280,minWidth:280,borderRight:"1px solid #E0E4E9",backgroundColor:"#FCFCFD"},children:[e.jsxs(o.Box,{sx:{px:"20px",py:"16px",borderBottom:"1px solid #E0E4E9"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"13px",color:"#344054",mb:"4px"},children:"Lifecycle Progress"}),e.jsxs(o.Typography,{sx:{fontSize:"12px",color:"#667085"},children:[(l==null?void 0:l.completion_percentage)??0,"% complete",l?` (${l.filled_items}/${l.total_items} items)`:""]})]}),e.jsx(o.Stack,{sx:{py:"8px"},children:b.map((x,u)=>{const h=x.id===c,k=x.totalItems>0&&x.filledItems===x.totalItems,g=x.filledItems>0;return e.jsxs(o.Stack,{direction:"row",alignItems:"center",onClick:()=>f(x.id),sx:{px:"20px",py:"10px",gap:"12px",cursor:"pointer",borderLeft:h?"3px solid #13715B":"3px solid transparent",backgroundColor:h?"rgba(19,113,91,0.06)":"transparent","&:hover":{backgroundColor:h?"rgba(19,113,91,0.06)":"#F9FAFB"},transition:"background-color 0.15s ease"},children:[e.jsx(o.Box,{sx:{width:24,height:24,minWidth:24,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:k||h?"#13715B":"#E0E4E9",color:k||h?"#fff":"#667085",fontSize:"11px",fontWeight:600},children:k?e.jsx(J,{size:14}):u+1}),e.jsxs(o.Stack,{sx:{flex:1,minWidth:0},children:[e.jsx(o.Typography,{sx:{fontSize:"13px",fontWeight:h?600:400,color:"#344054",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.name}),e.jsxs(o.Typography,{sx:{fontSize:"11px",color:g?"#475467":"#667085"},children:[x.filledItems,"/",x.totalItems," items"]})]})]},x.id)})})]})}function ce(t){const[l,c]=s.useState([]),[n,r]=s.useState(!0);return s.useEffect(()=>{if(!t){r(!1);return}(async()=>{try{const f=await t.get("/users"),x=f==null?void 0:f.data,u=(x==null?void 0:x.data)||x||[];c(Array.isArray(u)?u:[])}catch(f){console.error("Failed to fetch users:",f),c([])}finally{r(!1)}})()},[t]),{users:l,loading:n}}const y={primary:"#13715B",textSecondary:"#344054",textTertiary:"#475467",textAccent:"#838c99",bgMain:"#FFFFFF",bgAccent:"#f9fafb",borderLight:"#eaecf0",borderDark:"#d0d5dd",error:"#f04438",errorBg:"#FEE2E2",success:"#17b26a",successBg:"#ecfdf3"},L={fontFamily:"'Inter', system-ui, -apple-system, sans-serif"},ie={"& .MuiInputBase-root":{fontFamily:L.fontFamily,fontSize:"13px",borderRadius:"4px"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:y.borderDark},"&:hover fieldset":{borderColor:y.primary},"&.Mui-focused fieldset":{borderColor:y.primary}}},V={textTransform:"none",fontWeight:500,fontSize:"13px",fontFamily:L.fontFamily,borderRadius:"4px",borderColor:y.borderDark,color:y.textSecondary,"&:hover":{borderColor:y.primary,color:y.primary,backgroundColor:"rgba(19, 113, 91, 0.04)"}},de={fontFamily:L.fontFamily,fontSize:"12px",fontWeight:500,borderRadius:"4px"};function ae({modelId:t,item:l,onValueChanged:c,apiServices:n}){const r=l.value;switch(l.item_type){case"text":return e.jsx(pe,{modelId:t,item:l,value:r,multiline:!1,onValueChanged:c,apiServices:n});case"textarea":return e.jsx(pe,{modelId:t,item:l,value:r,multiline:!0,onValueChanged:c,apiServices:n});case"documents":return e.jsx(Be,{modelId:t,item:l,value:r,onValueChanged:c,apiServices:n});case"people":return e.jsx(Pe,{modelId:t,item:l,value:r,onValueChanged:c,apiServices:n});case"classification":return e.jsx(De,{modelId:t,item:l,value:r,onValueChanged:c,apiServices:n});case"checklist":return e.jsx($e,{modelId:t,item:l,value:r,onValueChanged:c,apiServices:n});case"approval":return e.jsx(_e,{modelId:t,item:l,value:r,onValueChanged:c,apiServices:n});default:return e.jsxs(o.Typography,{color:"text.secondary",variant:"body2",children:["Unsupported field type: ",l.item_type]})}}function pe({modelId:t,item:l,value:c,multiline:n,onValueChanged:r,apiServices:b}){const f=l.config,[x,u]=s.useState((c==null?void 0:c.value_text)??""),[h,k]=s.useState(!1),g=s.useRef((c==null?void 0:c.value_text)??""),w=s.useCallback(async()=>{if(x!==g.current){k(!0);try{await(b==null?void 0:b.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_text:x||null})),g.current=x,r==null||r()}catch{}finally{k(!1)}}},[x,t,l.id,r,b]);return e.jsx(o.TextField,{placeholder:(f==null?void 0:f.placeholder)||`Enter ${l.name.toLowerCase()}`,value:x,onChange:T=>{f!=null&&f.maxLength&&T.target.value.length>f.maxLength||u(T.target.value)},onBlur:w,multiline:n,rows:n?3:void 0,size:"small",fullWidth:!0,sx:ie,InputProps:{endAdornment:h?e.jsx(o.CircularProgress,{size:14,sx:{color:y.primary}}):void 0}})}function Be({modelId:t,item:l,value:c,onValueChanged:n,apiServices:r}){const b=Array.isArray(c==null?void 0:c.files)?c.files:[],[f,x]=s.useState(!1),u=s.useRef(null),h=s.useCallback(async g=>{var T,S,B;const w=g.target.files;if(!(!w||w.length===0||!r)){x(!0);try{for(const C of Array.from(w)){const D=new FormData;D.append("file",C),D.append("source","File Manager");const M=await r.post("/file-manager",D,{headers:{"Content-Type":"multipart/form-data"}}),d=((S=(T=M.data)==null?void 0:T.data)==null?void 0:S.id)||((B=M.data)==null?void 0:B.id);await r.post(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}/files`,{fileId:d})}n==null||n()}catch{}finally{x(!1),u.current&&(u.current.value="")}}},[t,l.id,n,r]),k=s.useCallback(async g=>{try{await(r==null?void 0:r.delete(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}/files/${g}`)),n==null||n()}catch{}},[t,l.id,n,r]);return e.jsxs(o.Stack,{sx:{gap:"12px"},children:[b.length>0&&e.jsx(o.Stack,{sx:{gap:"8px"},children:b.map(g=>e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"10px",p:"10px 12px",borderRadius:"4px",border:`1px solid ${y.borderLight}`,backgroundColor:y.bgAccent},children:[e.jsx(ke,{size:16,color:y.textAccent}),e.jsx(o.Typography,{sx:{flex:1,fontFamily:L.fontFamily,fontSize:"13px",color:y.textSecondary},children:g.filename||`File #${g.file_id}`}),e.jsx(o.IconButton,{size:"small",onClick:()=>k(g.file_id),"aria-label":"Remove file",sx:{color:y.textAccent,"&:hover":{color:y.error}},children:e.jsx(H,{size:14})})]},g.id))}),e.jsxs(o.Box,{sx:{border:`1px dashed ${y.borderDark}`,borderRadius:"4px",p:"20px 16px",textAlign:"center",cursor:"pointer",transition:"all 0.15s ease","&:hover":{backgroundColor:y.bgAccent,borderColor:y.primary}},onClick:()=>{var g;return(g=u.current)==null?void 0:g.click()},children:[f?e.jsx(o.CircularProgress,{size:20,sx:{color:y.primary}}):e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px",justifyContent:"center",alignItems:"center"},children:[e.jsx(Ae,{size:16,color:y.textAccent}),e.jsx(o.Typography,{sx:{fontFamily:L.fontFamily,fontSize:"13px",color:y.textTertiary},children:"Click to upload documents"})]}),e.jsx("input",{ref:u,type:"file",multiple:!0,hidden:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.csv,.txt,.md",onChange:h})]})]})}function Pe({modelId:t,item:l,value:c,onValueChanged:n,apiServices:r}){const{users:b,loading:f}=ce(r),x=Array.isArray(c==null?void 0:c.people)?c.people:[],[u,h]=s.useState(""),[k,g]=s.useState(!1),w=b.filter(C=>!x.some(D=>D.user_id===C.id)),T=C=>`${C.name||""} ${C.surname||""}`.trim()||C.email||`User #${C.user_id}`,S=s.useCallback(async()=>{if(u){g(!0);try{await(r==null?void 0:r.post(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}/people`,{userId:u})),h(""),n==null||n()}catch{}finally{g(!1)}}},[u,t,l.id,n,r]),B=s.useCallback(async C=>{g(!0);try{await(r==null?void 0:r.delete(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}/people/${C}`)),n==null||n()}catch{}finally{g(!1)}},[t,l.id,n,r]);return e.jsxs(o.Stack,{sx:{gap:"10px"},children:[x.length>0&&e.jsx(o.Stack,{direction:"row",flexWrap:"wrap",sx:{gap:"8px"},children:x.map(C=>e.jsx(o.Chip,{label:T(C),size:"small",variant:"outlined",onDelete:()=>B(C.user_id),sx:{...de,borderColor:y.borderDark,color:y.textSecondary,"& .MuiChip-deleteIcon":{color:y.textAccent,"&:hover":{color:y.error}}}},C.user_id))}),e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px"},children:[e.jsxs(o.Select,{value:u,onChange:C=>h(C.target.value),displayEmpty:!0,size:"small",sx:{flex:1,fontFamily:L.fontFamily,fontSize:"13px","& .MuiOutlinedInput-notchedOutline":{borderColor:y.borderDark},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:y.primary},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:y.primary}},children:[e.jsx(o.MenuItem,{value:"",disabled:!0,children:e.jsx(o.Typography,{sx:{color:y.textAccent,fontSize:"13px"},children:f?"Loading users...":"Select a user..."})}),w.map(C=>e.jsx(o.MenuItem,{value:C.id,children:e.jsx(o.Typography,{sx:{fontSize:"13px",color:y.textSecondary},children:`${C.name} ${C.surname}`.trim()||C.email})},C.id))]}),e.jsx(o.Button,{variant:"outlined",size:"small",onClick:S,disabled:k||!u,sx:V,children:"Add"})]}),k&&e.jsx(o.CircularProgress,{size:14,sx:{color:y.primary}})]})}function De({modelId:t,item:l,value:c,onValueChanged:n,apiServices:r}){var T;const b=l.config,f=Array.isArray(b==null?void 0:b.levels)?b.levels:[],x=((T=c==null?void 0:c.value_json)==null?void 0:T.level)??"",[u,h]=s.useState(x),[k,g]=s.useState(!1),w=s.useCallback(async S=>{h(S),g(!0);try{await(r==null?void 0:r.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_json:{level:S}})),n==null||n()}catch{}finally{g(!1)}},[t,l.id,n,r]);return e.jsxs(o.Stack,{sx:{gap:"8px"},children:[e.jsx(o.RadioGroup,{value:u,onChange:S=>w(S.target.value),children:f.map(S=>e.jsx(o.FormControlLabel,{value:S,control:e.jsx(o.Radio,{size:"small",sx:{color:y.borderDark,"&.Mui-checked":{color:y.primary}}}),label:e.jsx(o.Typography,{sx:{fontFamily:L.fontFamily,fontSize:"13px",color:y.textSecondary},children:S}),sx:{marginLeft:0}},S))}),k&&e.jsx(o.CircularProgress,{size:14,sx:{color:y.primary}})]})}function $e({modelId:t,item:l,value:c,onValueChanged:n,apiServices:r}){const b=l.config,x=(Array.isArray(b==null?void 0:b.defaultItems)?b.defaultItems:[]).map(d=>({label:d,checked:!1})),u=Array.isArray(c==null?void 0:c.value_json)?c.value_json:x,[h,k]=s.useState(u.length>0?u:x),[g,w]=s.useState(!1),[T,S]=s.useState(""),B=s.useCallback(async d=>{w(!0);try{await(r==null?void 0:r.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_json:d})),n==null||n()}catch{}finally{w(!1)}},[t,l.id,n,r]),C=s.useCallback(d=>{const v=h.map((E,W)=>W===d?{...E,checked:!E.checked}:E);k(v),B(v)},[h,B]),D=s.useCallback(()=>{if(!T.trim())return;const d=[...h,{label:T.trim(),checked:!1}];k(d),S(""),B(d)},[h,T,B]),M=s.useCallback(d=>{const v=h.filter((E,W)=>W!==d);k(v),B(v)},[h,B]);return e.jsxs(o.Stack,{sx:{gap:"10px"},children:[h.map((d,v)=>e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"10px"},children:[e.jsx(o.Checkbox,{checked:d.checked,onChange:()=>C(v),size:"small",sx:{color:y.borderDark,"&.Mui-checked":{color:y.primary},padding:"4px"}}),e.jsx(o.Typography,{sx:{flex:1,fontFamily:L.fontFamily,fontSize:"13px",textDecoration:d.checked?"line-through":"none",color:d.checked?y.textAccent:y.textSecondary},children:d.label}),e.jsx(o.IconButton,{size:"small",onClick:()=>M(v),"aria-label":"Remove item",sx:{color:y.textAccent,"&:hover":{color:y.error}},children:e.jsx(Q,{size:14})})]},v)),e.jsxs(o.Stack,{direction:"row",sx:{gap:"10px"},children:[e.jsx(o.TextField,{placeholder:"Add checklist item...",value:T,onChange:d=>S(d.target.value),onKeyDown:d=>d.key==="Enter"&&D(),size:"small",sx:{flex:1,...ie}}),e.jsx(o.Button,{variant:"outlined",size:"small",onClick:D,sx:V,children:"Add"})]}),g&&e.jsx(o.CircularProgress,{size:14,sx:{color:y.primary}})]})}function _e({modelId:t,item:l,value:c,onValueChanged:n,apiServices:r}){const{users:b,loading:f}=ce(r),x=Array.isArray(c==null?void 0:c.approvals)?c.approvals:[],[u,h]=s.useState(!1),[k,g]=s.useState(""),w=b.filter(d=>!x.some(v=>v.user_id===d.id)),T=d=>`${d.name||""} ${d.surname||""}`.trim()||d.email||`User #${d.user_id}`,S=s.useCallback(async(d,v)=>{h(!0);try{await(r==null?void 0:r.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}/approvals/${d}`,{status:v})),n==null||n()}catch{}finally{h(!1)}},[t,l.id,n,r]),B=s.useCallback(async()=>{if(k){h(!0);try{await(r==null?void 0:r.post(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}/approvals`,{userId:k})),g(""),n==null||n()}catch{}finally{h(!1)}}},[k,t,l.id,n,r]),C=s.useCallback(async d=>{h(!0);try{await(r==null?void 0:r.delete(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}/approvals/${d}`)),n==null||n()}catch{}finally{h(!1)}},[t,l.id,n,r]),D=d=>{switch(d){case"approved":return y.success;case"rejected":return y.error;default:return y.textAccent}},M=d=>{switch(d){case"approved":return y.successBg;case"rejected":return y.errorBg;default:return y.bgAccent}};return e.jsxs(o.Stack,{sx:{gap:"12px"},children:[x.map(d=>e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"10px",p:"12px 16px",borderRadius:"4px",border:`1px solid ${y.borderLight}`,backgroundColor:y.bgMain},children:[e.jsx(o.Typography,{sx:{flex:1,fontFamily:L.fontFamily,fontSize:"13px",color:y.textSecondary},children:T(d)}),e.jsx(o.Chip,{label:d.status.charAt(0).toUpperCase()+d.status.slice(1),size:"small",sx:{...de,color:D(d.status),backgroundColor:M(d.status),border:"none"}}),d.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(o.IconButton,{size:"small",onClick:()=>S(d.user_id,"approved"),sx:{color:y.success,"&:hover":{backgroundColor:y.successBg}},"aria-label":"Approve",children:e.jsx(J,{size:16})}),e.jsx(o.IconButton,{size:"small",onClick:()=>S(d.user_id,"rejected"),sx:{color:y.error,"&:hover":{backgroundColor:y.errorBg}},"aria-label":"Reject",children:e.jsx(Q,{size:16})})]}),e.jsx(o.IconButton,{size:"small",onClick:()=>C(d.user_id),sx:{color:y.textAccent,"&:hover":{color:y.error}},"aria-label":"Remove approver",children:e.jsx(H,{size:14})})]},d.user_id)),e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px"},children:[e.jsxs(o.Select,{value:k,onChange:d=>g(d.target.value),displayEmpty:!0,size:"small",sx:{flex:1,fontFamily:L.fontFamily,fontSize:"13px","& .MuiOutlinedInput-notchedOutline":{borderColor:y.borderDark},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:y.primary},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:y.primary}},children:[e.jsx(o.MenuItem,{value:"",disabled:!0,children:e.jsx(o.Typography,{sx:{color:y.textAccent,fontSize:"13px"},children:f?"Loading users...":"Select an approver..."})}),w.map(d=>e.jsx(o.MenuItem,{value:d.id,children:e.jsx(o.Typography,{sx:{fontSize:"13px",color:y.textSecondary},children:`${d.name} ${d.surname}`.trim()||d.email})},d.id))]}),e.jsx(o.Button,{variant:"outlined",size:"small",onClick:B,disabled:u||!k,sx:V,children:"Add Approver"})]}),u&&e.jsx(o.CircularProgress,{size:14,sx:{color:y.primary}})]})}function Ee({phase:t,modelId:l,onValueChanged:c,apiServices:n}){const r=Array.isArray(t.items)?t.items:[];return e.jsxs(o.Stack,{sx:{flex:1,overflowY:"auto",p:"24px",gap:"16px"},children:[e.jsxs(o.Stack,{sx:{gap:"4px"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"16px",color:"#344054"},children:t.name}),t.description&&e.jsx(o.Typography,{sx:{fontSize:"13px",color:"#667085"},children:t.description})]}),e.jsx(o.Box,{sx:{borderTop:"1px solid #E0E4E9"}}),r.length>0?e.jsx(o.Stack,{spacing:0,divider:e.jsx(o.Box,{sx:{borderTop:"1px solid #E0E4E9"}}),children:r.map(b=>e.jsxs(o.Stack,{sx:{py:"16px",gap:"10px"},children:[e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"8px"},children:[e.jsx(o.Typography,{sx:{fontWeight:500,color:"#344054",fontSize:"13px"},children:b.name}),b.is_required&&e.jsx(o.Typography,{sx:{color:"#F04438",fontSize:"11px"},children:"Required"})]}),b.description&&e.jsx(o.Typography,{sx:{color:"#667085",display:"block",fontSize:"12px"},children:b.description}),e.jsx(ae,{modelId:l,item:b,onValueChanged:c,apiServices:n})]},b.id))}):e.jsx(o.Typography,{sx:{textAlign:"center",color:"#667085",py:4},children:"No items configured for this phase"})]})}function Le({phases:t,progress:l,modelId:c,loading:n,onValueChanged:r,apiServices:b}){const[f,x]=s.useState(null);s.useEffect(()=>{t.length>0&&f===null&&x(t[0].id)},[t,f]);const u=s.useMemo(()=>t.find(k=>k.id===f)??null,[t,f]),h=s.useCallback(k=>{x(k)},[]);return n&&t.length===0?e.jsx(o.Stack,{alignItems:"center",sx:{py:4},children:e.jsx(o.CircularProgress,{size:24})}):t.length===0?e.jsx(o.Typography,{sx:{textAlign:"center",color:"#667085",py:4},children:"No lifecycle phases configured. Contact an administrator to set up the model lifecycle."}):e.jsxs(o.Box,{sx:{border:"1px solid #E0E4E9",borderRadius:"4px",backgroundColor:"#fff",overflow:"hidden",display:"flex",flexDirection:{xs:"column",md:"row"},minHeight:400},children:[e.jsx(Ie,{phases:t,progress:l,activePhaseId:f,onPhaseSelect:h}),e.jsx(o.Box,{sx:{flex:1,display:"flex",minWidth:0},children:u?e.jsx(Ee,{phase:u,modelId:c,onValueChanged:r,apiServices:b}):e.jsx(o.Stack,{alignItems:"center",justifyContent:"center",sx:{flex:1,p:"24px"},children:e.jsx(o.Typography,{sx:{color:"#667085"},children:"Select a phase from the sidebar"})})})]})}function We({progress:t,onPhaseClick:l}){const c=Array.isArray(t==null?void 0:t.phases)?t.phases:[];if(!t||c.length===0)return null;const n=(r,b)=>b===0?"#E0E4E9":r===b?"#079455":r>0?"#2E90FA":"#E0E4E9";return e.jsxs(o.Stack,{sx:{gap:"12px"},children:[e.jsxs(o.Stack,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"14px",color:"#344054"},children:"Lifecycle Progress"}),e.jsxs(o.Typography,{sx:{fontSize:"13px",color:"#667085"},children:[t.completion_percentage,"% complete (",t.filled_items,"/",t.total_items," items)"]})]}),e.jsx(o.Stack,{direction:"row",sx:{gap:"6px",width:"100%"},children:c.map(r=>{const b=r.total_items>0?r.filled_items/r.total_items*100:0,f=n(r.filled_items,r.total_items);return e.jsx(o.Tooltip,{title:`${r.phase_name}: ${r.filled_items}/${r.total_items} items`,arrow:!0,children:e.jsx(o.Box,{onClick:()=>l==null?void 0:l(r.phase_id),sx:{flex:1,height:8,borderRadius:3,overflow:"hidden",backgroundColor:"#E0E4E9",cursor:l?"pointer":"default","&:hover":l?{opacity:.8}:{},position:"relative"},children:e.jsx(o.Box,{sx:{width:`${b}%`,height:"100%",backgroundColor:f,borderRadius:3,transition:"width 0.3s ease"}})})},r.phase_id)})}),e.jsx(o.Stack,{direction:"row",sx:{gap:"6px",width:"100%"},children:c.map(r=>e.jsx(o.Typography,{sx:{flex:1,textAlign:"center",fontSize:"11px",color:"#667085",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:l?"pointer":"default"},onClick:()=>l==null?void 0:l(r.phase_id),children:r.phase_name},r.phase_id))})]})}function Oe({phase:t,modelId:l,expanded:c,onToggle:n,onValueChanged:r,apiServices:b}){const f=Array.isArray(t.items)?t.items:[],x=f.length,u=f.filter(g=>{const w=g.value;return w?!!(w.value_text||w.value_json||w.files&&w.files.length>0):!1}).length,k=x>0&&u===x?"#079455":u>0?"#2E90FA":"#667085";return e.jsxs(o.Accordion,{expanded:c,onChange:n,disableGutters:!0,sx:{border:"1px solid #E0E4E9",borderRadius:"4px !important","&:before":{display:"none"},boxShadow:"none",mb:"12px",overflow:"hidden"},children:[e.jsx(o.AccordionSummary,{expandIcon:e.jsx(se,{size:16,style:{transform:c?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease",color:"#667085"}}),sx:{backgroundColor:c?"#F9FAFB":"#fff","&:hover":{backgroundColor:"#F9FAFB"},px:"16px",py:"12px","& .MuiAccordionSummary-expandIconWrapper":{transform:"none !important"}},children:e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{width:"100%",gap:"12px"},children:[e.jsxs(o.Stack,{sx:{flex:1},children:[e.jsx(o.Typography,{sx:{fontWeight:600,color:"#344054",fontSize:"14px"},children:t.name}),t.description&&e.jsx(o.Typography,{sx:{color:"#667085",fontSize:"12px",mt:"4px"},children:t.description})]}),e.jsx(o.Chip,{label:`${u} / ${x}`,size:"small",variant:"outlined",sx:{color:k,borderColor:k}})]})}),e.jsx(o.AccordionDetails,{sx:{p:0},children:e.jsxs(o.Stack,{spacing:0,divider:e.jsx(o.Box,{sx:{borderTop:"1px solid #E0E4E9"}}),children:[f.map(g=>e.jsxs(o.Stack,{sx:{px:"16px",py:"16px",gap:"10px"},children:[e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"8px"},children:[e.jsx(o.Typography,{sx:{fontWeight:500,color:"#344054",fontSize:"13px"},children:g.name}),g.is_required&&e.jsx(o.Typography,{sx:{color:"#F04438",fontSize:"11px"},children:"Required"})]}),g.description&&e.jsx(o.Typography,{sx:{color:"#667085",display:"block",fontSize:"12px"},children:g.description}),e.jsx(ae,{modelId:l,item:g,onValueChanged:r,apiServices:b})]},g.id)),f.length===0&&e.jsx(o.Typography,{sx:{textAlign:"center",color:"#667085",py:4},children:"No items configured for this phase"})]})})]})}function xe({modelId:t,apiServices:l}){var D;const{phases:c,loading:n,refresh:r}=Te(t,l),{progress:b,refresh:f}=Me(t,l),[x,u]=s.useState("stepper"),[h,k]=s.useState(()=>new Set),g=s.useRef(new Map),w=s.useCallback(()=>{r(),f()},[r,f]),T=s.useCallback((M,d)=>{d&&u(d)},[]),S=s.useCallback(M=>{k(d=>{const v=new Set(d);return v.has(M)?v.delete(M):v.add(M),v})},[]),B=s.useCallback(M=>{k(v=>{const E=new Set(v);return E.add(M),E});const d=g.current.get(M);d&&d.scrollIntoView({behavior:"smooth",block:"start"})},[]),C=(D=c[0])==null?void 0:D.id;return C!==void 0&&h.size===0&&c.length>0&&k(new Set([C])),e.jsxs(o.Stack,{sx:{gap:"16px"},children:[e.jsx(o.Stack,{direction:"row",justifyContent:"flex-end",children:e.jsxs(o.ToggleButtonGroup,{value:x,exclusive:!0,onChange:T,size:"small",sx:{"& .MuiToggleButton-root":{px:"12px",py:"4px",fontSize:"13px",textTransform:"none",gap:"6px",color:"#667085",borderColor:"#E0E4E9","&.Mui-selected":{backgroundColor:"#F9FAFB",color:"#344054"}}},children:[e.jsxs(o.ToggleButton,{value:"accordion","aria-label":"Accordion view",children:[e.jsx(Fe,{size:16}),"Accordion"]}),e.jsxs(o.ToggleButton,{value:"stepper","aria-label":"Stepper view",children:[e.jsx(we,{size:16}),"Stepper"]})]})}),x==="accordion"?e.jsxs(o.Stack,{sx:{gap:"16px"},children:[e.jsx(We,{progress:b,onPhaseClick:B}),c.map(M=>e.jsx("div",{ref:d=>{d?g.current.set(M.id,d):g.current.delete(M.id)},children:e.jsx(Oe,{phase:M,modelId:t,expanded:h.has(M.id),onToggle:()=>S(M.id),onValueChanged:w,apiServices:l})},M.id))]}):e.jsx(Le,{phases:c,progress:b,modelId:t,loading:n,onValueChanged:w,apiServices:l})]})}const i={primary:"#13715B",primaryDark:"#10614d",textPrimary:"#1c2130",textSecondary:"#344054",textTertiary:"#475467",textAccent:"#838c99",bgMain:"#FFFFFF",bgAlt:"#FCFCFD",bgFill:"#F4F4F4",bgAccent:"#f9fafb",borderLight:"#eaecf0",borderDark:"#d0d5dd",error:"#f04438",errorBg:"#FEE2E2"},I={fontFamily:"'Inter', system-ui, -apple-system, sans-serif"},G={textTransform:"none",fontWeight:500,fontSize:"13px",fontFamily:I.fontFamily,borderRadius:"4px",backgroundColor:i.primary,color:"#fff","&:hover":{backgroundColor:i.primaryDark}},q={textTransform:"none",fontWeight:400,fontSize:"13px",fontFamily:I.fontFamily,borderRadius:"4px",borderColor:i.borderDark,color:i.textSecondary,"&:hover":{borderColor:i.borderDark,backgroundColor:i.bgFill}},Y={"& .MuiOutlinedInput-root":{backgroundColor:i.bgMain,borderRadius:"4px",fontSize:"13px",fontFamily:I.fontFamily,"& .MuiOutlinedInput-notchedOutline":{borderColor:i.borderDark,borderWidth:"1px"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:i.borderDark},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:i.primary,borderWidth:"1px"}}},me={backgroundColor:i.bgMain,borderRadius:"4px",fontSize:"13px",fontFamily:I.fontFamily,"& .MuiOutlinedInput-notchedOutline":{borderColor:i.borderDark},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:i.borderDark},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:i.primary}},Ne={border:`1px solid ${i.borderLight}`,borderRadius:"4px !important","&:before":{display:"none"},boxShadow:"none",overflow:"hidden"},je={backgroundColor:i.bgAccent,px:"16px",py:"10px",minHeight:"44px","& .MuiAccordionSummary-expandIconWrapper":{transform:"none !important",order:-1,mr:"10px"},"& .MuiAccordionSummary-content":{margin:0,alignItems:"center",gap:"10px"}},R={"& .MuiDialog-paper":{borderRadius:"8px",backgroundColor:i.bgAlt}},qe=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"documents",label:"Documents"},{value:"people",label:"People"},{value:"classification",label:"Classification"},{value:"checklist",label:"Checklist"},{value:"approval",label:"Approval"}];function Ue({apiServices:t}){const{phases:l,loading:c,refresh:n,setPhases:r}=ve(t,!0),[b,f]=s.useState(!1),[x,u]=s.useState(!1),[h,k]=s.useState(""),[g,w]=s.useState(""),[T,S]=s.useState(null),[B,C]=s.useState(""),[D,M]=s.useState("text"),[d,v]=s.useState(!1),[E,W]=s.useState(null),[K,Z]=s.useState(null),[Ye,j]=s.useState(null),[X,ee]=s.useState(""),[ye,Ke]=s.useState(new Set),Ze=s.useCallback(p=>{Ke(A=>{const a=new Set(A);return a.has(p)?a.delete(p):a.add(p),a})},[]),Xe=s.useCallback(async()=>{if(!(!h.trim()||!t)){f(!0);try{await t.post("/plugins/model-lifecycle/phases",{name:h.trim(),description:g.trim()||void 0}),k(""),w(""),n()}catch{}finally{f(!1)}}},[h,g,n,t]),Je=s.useCallback(async()=>{if(!(E===null||!t)){f(!0);try{await t.delete(`/plugins/model-lifecycle/phases/${E}`),n()}catch{}finally{f(!1),W(null)}}},[E,n,t]),fe=s.useCallback(async(p,A)=>{const a=l.findIndex(U=>U.id===p);if(a<0||!t)return;const F=A==="up"?a-1:a+1;if(F<0||F>=l.length)return;const P=[...l],z=[...l];[z[a],z[F]]=[z[F],z[a]],r(z);const $=z.map(U=>U.id);try{await t.put("/plugins/model-lifecycle/phases/reorder",{orderedIds:$})}catch{r(P)}},[l,r,t]),oe=s.useCallback(async(p,A)=>{var P;const a=A.trim();if(!a||!t){j(null);return}const F=((P=l.find(z=>z.id===p))==null?void 0:P.name)??"";if(a===F){j(null);return}r(z=>z.map($=>$.id===p?{...$,name:a}:$)),j(null);try{await t.put(`/plugins/model-lifecycle/phases/${p}`,{name:a})}catch{r(z=>z.map($=>$.id===p?{...$,name:F}:$))}},[l,r,t]),Qe=s.useCallback(async(p,A)=>{if(t){r(a=>a.map(F=>F.id===p?{...F,is_active:A}:F));try{await t.put(`/plugins/model-lifecycle/phases/${p}`,{is_active:A})}catch{r(a=>a.map(F=>F.id===p?{...F,is_active:!A}:F))}}},[r,t]),Ve=s.useCallback(async p=>{if(!(!B.trim()||!t)){f(!0);try{await t.post(`/plugins/model-lifecycle/phases/${p}/items`,{name:B.trim(),item_type:D,is_required:d}),C(""),M("text"),v(!1),S(null),n()}catch{}finally{f(!1)}}},[B,D,d,n,t]),Re=s.useCallback(async()=>{if(!(K===null||!t)){f(!0);try{await t.delete(`/plugins/model-lifecycle/items/${K}`),n()}catch{}finally{f(!1),Z(null)}}},[K,n,t]),eo=s.useCallback(async(p,A)=>{if(t){r(a=>a.map(F=>{var P;return{...F,items:(P=F.items)==null?void 0:P.map(z=>z.id===p?{...z,is_required:A}:z)}}));try{await t.put(`/plugins/model-lifecycle/items/${p}`,{is_required:A})}catch{r(a=>a.map(F=>{var P;return{...F,items:(P=F.items)==null?void 0:P.map(z=>z.id===p?{...z,is_required:!A}:z)}}))}}},[r,t]),he=s.useCallback(async(p,A,a,F)=>{const P=A.findIndex(O=>O.id===a);if(P<0||!t)return;const z=F==="up"?P-1:P+1;if(z<0||z>=A.length)return;const $=[...A];[$[P],$[z]]=[$[z],$[P]],r(O=>O.map(m=>m.id===p?{...m,items:$}:m));const U=$.map(O=>O.id);try{await t.put(`/plugins/model-lifecycle/phases/${p}/items/reorder`,{orderedIds:U})}catch{r(O=>O.map(m=>m.id===p?{...m,items:A}:m))}},[r,t]);return e.jsxs(e.Fragment,{children:[e.jsxs(o.Stack,{sx:{gap:"16px"},children:[c?e.jsx(o.Stack,{alignItems:"center",sx:{py:2},children:e.jsx(o.CircularProgress,{size:24,sx:{color:i.primary}})}):l.length===0?e.jsx(o.Typography,{sx:{fontSize:"13px",fontFamily:I.fontFamily,color:i.textTertiary},children:"No lifecycle phases configured yet. Click the button below to add phases."}):e.jsxs(o.Stack,{sx:{gap:"8px"},children:[e.jsxs(o.Typography,{sx:{fontWeight:600,fontSize:"13px",fontFamily:I.fontFamily,color:i.textSecondary},children:["Configured Phases (",l.filter(p=>p.is_active).length," active)"]}),l.map((p,A)=>{var a;return e.jsxs(o.Box,{sx:{display:"flex",alignItems:"center",gap:"12px",py:"8px",px:"12px",backgroundColor:p.is_active?i.bgAccent:i.bgFill,borderRadius:"4px",border:`1px solid ${i.borderLight}`,opacity:p.is_active?1:.6},children:[e.jsxs(o.Typography,{sx:{fontSize:"12px",fontWeight:600,fontFamily:I.fontFamily,color:i.textAccent,minWidth:"20px"},children:[A+1,"."]}),e.jsx(o.Typography,{sx:{flex:1,fontSize:"13px",fontWeight:500,fontFamily:I.fontFamily,color:i.textPrimary},children:p.name}),e.jsx(o.Chip,{label:`${((a=p.items)==null?void 0:a.length)||0} items`,size:"small",sx:{fontSize:"11px",fontFamily:I.fontFamily,height:"20px",backgroundColor:i.bgFill,color:i.textTertiary,borderRadius:"4px"}}),!p.is_active&&e.jsx(o.Chip,{label:"Inactive",size:"small",sx:{fontSize:"11px",fontFamily:I.fontFamily,height:"20px",backgroundColor:i.errorBg,color:i.error,borderRadius:"4px"}})]},p.id)})]}),e.jsx(o.Button,{variant:"outlined",startIcon:e.jsx(Se,{size:16}),onClick:()=>u(!0),sx:{...q,alignSelf:"flex-start"},children:"Configure Phases"})]}),e.jsxs(o.Dialog,{open:x,onClose:()=>u(!1),maxWidth:"md",fullWidth:!0,sx:R,PaperProps:{sx:{maxHeight:"85vh"}},children:[e.jsxs(o.DialogTitle,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${i.borderLight}`,py:"12px",px:"20px"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"16px",fontFamily:I.fontFamily,color:i.textPrimary},children:"Configure Model Lifecycle"}),e.jsx(o.IconButton,{onClick:()=>u(!1),size:"small","aria-label":"Close",sx:{color:i.textTertiary},children:e.jsx(Q,{size:18})})]}),e.jsx(o.DialogContent,{sx:{p:"20px"},children:c&&l.length===0?e.jsx(o.Stack,{alignItems:"center",sx:{py:4},children:e.jsx(o.CircularProgress,{sx:{color:i.primary}})}):e.jsxs(o.Stack,{sx:{gap:"12px"},children:[l.map((p,A)=>e.jsxs(o.Accordion,{expanded:ye.has(p.id),onChange:()=>Ze(p.id),disableGutters:!0,sx:{...Ne,opacity:p.is_active?1:.6},children:[e.jsxs(o.AccordionSummary,{sx:je,children:[e.jsx(se,{size:16,color:i.textTertiary,style:{transform:ye.has(p.id)?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease"}}),Ye===p.id?e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{flex:1,gap:"6px",mr:"8px"},onClick:a=>a.stopPropagation(),children:[e.jsx(o.TextField,{value:X,onChange:a=>ee(a.target.value),onBlur:()=>oe(p.id,X),onKeyDown:a=>{a.key==="Enter"?oe(p.id,X):a.key==="Escape"&&j(null)},autoFocus:!0,size:"small",sx:{...Y,flex:1}}),e.jsx(o.IconButton,{size:"small",onClick:()=>oe(p.id,X),"aria-label":"Save phase name",sx:{color:i.primary},children:e.jsx(J,{size:16})})]}):e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{flex:1,gap:"6px","&:hover .phase-edit-icon":{opacity:1}},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"13px",fontFamily:I.fontFamily,color:i.textPrimary,cursor:"text"},onDoubleClick:a=>{a.stopPropagation(),j(p.id),ee(p.name)},children:p.name}),e.jsx(o.IconButton,{className:"phase-edit-icon",size:"small",sx:{opacity:0,transition:"opacity 0.2s",p:"2px",color:i.textTertiary},onClick:a=>{a.stopPropagation(),j(p.id),ee(p.name)},"aria-label":"Edit phase name",children:e.jsx(ze,{size:14})})]}),e.jsx(o.FormControlLabel,{control:e.jsx(o.Switch,{size:"small",checked:p.is_active,onChange:a=>{a.stopPropagation(),Qe(p.id,a.target.checked)},sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:i.primary},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:i.primary}}}),label:e.jsx(o.Typography,{sx:{fontSize:"12px",fontFamily:I.fontFamily,color:i.textTertiary},children:"Active"}),onClick:a=>a.stopPropagation(),sx:{mr:0}}),e.jsx(o.IconButton,{size:"small",disabled:A===0,onClick:a=>{a.stopPropagation(),fe(p.id,"up")},"aria-label":"Move phase up",sx:{opacity:A===0?.4:1,color:i.textTertiary},children:e.jsx(le,{size:16})}),e.jsx(o.IconButton,{size:"small",disabled:A===l.length-1,onClick:a=>{a.stopPropagation(),fe(p.id,"down")},"aria-label":"Move phase down",sx:{opacity:A===l.length-1?.4:1,color:i.textTertiary},children:e.jsx(re,{size:16})}),e.jsx(o.IconButton,{size:"small",onClick:a=>{a.stopPropagation(),W(p.id)},sx:{color:i.error},"aria-label":"Delete phase",children:e.jsx(H,{size:16})})]}),e.jsx(o.AccordionDetails,{sx:{px:"16px",py:"12px",backgroundColor:i.bgMain},children:e.jsxs(o.Stack,{spacing:0,children:[(Array.isArray(p.items)?p.items:[]).map((a,F)=>{var P,z;return e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"12px",py:"10px",borderBottom:`1px solid ${i.borderLight}`},children:[e.jsx(o.Typography,{sx:{flex:1,fontSize:"13px",fontFamily:I.fontFamily,color:i.textSecondary},children:a.name}),e.jsx(o.Chip,{label:a.item_type,size:"small",variant:"outlined",sx:{fontSize:"11px",fontFamily:I.fontFamily,borderColor:i.borderDark,color:i.textTertiary,borderRadius:"4px"}}),e.jsx(o.FormControlLabel,{control:e.jsx(o.Switch,{size:"small",checked:a.is_required,onChange:$=>eo(a.id,$.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:i.primary},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:i.primary}}}),label:e.jsx(o.Typography,{sx:{fontSize:"11px",fontFamily:I.fontFamily,color:i.textTertiary},children:"Required"}),sx:{mr:0}}),e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"4px",pl:"12px",borderLeft:`1px solid ${i.borderLight}`},children:[e.jsx(o.IconButton,{size:"small",disabled:F===0,onClick:()=>he(p.id,p.items??[],a.id,"up"),"aria-label":"Move item up",sx:{opacity:F===0?.4:1,color:i.textTertiary},children:e.jsx(le,{size:14})}),e.jsx(o.IconButton,{size:"small",disabled:F===(((P=p.items)==null?void 0:P.length)??0)-1,onClick:()=>he(p.id,p.items??[],a.id,"down"),"aria-label":"Move item down",sx:{opacity:F===(((z=p.items)==null?void 0:z.length)??0)-1?.4:1,color:i.textTertiary},children:e.jsx(re,{size:14})}),e.jsx(o.IconButton,{size:"small",onClick:()=>Z(a.id),sx:{color:i.error},"aria-label":"Delete item",children:e.jsx(H,{size:14})})]})]},a.id)}),T===p.id?e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px",pt:"12px"},alignItems:"center",children:[e.jsx(o.TextField,{placeholder:"Item name",value:B,onChange:a=>C(a.target.value),size:"small",sx:{...Y,flex:1}}),e.jsx(o.Select,{value:D,onChange:a=>M(a.target.value),size:"small",sx:{...me,minWidth:120},children:qe.map(a=>e.jsx(o.MenuItem,{value:a.value,sx:{fontSize:"13px"},children:a.label},a.value))}),e.jsx(o.FormControlLabel,{control:e.jsx(o.Switch,{size:"small",checked:d,onChange:a=>v(a.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:i.primary},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:i.primary}}}),label:e.jsx(o.Typography,{sx:{fontSize:"11px",fontFamily:I.fontFamily,color:i.textTertiary},children:"Req"}),sx:{ml:"4px"}}),e.jsx(o.Button,{variant:"contained",size:"small",onClick:()=>Ve(p.id),disabled:!B.trim()||b,sx:G,children:"Add"}),e.jsx(o.Button,{variant:"text",size:"small",onClick:()=>{S(null),C("")},sx:{...q,border:"none"},children:"Cancel"})]}):e.jsx(o.Button,{variant:"text",size:"small",startIcon:e.jsx(ne,{size:14}),onClick:()=>S(p.id),sx:{alignSelf:"flex-start",mt:"12px",textTransform:"none",fontSize:"13px",fontFamily:I.fontFamily,color:i.primary,"&:hover":{backgroundColor:i.bgAccent}},children:"Add item"})]})})]},p.id)),e.jsxs(o.Box,{sx:{border:`1px dashed ${i.borderDark}`,borderRadius:"4px",p:"16px",backgroundColor:i.bgMain},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"13px",fontFamily:I.fontFamily,color:i.textSecondary,mb:"12px"},children:"Add new phase"}),e.jsxs(o.Stack,{sx:{gap:"10px"},children:[e.jsx(o.TextField,{placeholder:"Phase name",value:h,onChange:p=>k(p.target.value),size:"small",fullWidth:!0,sx:Y}),e.jsx(o.TextField,{placeholder:"Description (optional)",value:g,onChange:p=>w(p.target.value),size:"small",multiline:!0,rows:2,fullWidth:!0,sx:Y}),e.jsx(o.Button,{variant:"contained",size:"small",startIcon:e.jsx(ne,{size:14}),onClick:Xe,disabled:!h.trim()||b,sx:{...G,alignSelf:"flex-start"},children:"Create phase"})]})]})]})}),e.jsx(o.DialogActions,{sx:{px:"20px",py:"12px",borderTop:`1px solid ${i.borderLight}`},children:e.jsx(o.Button,{variant:"outlined",onClick:()=>u(!1),sx:q,children:"Close"})})]}),e.jsxs(o.Dialog,{open:E!==null,onClose:()=>W(null),sx:R,children:[e.jsx(o.DialogTitle,{sx:{fontWeight:600,fontSize:"16px",fontFamily:I.fontFamily,color:i.textPrimary},children:"Delete phase"}),e.jsx(o.DialogContent,{children:e.jsx(o.Typography,{sx:{fontSize:"13px",fontFamily:I.fontFamily,color:i.textSecondary},children:"Delete this phase and all its items? This cannot be undone."})}),e.jsxs(o.DialogActions,{sx:{px:"20px",py:"12px"},children:[e.jsx(o.Button,{onClick:()=>W(null),sx:q,children:"Cancel"}),e.jsx(o.Button,{onClick:Je,variant:"contained",disabled:b,sx:{...G,backgroundColor:i.error,"&:hover":{backgroundColor:"#dc2626"}},children:"Delete"})]})]}),e.jsxs(o.Dialog,{open:K!==null,onClose:()=>Z(null),sx:R,children:[e.jsx(o.DialogTitle,{sx:{fontWeight:600,fontSize:"16px",fontFamily:I.fontFamily,color:i.textPrimary},children:"Delete item"}),e.jsx(o.DialogContent,{children:e.jsx(o.Typography,{sx:{fontSize:"13px",fontFamily:I.fontFamily,color:i.textSecondary},children:"Delete this item? This cannot be undone."})}),e.jsxs(o.DialogActions,{sx:{px:"20px",py:"12px"},children:[e.jsx(o.Button,{onClick:()=>Z(null),sx:q,children:"Cancel"}),e.jsx(o.Button,{onClick:Re,variant:"contained",disabled:b,sx:{...G,backgroundColor:i.error,"&:hover":{backgroundColor:"#dc2626"}},children:"Delete"})]})]})]})}const He=({modelId:t})=>{const l=te.useNavigate(),c=n=>{n.stopPropagation(),l(`/model-inventory/models/${t}`)};return e.jsx(o.Tooltip,{title:"View Lifecycle",arrow:!0,placement:"top",children:e.jsx(o.IconButton,{size:"small",onClick:c,sx:{color:"#667085","&:hover":{color:"#13715B",backgroundColor:"rgba(19, 113, 91, 0.08)"}},children:e.jsx(Ce,{size:16})})})};function Ge({modelId:t,apiServices:l}){const c=o.useTheme(),n=te.useNavigate(),[r,b]=s.useState(null),[f,x]=s.useState(!0);return s.useEffect(()=>{if(!t||!l)return;(async()=>{var h;x(!0);try{const k=await l.get(`/modelInventory/${t}`);b(((h=k.data)==null?void 0:h.data)||k.data)}catch(k){console.error("Failed to fetch model:",k)}finally{x(!1)}})()},[t,l]),f?e.jsx(o.Stack,{alignItems:"center",justifyContent:"center",sx:{py:"64px"},children:e.jsx(o.CircularProgress,{})}):r?e.jsxs(o.Stack,{spacing:0,sx:{gap:"16px",maxWidth:"1400px",width:"100%"},children:[e.jsx(o.Box,{sx:{border:`1px solid ${c.palette.divider}`,borderRadius:"4px",p:"20px",backgroundColor:c.palette.background.paper},children:e.jsxs(o.Stack,{sx:{gap:"16px"},children:[e.jsxs(o.Box,{component:"button",onClick:()=>n("/model-inventory"),sx:{display:"flex",alignItems:"center",gap:"8px",background:"none",border:"none",cursor:"pointer",padding:0,color:c.palette.text.secondary,fontSize:"14px","&:hover":{color:c.palette.text.primary}},children:[e.jsx(be,{size:16}),"Back to Model Inventory"]}),e.jsx(o.Stack,{direction:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",sx:{gap:"16px"},children:e.jsxs(o.Stack,{sx:{gap:"6px"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"16px",color:c.palette.text.primary},children:r.model||r.provider_model}),e.jsxs(o.Stack,{direction:"row",sx:{gap:"16px"},children:[r.provider&&e.jsxs(o.Typography,{sx:{fontSize:"13px",color:c.palette.text.secondary},children:["Provider: ",e.jsx("strong",{children:r.provider})]}),r.version&&e.jsxs(o.Typography,{sx:{fontSize:"13px",color:c.palette.text.secondary},children:["Version: ",e.jsx("strong",{children:r.version})]})]})]})})]})}),e.jsx(xe,{modelId:t,apiServices:l})]}):e.jsx(o.Stack,{alignItems:"center",justifyContent:"center",sx:{py:"64px"},children:e.jsx(o.Typography,{children:"Model not found"})})}return N.ModelLifecycleConfig=Ue,N.ModelLifecycleDetail=Ge,N.ModelLifecycleTab=xe,N.ViewLifecycleButton=He,Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),N}({},jsxRuntime,React,MUI,ReactRouterDOM);
//# sourceMappingURL=index.esm.js.map
