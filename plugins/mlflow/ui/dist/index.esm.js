var PluginMLFlow=function(v,e,h,o){"use strict";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var z={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=g=>g.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),w=(g,b)=>{const x=h.forwardRef(({color:C="currentColor",size:a=24,strokeWidth:t=2,absoluteStrokeWidth:f,className:d="",children:p,...y},s)=>h.createElement("svg",{ref:s,...z,width:a,height:a,stroke:C,strokeWidth:f?Number(t)*24/Number(a):t,className:["lucide",`lucide-${B(g)}`,d].join(" "),...y},[...b.map(([c,i])=>h.createElement(c,i)),...Array.isArray(p)?p:[p]]));return x.displayName=`${g}`,x};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=w("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=w("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=w("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=w("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),P=g=>e.jsx(L,{size:16,...g}),F=({apiServices:g})=>{const[b,x]=h.useState(!1),[C,a]=h.useState(null),[t,f]=h.useState(null),[d,p]=h.useState([]),[y,s]=h.useState(0),[c,i]=h.useState(10),M=g||{get:async r=>({data:await(await fetch(`/api${r}`)).json()}),post:async(r,n)=>({data:await(await fetch(`/api${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json()})},k=h.useMemo(()=>{const r=d.reduce((l,U)=>{const S=(U.lifecycle_stage||"").toLowerCase();return S==="production"?l.active+=1:S==="staging"?l.staging+=1:S==="archived"&&(l.archived+=1),l},{active:0,staging:0,archived:0}),n=new Set(d.map(l=>l.experiment_id).filter(Boolean)).size;return{total:d.length,active:r.active,staging:r.staging,archived:r.archived,experiments:n}},[d]),T=r=>new Date(r).toLocaleDateString(),u=async()=>{var r;x(!0),a(null);try{const n=await M.get("/plugins/mlflow/models");if((r=n.data)!=null&&r.data){const l=n.data.data;"models"in l&&Array.isArray(l.models)?(l.configured?l.connected===!1?a(l.message||"MLFlow server is not reachable."):l.error&&a(l.error):a("Configure the MLFlow plugin to start syncing live data."),p(l.models)):p([])}else p([])}catch{a("Unable to reach the MLFlow backend."),p([])}finally{x(!1)}};h.useEffect(()=>{u()},[]);const A=async()=>{var r,n;x(!0),a(null);try{await M.post("/plugins/mlflow/sync"),await u()}catch(l){console.error("Error syncing MLflow data:",l),await u(),(n=(r=l.response)==null?void 0:r.data)!=null&&n.message?a(`Sync failed: ${l.response.data.message}`):a("Failed to sync with MLflow server. Showing cached data.")}},j=r=>{f(r)},E=()=>{f(null)},$=h.useCallback((r,n)=>{s(n)},[]),N=h.useCallback(r=>{i(parseInt(r.target.value,10)),s(0)},[]),O=h.useMemo(()=>{if(!d.length)return"0 - 0";const r=y*c+1,n=Math.min(y*c+c,d.length);return`${r} - ${n}`},[y,c,d.length]),G=d.slice(y*c,y*c+c);return b?e.jsxs(o.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},children:[e.jsx(o.CircularProgress,{}),e.jsx(o.Typography,{variant:"body2",sx:{ml:2},children:"Loading MLFlow data..."})]}):e.jsxs(o.Box,{sx:{p:3,maxWidth:"100%",overflowX:"hidden"},children:[C&&e.jsx(o.Alert,{severity:"warning",sx:{mb:3},children:C}),e.jsx(o.Box,{sx:{mb:2,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:2,width:"100%"},children:e.jsx(o.Button,{variant:"outlined",startIcon:e.jsx(_,{size:16}),onClick:A,disabled:b,children:"Sync"})}),e.jsxs(o.Box,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap"},children:[e.jsx(o.Card,{sx:{flex:"1 1 200px",minWidth:150},children:e.jsxs(o.CardContent,{children:[e.jsx(o.Typography,{variant:"body2",color:"text.secondary",children:"Models"}),e.jsx(o.Typography,{variant:"h4",fontWeight:600,children:k.total})]})}),e.jsx(o.Card,{sx:{flex:"1 1 200px",minWidth:150},children:e.jsxs(o.CardContent,{children:[e.jsx(o.Typography,{variant:"body2",color:"text.secondary",children:"Active"}),e.jsx(o.Typography,{variant:"h4",fontWeight:600,children:k.active})]})}),e.jsx(o.Card,{sx:{flex:"1 1 200px",minWidth:150},children:e.jsxs(o.CardContent,{children:[e.jsx(o.Typography,{variant:"body2",color:"text.secondary",children:"Staging"}),e.jsx(o.Typography,{variant:"h4",fontWeight:600,children:k.staging})]})}),e.jsx(o.Card,{sx:{flex:"1 1 200px",minWidth:150},children:e.jsxs(o.CardContent,{children:[e.jsx(o.Typography,{variant:"body2",color:"text.secondary",children:"Experiments"}),e.jsx(o.Typography,{variant:"h4",fontWeight:600,children:k.experiments})]})})]}),e.jsx(o.Box,{sx:{mt:4,mb:2},children:d.length===0&&!b?e.jsx(o.Box,{sx:{textAlign:"center",py:4,color:"text.secondary"},children:e.jsx(o.Typography,{children:"No MLFlow runs have been synced yet. Configure the integration and click Sync to pull the latest models."})}):e.jsx(o.TableContainer,{sx:{border:"1px solid #d0d5dd",borderRadius:"8px"},children:e.jsxs(o.Table,{sx:{minWidth:800},children:[e.jsx(o.TableHead,{sx:{backgroundColor:"#f9fafb"},children:e.jsx(o.TableRow,{children:["Model Name","Version","Status","Created","Last Updated","Description","Actions"].map(r=>e.jsx(o.TableCell,{sx:{fontWeight:600,fontSize:"12px",textTransform:"uppercase",color:"#475467"},children:r},r))})}),e.jsx(o.TableBody,{children:G.map(r=>e.jsxs(o.TableRow,{sx:{"&:hover":{backgroundColor:"#f9fafb"},cursor:"pointer"},onClick:()=>j(r),children:[e.jsx(o.TableCell,{sx:{fontSize:"13px"},children:r.model_name}),e.jsx(o.TableCell,{sx:{fontSize:"13px"},children:r.version}),e.jsx(o.TableCell,{sx:{fontSize:"13px"},children:e.jsx(o.Chip,{label:r.lifecycle_stage,size:"small",sx:{borderRadius:"4px",fontSize:"11px",backgroundColor:r.lifecycle_stage.toLowerCase()==="production"?"rgba(34, 197, 94, 0.1)":r.lifecycle_stage.toLowerCase()==="staging"?"rgba(234, 179, 8, 0.1)":"rgba(107, 114, 128, 0.1)",color:r.lifecycle_stage.toLowerCase()==="production"?"#16a34a":r.lifecycle_stage.toLowerCase()==="staging"?"#ca8a04":"#4b5563"}})}),e.jsx(o.TableCell,{sx:{fontSize:"13px"},children:T(r.creation_timestamp)}),e.jsx(o.TableCell,{sx:{fontSize:"13px"},children:T(r.last_updated_timestamp)}),e.jsx(o.TableCell,{sx:{fontSize:"13px",maxWidth:200,overflow:"hidden",textOverflow:"ellipsis"},children:r.description||"No description"}),e.jsx(o.TableCell,{children:e.jsx(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(o.Tooltip,{title:"View details",children:e.jsx(o.IconButton,{size:"small",sx:{mr:1},children:e.jsx(W,{size:16})})})})})]},r.id))}),d.length>0&&e.jsx(o.TableFooter,{children:e.jsxs(o.TableRow,{children:[e.jsxs(o.TableCell,{sx:{fontSize:"13px",color:"#667085"},children:["Showing ",O," of ",d.length," model(s)"]}),e.jsx(o.TablePagination,{count:d.length,page:y,onPageChange:$,rowsPerPage:c,rowsPerPageOptions:[5,10,15,25],onRowsPerPageChange:N,labelRowsPerPage:"Rows per page",labelDisplayedRows:({page:r,count:n})=>`Page ${r+1} of ${Math.max(1,Math.ceil(n/c))}`,slotProps:{select:{IconComponent:P}},sx:{fontSize:"13px"}})]})})]})})}),t&&e.jsx(o.Box,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(o.Card,{sx:{maxWidth:600,width:"90%",maxHeight:"80vh",overflow:"auto"},children:e.jsxs(o.CardContent,{children:[e.jsxs(o.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(o.Typography,{variant:"h6",sx:{fontWeight:600,fontSize:"15px"},children:t.model_name}),e.jsx(o.IconButton,{onClick:E,children:e.jsx(I,{size:20})})]}),e.jsxs(o.Grid,{container:!0,spacing:2,children:[e.jsxs(o.Grid,{item:!0,xs:12,sm:6,children:[e.jsx(o.Typography,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:"Basic Information"}),e.jsxs(o.Box,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(o.Typography,{variant:"body2",children:[e.jsx("strong",{children:"Version:"})," ",t.version]}),e.jsxs(o.Typography,{variant:"body2",children:[e.jsx("strong",{children:"Status:"})," ",t.status||t.lifecycle_stage]}),e.jsxs(o.Typography,{variant:"body2",children:[e.jsx("strong",{children:"Run ID:"})," ",t.run_id]}),e.jsxs(o.Typography,{variant:"body2",children:[e.jsx("strong",{children:"Created:"})," ",T(t.creation_timestamp)]})]})]}),e.jsxs(o.Grid,{item:!0,xs:12,sm:6,children:[e.jsx(o.Typography,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:"Description"}),e.jsx(o.Typography,{variant:"body2",children:t.description||"No description available"})]}),e.jsxs(o.Grid,{item:!0,xs:12,children:[e.jsx(o.Typography,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:"Tags"}),e.jsx(o.Box,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(t.tags||{}).map(([r,n])=>e.jsx(o.Chip,{label:`${r}: ${n}`,size:"small",sx:{backgroundColor:"#E0EAFF",color:"#0F172A",borderRadius:"4px"}},r))})]}),e.jsxs(o.Grid,{item:!0,xs:12,sm:6,children:[e.jsx(o.Typography,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:"Metrics"}),e.jsx(o.Box,{sx:{display:"flex",flexDirection:"column",gap:1},children:Object.entries(t.metrics||{}).map(([r,n])=>e.jsxs(o.Typography,{variant:"body2",children:[e.jsxs("strong",{children:[r,":"]})," ",typeof n=="number"?n.toFixed(4):n]},r))})]}),e.jsxs(o.Grid,{item:!0,xs:12,sm:6,children:[e.jsx(o.Typography,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:"Parameters"}),e.jsx(o.Box,{sx:{display:"flex",flexDirection:"column",gap:1},children:Object.entries(t.parameters||{}).map(([r,n])=>e.jsxs(o.Typography,{variant:"body2",children:[e.jsxs("strong",{children:[r,":"]})," ",String(n)]},r))})]}),e.jsxs(o.Grid,{item:!0,xs:12,children:[e.jsx(o.Typography,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:"Experiment Information"}),e.jsxs(o.Box,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(o.Typography,{variant:"body2",children:[e.jsx("strong",{children:"Experiment ID:"})," ",t.experiment_id]}),e.jsxs(o.Typography,{variant:"body2",children:[e.jsx("strong",{children:"Experiment Name:"})," ",t.experiment_name]}),e.jsxs(o.Typography,{variant:"body2",children:[e.jsx("strong",{children:"Artifact Location:"})," ",t.artifact_location]})]})]})]})]})})})]})},D=({configData:g={},onConfigChange:b,onSaveConfiguration:x,onTestConnection:C,isSavingConfig:a=!1,isTestingConnection:t=!1})=>{const[f,d]=h.useState({auth_method:"none",verify_ssl:"true",timeout:"30",...g}),p=(s,c)=>{d(i=>({...i,[s]:c})),b&&b(s,c)},y=[{key:"tracking_server_url",label:"Tracking Server URL",placeholder:"http://localhost:5000",type:"url"},{key:"auth_method",label:"Authentication Method",placeholder:"none",type:"select",options:[{value:"none",label:"None"},{value:"basic",label:"Basic Auth"},{value:"token",label:"Token"}]},{key:"username",label:"Username",placeholder:"Enter username",type:"text",showIf:s=>s.auth_method==="basic"},{key:"password",label:"Password",placeholder:"Enter password",type:"password",showIf:s=>s.auth_method==="basic"},{key:"api_token",label:"API Token",placeholder:"Enter API token",type:"password",showIf:s=>s.auth_method==="token"},{key:"verify_ssl",label:"Verify SSL",placeholder:"true",type:"checkbox"},{key:"timeout",label:"Request Timeout (seconds)",placeholder:"30",type:"number"}];return e.jsxs(o.Box,{children:[e.jsx(o.Typography,{variant:"body2",color:"text.secondary",fontSize:13,sx:{mb:3},children:"Configure your MLFlow tracking server connection settings."}),e.jsx(o.Stack,{spacing:2.5,children:y.map(s=>{var c;return s.showIf&&!s.showIf(f)?null:s.type==="select"?e.jsxs(o.Box,{children:[e.jsx(o.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:s.label}),e.jsx(o.FormControl,{fullWidth:!0,size:"small",children:e.jsx(o.Select,{value:f[s.key]||s.placeholder||"",onChange:i=>p(s.key,i.target.value),sx:{fontSize:"13px",backgroundColor:"white"},children:(c=s.options)==null?void 0:c.map(i=>e.jsx(o.MenuItem,{value:i.value,sx:{fontSize:"13px"},children:i.label},i.value))})})]},s.key):s.type==="checkbox"?e.jsx(o.Box,{children:e.jsx(o.FormControlLabel,{control:e.jsx(o.Checkbox,{checked:f[s.key]==="true",onChange:i=>p(s.key,i.target.checked?"true":"false"),sx:{color:"#13715B","&.Mui-checked":{color:"#13715B"}}}),label:e.jsx(o.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{color:"#344054"},children:s.label})})},s.key):e.jsxs(o.Box,{children:[e.jsx(o.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:s.label}),e.jsx(o.TextField,{fullWidth:!0,type:s.type,placeholder:s.placeholder,value:f[s.key]||"",onChange:i=>p(s.key,i.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]},s.key)})}),e.jsxs(o.Box,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:3},children:[C&&e.jsx(o.Button,{variant:"outlined",onClick:C,disabled:t||a,sx:{borderColor:"#13715B",color:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{borderColor:"#0f5a47",backgroundColor:"rgba(19, 113, 91, 0.04)"},"&:disabled":{borderColor:"#d0d5dd",color:"#98a2b3"}},children:t?"Testing...":"Test Connection"}),x&&e.jsx(o.Button,{variant:"contained",onClick:x,disabled:a||t,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{backgroundColor:"#0f5a47"},"&:disabled":{backgroundColor:"#d0d5dd"}},children:a?"Saving...":"Save Configuration"})]})]})};return v.MLFlowConfiguration=D,v.MLFlowTab=F,Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),v}({},jsxRuntime,React,MUI);
//# sourceMappingURL=index.esm.js.map
